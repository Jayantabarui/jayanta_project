if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("VideoViewabilityKeyEvents",[],(function(a,b,c,d,e,f){e.exports={Events:["entered_fs","exited_fs","finished_playing","paused","player_format_changed","started_playing","unpaused"]}}),null);
__d("MCustomDialog",["cx","DOM","ge"],(function(a,b,c,d,e,f,g,h){function a(a){var b=d("DOM").create("div",{className:"_3uug"},null),e=d("DOM").create("div",{className:"_3uuh"},d("DOM").create("h2",null,a.titleString)),f=d("DOM").create("div",{className:"_3uui"},d("DOM").create("p",null,a.descriptionString)),g=d("DOM").create("p",{className:"_3uuj"},a.dismissButtonString),h=d("DOM").create("div",{className:"_3uuk"},g);d("DOM").appendContent(b,e);d("DOM").appendContent(b,f);d("DOM").appendContent(b,h);if(a.confirmButtonString&&a.confirmButtonCallback){var i=d("DOM").create("p",{className:"_3uuj"},a.confirmButtonString);d("DOM").prependContent(h,i)}var j=d("DOM").create("div",{className:"_3uul"},b);g.addEventListener("click",function(){d("DOM").remove(j),a.dismissButtonCallback&&a.dismissButtonCallback()});i&&i.addEventListener("click",function(){d("DOM").remove(j),a.confirmButtonCallback&&a.confirmButtonCallback()});e=c("ge")("root");e&&d("DOM").prependContent(e,j)}g.show=a}),98);
__d("dangerouslyOverrideMediaElementEndedProperty",[],(function(a,b,c,d,e,f){function a(a){a===void 0&&(a={});a.dangerouslyOverrideMediaElementEndedProperty=!0;return a}a.isEnded=function(a){return!!(a&&a.detail&&a.detail.dangerouslyOverrideMediaElementEndedProperty)};f["default"]=a}),66);
__d("HTMLMediaElementReadyStates",[],(function(a,b,c,d,e,f){a={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4};b=a;f["default"]=b}),66);
__d("getHTMLMediaElementMutedState",["HTMLMediaElementReadyStates"],(function(a,b,c,d,e,f,g){function a(a){if(a.readyState>=c("HTMLMediaElementReadyStates").HAVE_METADATA)return a.muted;else return a.hasAttribute("muted")||a.muted}g["default"]=a}),98);
__d("getVideoBrowserTabId",["guid"],(function(a,b,c,d,e,f,g){var h=c("guid")().slice(-8);function a(){return h}g["default"]=a}),98);
__d("HVideoPlayerMixin",["EventListener","UserAgent","VideoPlayerHTML5Experiments","dangerouslyOverrideMediaElementEndedProperty","getHTMLMediaElementMutedState","getVideoBrowserTabId"],(function(a,b,c,d,e,f){var g=-1,h=!!(window.performance&&window.performance.now&&window.performance.timing&&window.performance.timing.navigationStart);function i(a,b){a.time_ms=Date.now();b=b.timeStamp;if(b&&h){var c=Math.floor(b).toString().length,d=Date.now().toString().length,e=window.performance.now();if(c===d+3)b=Math.floor(b/1e3),a.time_ms=b;else if(c===d)a.time_ms=b;else if(b<=e){c=window.performance.timing.navigationStart;a.time_ms=c+Math.floor(b)}}return a}a={initLogger:function(a,c,d,e,f,h,i){var j=this;this._loggedEvents={};this._logFunction=a;this._fixOverwrittenGetVideoCurrentTime=e;this._fireSeekEvents=f;this._useEventTime=c;this._recentPausedTime=null;this._audioOnly=!1;this._enablePlaybackSpeedLogging=i;var k=this.getVideoElement();if(h){var l=k.pause;k.pause=function(){j._recentPausedTime=k.currentTime;return l.apply(k)}}d&&(this._overwriteVideoCurrentTimeProperty(k),this._didOverwriteVideoCurrentTimeProperty||(this.preventSeekLoggingInMixin=!0));this._lastStartTimePosition=g;this._muted=b("getHTMLMediaElementMutedState")(k);this._pausedPosition=g;this._seeking=!1;this._seekSourceTimePosition=g;this._currentTimeAtSeekStart=g;this._volume=k.volume;this._hasBlockedPausedRepresentationEnded=!1;this._logNextPlayingEvent=!0;this._lastLoggedPlaybackSpeed=null;this._lastPlayedTime=g;a=!1;k.readyState>=k.HAVE_FUTURE_DATA?this._logReadyToPlay():a=!0;if(this.skipSubscriptions())return;e=this.getSubscriptions();a&&e.addSubscriptions(b("EventListener").listen(k,"canplay",this._logReadyToPlay.bind(this)));e.addSubscriptions(b("EventListener").listen(k,"ended",this.onEnded.bind(this)),b("EventListener").listen(k,"pause",this.onPause.bind(this)),b("EventListener").listen(k,"playing",this.onPlaying.bind(this)),b("EventListener").listen(k,"seeked",this.onSeeked.bind(this)),b("EventListener").listen(k,"seeking",this.onSeeking.bind(this)),b("EventListener").listen(k,"play",this.onPlay.bind(this)),b("EventListener").listen(k,"loadedmetadata",this.onLoadedMetadata.bind(this)),b("EventListener").listen(k,"timeupdate",this.onTimeUpdate.bind(this)),b("EventListener").listen(k,"volumechange",this.onVolumeChange.bind(this)));this._enablePlaybackSpeedLogging&&e.addSubscriptions(b("EventListener").listen(k,"ratechange",this.onPlaybackRateChange.bind(this)))},skipSubscriptions:function(){return!1},onCanPlay:function(a){this._logReadyToPlay(a)},onPlay:function(a){this._logNextPlayingEvent=!0,this._ignoreNextPlaying=!1,this._pendingPlayRequest=!0},logHeartbeat:function(){if(b("VideoPlayerHTML5Experiments").heartbeatUpdateWatchTime){this._logEvent("heart_beat",this._getWatchTimeClosingLogData({}));var a=this._getVideoCurrentTime();this._lastStartTimePosition=a;this._lastPlayedTime=a}else this._logEvent("heart_beat")},_getWatchTimeClosingLogData:function(a){this._lastPlayedTime=this._getVideoCurrentTime();return this._amendEventTime(babelHelpers["extends"]({video_last_start_time_position:this._lastStartTimePosition===g?this._lastPlayedTime:this._lastStartTimePosition,video_time_position:this._lastPlayedTime},a))},_logOnce:function(a,b){if(this._loggedEvents[a])return;this._logEvent(a,b)},setAudioOnly:function(a){this._audioOnly=a},_logEvent:function(a,c){this._loggedEvents[a]=!0;c=c?c:{};c.video_id=this.getVideoID();c.browser_tab_id=b("getVideoBrowserTabId")();this._audioOnly&&(c.audio_only=!0);c.has_blocked_paused_representation_ended=this._hasBlockedPausedRepresentationEnded;Object.prototype.hasOwnProperty.call(c,"video_time_position")||(c.video_time_position=this._getVideoCurrentTime());c.time_ms||(c.time_ms=Date.now());c.time=Math.round(c.time_ms/1e3);if(this.getAdClientToken){var d=this.getAdClientToken();d&&(c.ad_client_token=d)}this.getPlayerFormat&&(c.player_format=this.getPlayerFormat());this.getPlayerOrigin&&(c.player_origin=this.getPlayerOrigin());this.getPlayerSuborigin&&(c.player_suborigin=this.getPlayerSuborigin());if(this._enablePlaybackSpeedLogging){d=this.getVideoElement().playbackRate;d=d!==0?d:this._lastLoggedPlaybackSpeed;c.current_playback_speed=d;this._lastLoggedPlaybackSpeed=d}this._logFunction(a,c)},_logReadyToPlay:function(){return},__setPendingPlayRequest:function(a){this._pendingPlayRequest=a},onPause:function(a){this._logNextPlayingEvent=!0;var c=this.getVideoElement();if(this._pendingPlayRequest){var d={debug_reason:this.getLastPlayReason()};this._pendingPlayRequest=!1;this._logEvent("cancelled_requested_playing",d);return}d=!!this._getVideoPlayerShakaConfig();d=c.ended||d&&b("dangerouslyOverrideMediaElementEndedProperty").isEnded(a)?"finished_playing":"paused";var e=this._recentPausedTime==null?this._getVideoCurrentTime():this._recentPausedTime;this._recentPausedTime=null;e&&(this._lastPlayedTime=e);e=this._lastPlayedTime;var f=this._lastStartTimePosition===g?this._lastPlayedTime:this._lastStartTimePosition;b("VideoPlayerHTML5Experiments").preventNegativeTimePositions&&(this._lastPlayedTime<0&&(e=0,this._lastStartTimePosition<0&&(f=0)));var h=a.lastPauseReason;if(d==="finished_playing")e=Math.max(e,c.duration);else if(this.preventPauseLoggingInMixin===!0)return;else this.preventPauseLoggingInMixin===!1&&(h=h||"unloaded");this._logEvent(d,this._amendEventTime({video_last_start_time_position:f,video_time_position:e,debug_reason:h},a));this._lastStartTimePosition=g},onEnded:function(){this._logNextPlayingEvent=!0,this._lastStartTimePosition!==g&&b("UserAgent").isBrowser("IE")&&this.onPause({})},onBlockedPausedRepresentationEnded:function(){this._hasBlockedPausedRepresentationEnded=!0},logRepresentationEnded:function(a){if(a){a={representation_id:a.representationID,next_representation_id:a.nextRepresentationID,stream_switch_reason:a.streamSwitchReason};b("VideoPlayerHTML5Experiments").newStateChangeCalculation&&(a=this._getWatchTimeClosingLogData(a));this._logEvent("representation_ended",a);if(b("VideoPlayerHTML5Experiments").newStateChangeCalculation){a=this._getVideoCurrentTime();this._lastStartTimePosition=a;this._lastPlayedTime=a}}},addWatchTimeData:function(a){this._lastStartTimePosition!=g&&this._lastPlayedTime!=g&&(a.video_last_start_time_position=this._lastStartTimePosition,a.video_time_position=this._lastPlayedTime,this._lastStartTimePosition=g);return a},getLastPlayReason:function(){return null},getVideoPlayReason:function(){return null},onPlaying:function(a){if(!this._logNextPlayingEvent)return;b("VideoPlayerHTML5Experiments").superficialUnpauseEventsFix&&(this._logNextPlayingEvent=!1);if(this._ignoreNextPlaying){this._ignoreNextPlaying=!1;return}var c=this.getLastPlayReason();this._pendingPlayRequest=!1;var d=this._loggedEvents.started_playing?"unpaused":"started_playing";c=this._amendEventTime({debug_reason:c,video_play_reason:this.getVideoPlayReason()},a);a=this._getVideoCurrentTime();if(b("VideoPlayerHTML5Experiments").useCurrentTimeAdjustment){var e=this.getVideoElement().currentTime;e=e-a;c.time_ms-=Math.round(e*1e3)}this._logEvent(d,c);this._lastStartTimePosition=a;this._lastPlayedTime=a;this._currentTimeAtLoadedMetadataCache=null},allowNextSeekInMixin:function(){this._allowNextSeek=!0},onSeeked:function(a){this._seeking=!1;var b=this._seekSourceTimePosition;this._seekSourceTimePosition=g;var c=this._currentTimeAtSeekStart;this._currentTimeAtSeekStart=g;if(this.preventSeekLoggingInMixin&&!this._allowNextSeek){this._pendingPlayRequest||(this._ignoreNextPlaying=!0);return}this._allowNextSeek=!1;this._ignoreNextPlaying=!1;var d={video_seek_source_time_position:b,video_last_start_time_position:b};this._fixOvewrittenGetVideoCurrentTime&&(d.video_seek_source_time_position=c);this.preventSeekLoggingInMixin&&(this._lastStartTimePosition!==g?d.video_last_start_time_position=this._lastStartTimePosition:d.video_last_start_time_position=b);b="scrubbed";this._fireSeekEvents&&(b="seeked",d={seek_from_video_time_position:c});this._logEvent(b,this._amendEventTime(d,a));c=this.getVideoElement();c.paused?this._lastStartTimePosition=g:this._lastStartTimePosition=this._getVideoCurrentTime()},onSeeking:function(a){this._currentTimeAtLoadedMetadataCache=null;this._seeking||(this._seekSourceTimePosition=this._getVideoCurrentTime(),this._seeking=!0);if(this._fixOverwrittenGetVideoCurrentTime)return;this._currentTimeAtSeekStart=g},onTimeUpdate:function(a){this._currentTimeAtLoadedMetadataCache=null;a=this.getVideoElement();a.paused||(this._lastPlayedTime=this._getVideoCurrentTime())},onPlaybackRateChange:function(a){var b=this.getVideoElement();b=b.playbackRate;this._lastLoggedPlaybackSpeed!=null&&b!==0&&b!==this._lastLoggedPlaybackSpeed&&this._logEvent("playback_speed_changed",this._amendEventTime({},a))},onVolumeChange:function(a){var c=this.getVideoElement(),d={},e=null;if(b("VideoPlayerHTML5Experiments").useFixedVolumeLogging){var f=c.muted,g=this._muted,h=c.volume,i=this._volume;d.current_volume=Math.round(h*100);this._volume=h;this._muted=f;f=f||h==0;g=g||i==0;if(g&&f)return;if(g!=f)f?e="muted":e="unmuted";else{if(i==h)return;h<i?e="volume_decrease":e="volume_increase"}}else c.muted!==this._muted&&c.volume===this._volume&&c.volume>0?e=c.muted?"muted":"unmuted":(e=c.volume>this._volume?"volume_increase":"volume_decrease",d.current_volume=Math.round(c.volume*100)),this._muted=c.muted,this._volume=c.volume;this._logEvent(e,this._amendEventTime(d,a))},_amendEventTime:function(a,c){var d=this._useEventTime;b("VideoPlayerHTML5Experiments").fixEventTimeLogging&&(d=d&&c);if(d)return i(a,c);else a.time_ms=Date.now();return a},_getVideoCurrentTime:function(){var a;this._fixOverwrittenGetVideoCurrentTime?a=this.getVideoElement().currentTime:a=this._currentTimeAtSeekStart===g?this.getVideoElement().currentTime:this._currentTimeAtSeekStart;a=a.toFixed(2);b("VideoPlayerHTML5Experiments").useCurrentTimeAdjustment&&(this._currentTimeAtLoadedMetadataCache!=null&&(a=this._currentTimeAtLoadedMetadataCache.toFixed(2)));return b("VideoPlayerHTML5Experiments").fixCurrentTimeType?+a:a},_getVideoPlayerShakaConfig:function(){return this.getVideoPlayerShakaConfig&&typeof this.getVideoPlayerShakaConfig==="function"?this.getVideoPlayerShakaConfig():null},onLoadedMetadata:function(a){this._currentTimeAtLoadedMetadataCache=this.getVideoElement().currentTime},_overwriteVideoCurrentTimeProperty:function(a){var b=this;this._didOverwriteVideoCurrentTimeProperty=!1;try{var c=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"currentTime");if(!c)return;if(typeof c.get!=="function"||typeof c.set!=="function")return;Object.defineProperty&&Object.defineProperty(a,"currentTime",{get:function(){return c.get.call(this)},set:function(d){b._currentTimeAtSeekStart===g&&(b._currentTimeAtSeekStart=c.get.call(a)),c.set.call(a,d)},configurable:!0,enumerable:!0});this._didOverwriteVideoCurrentTimeProperty=!0}catch(a){}}};e.exports=a}),null);
__d("R2D2VideoMetadata",["getVideoBrowserTabId","uuid"],(function(a,b,c,d,e,f,g){var h=1e3,i=10;a=function(){function a(a){this.$1=a.video_id,this.$2=a.ad_client_token,this.$3=a.player_origin,this.$4=a.player_instance_key,this.$6=parseInt(a.playback_duration*h,i),this.$5=c("uuid")()}var b=a.prototype;b.toJSON=function(){return{video_id:this.$1,ad_client_token:this.$2,player_origin:this.$3,player_instance_key:this.$4,r2d2_session_id:this.$5,duration_ms:this.getDurationMs(),browser_tab_id:c("getVideoBrowserTabId")()}};b.getVideoId=function(){return this.$1};b.getDurationMs=function(){return parseInt(this.$6,i)};b.setDurationMs=function(a){this.$6=a};return a}();g["default"]=a}),98);
__d("R2D2VideoEventValidationSummary",[],(function(a,b,c,d,e,f){a=function(){function a(){this.$2=0,this.$1=new Map()}var b=a.prototype;b.addEvent=function(a){this.$1.has(a)||this.$1.set(a,0);var b=this.$1.get(a);this.$1.set(a,b+1);this.$2++};b.getEvents=function(){return this.$1};b.getEventsCount=function(){return this.$2};b.toJSON=function(){var a={},b=[];this.$1.forEach(function(c,d){a[d]=c,b.push(d)});return{events_count:JSON.stringify(a),events_name:"['"+b.join("','")+"']"}};return a}();f["default"]=a}),66);
__d("R2D2VideoWatchTimeSegment",[],(function(a,b,c,d,e,f){a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.getStartTimeMs=function(){return this.$1};b.getEndTimeMs=function(){return this.$2};return a}();f["default"]=a}),66);
__d("R2D2VideoState",["R2D2VideoWatchTimeSegment"],(function(a,b,c,d,e,f,g){a=function(){function a(a,b){this.$1=a,this.$2=b,this.reset()}var b=a.prototype;b.startPlaying=function(a){this.$3||(this.$3=!0,this.$6=a,this.$4||(this.$7=a))};b.stopPlaying=function(a){this.$3&&(this.$3=!1,this.addPlaySegment(this.$6,a),this.$4||this.addPlaySegmentWithSound(this.$7,a))};b.addPlaySegmentHelper=function(a,b,d){if(b>=d)return;d=new(c("R2D2VideoWatchTimeSegment"))(b,d);var e=!1;for(var f=0;f<a.length;f++)if(a[f].getStartTimeMs()>b){a.splice(f,0,d);e=!0;break}e||a.push(d)};b.addPlaySegment=function(a,b){this.addPlaySegmentHelper(this.$8,a,b)};b.addPlaySegmentWithSound=function(a,b){this.addPlaySegmentHelper(this.$9,a,b)};b.setFinishedPlaying=function(){this.$5=!0};b.getFinishedPlaying=function(){return this.$5};b.setMuted=function(a){this.$4||(this.$4=!0,this.$3&&this.addPlaySegmentWithSound(this.$7,a))};b.setUnmuted=function(a){this.$4&&(this.$4=!1,this.$7=a)};b.getVideoId=function(){return this.$1};b.getDurationMs=function(){return this.$2};b.setDurationMs=function(a){this.$2=a};b.getWatchedSegments=function(){return this.$8};b.getWatchedSegmentsWithSound=function(){return this.$9};b.reset=function(){this.$3=!1,this.$4=!0,this.$5=!1,this.$6=0,this.$7=0,this.$8=[],this.$9=[]};return a}();g["default"]=a}),98);
__d("R2D2VideoSession",["R2D2VideoEventValidationSummary","R2D2VideoState"],(function(a,b,c,d,e,f,g){var h=1e3,i=90*60*1e3;a=function(){function a(a,b,d){this.$4=new(c("R2D2VideoState"))(a.getVideoId(),a.getDurationMs()),this.$5=b,this.$6=d,this.$7=a,this.$8=[],this.$3=!1,this.$9=new(c("R2D2VideoEventValidationSummary"))()}var b=a.prototype;b.addEvent=function(a,b){if(this.$10(a,b))return;this.$11(b);this.$5.processEvent(a,b,this.$4);this.$2=new Date();this.$3=!0;this.$9.addEvent(a);this.$12(a,b)};b.$11=function(a){a=a.playback_duration*h;this.$7.setDurationMs(a);this.$4.setDurationMs(a)};b.$12=function(a,b){a={Name:a,ClientTime:new Date(),seq_num:b.seq_num,video_time_position:b.video_time_position};b.video_last_start_time_position!==void 0&&(a.video_last_start_time_position=b.video_last_start_time_position);this.$8.push(a)};b.$10=function(a,b){if(this.$8.length<1)return!1;var c=this.$8[this.$8.length-1];return c.Name===a&&c.video_time_position==b.video_time_position};b.hasUpdates=function(){return this.$3};b.hasExpired=function(){return this.$2.getTime()<=Date.now()-i};b.recalculateDelta=function(){var a=this.$6.getVideoStateSummary(this.$4),b=this.$6.calculateDelta(a,this.$1);this.$8.forEach(function(a){b.addDebugInfo(a)});this.$8=[];this.$1=a;this.$3=!1;return b};b.getMetadata=function(){return this.$7};b.getDebugInfo=function(){return this.$8};b.getEventValidationSummary=function(){return this.$9};b.getStateVideoDurationMsForTesting=function(){return this.$4.getDurationMs()};return a}();g["default"]=a}),98);
__d("R2D2VideoStateMachine",[],(function(a,b,c,d,e,f){var g=1e3;a=function(){function a(){}var b=a.prototype;b.processEvent=function(a,b,c){switch(a){case"started_playing":case"unpaused":c.startPlaying(b.video_time_position*g);break;case"finished_playing":c.stopPlaying(b.video_time_position*g);c.setFinishedPlaying();break;case"paused":c.stopPlaying(b.video_time_position*g);break;case"muted":c.setMuted(b.video_time_position*g);break;case"unmuted":c.setUnmuted(b.video_time_position*g);break}};return a}();f["default"]=a}),66);
__d("R2D2FinishCountMetric",[],(function(a,b,c,d,e,f){var g="finish_count";a=function(){function a(){}var b=a.prototype;b.compute=function(a){return a.getFinishedPlaying()?1:0};b.computeDelta=function(a,b){return a-b};b.getMetricName=function(){return g};return a}();f["default"]=a}),66);
__d("R2D2UniqueTimeSpentMetric",[],(function(a,b,c,d,e,f){var g="unique_time_spent_ms";a=function(){function a(){}var b=a.prototype;b.compute=function(a){return this.$1(a)};b.computeDelta=function(a,b){return a-b};b.getMetricName=function(){return g};b.$1=function(a){var b=0,c=0;a=a.getWatchedSegments();for(var d=0;d<a.length;d++){var e=a[d],f=e.getEndTimeMs();if(f>b){f=Math.max(b,e.getStartTimeMs());c+=e.getEndTimeMs()-f;b=e.getEndTimeMs()}}f=10;return parseInt(c,f)};return a}();f["default"]=a}),66);
__d("R2D2PlayCountMetric",["R2D2UniqueTimeSpentMetric"],(function(a,b,c,d,e,f,g){var h="play_count";a=function(){function a(){}var b=a.prototype;b.compute=function(a){var b=new(c("R2D2UniqueTimeSpentMetric"))();return a.getWatchedSegments().length>0&&b.compute(a)>0?1:0};b.computeDelta=function(a,b){return a-b};b.getMetricName=function(){return h};return a}();g["default"]=a}),98);
__d("R2D2VideoPlayRetention0to15s",[],(function(a,b,c,d,e,f){var g="video_play_retention_0_to_15s",h=15,i=0,j=1e3;a=function(){function a(){}var b=a.prototype;b.compute=function(a){var b=new Array(h-i+1);b.fill(0);a=a.getWatchedSegments();var c=10;for(var d=0;d<a.length;d++){var e=parseInt(a[d].getStartTimeMs()/j,c),f=parseInt(a[d].getEndTimeMs()/j,c);for(var e=e;e<=f;e++)if(e>=i&&e<=h)b[e-i]=1;else if(e>h)break}return b};b.computeDelta=function(a,b){var c=[];if(a.length!==b.length)return c;for(var d=0;d<a.length;d++)c.push(a[d]-b[d]);return c};b.getMetricName=function(){return g};return a}();f["default"]=a}),66);
__d("R2D2VideoStateSummary",[],(function(a,b,c,d,e,f){a=function(){function a(){this.$2=[],this.$1=new Map()}var b=a.prototype;b.getMetricValue=function(a){a=this.$1.get(a);return a===null||a===void 0?null:a};b.setMetricValue=function(a,b){b!==null&&this.$1.set(a,b)};b.toJSON=function(){var a=this,b={};this.$1.forEach(function(c,d){b[d]=a.$3(c)});if(this.$2.length>0){var c="debug_details";b[c]=JSON.stringify(this.$2)}return b};b.addDebugInfo=function(a){this.$2.push(a)};b.$3=function(a){return Array.isArray(a)?"["+a.toString()+"]":a};return a}();f["default"]=a}),66);
__d("R2D2MetricsHelper",[],(function(a,b,c,d,e,f){function a(a,b,c){if(b===0)return!1;for(var d=0;d<c.length;d++){var e=c[d];if(e.getStartTimeMs()<=b*a&&e.getEndTimeMs()>=b*a)return!0}return!1}f.isPercentageCovered=a}),66);
__d("R2D2ViewCountPercentage",["R2D2MetricsHelper"],(function(a,b,c,d,e,f,g){var h="view_count_";a=function(){function a(a){this.percentFactor=a}var b=a.prototype;b.compute=function(a){return d("R2D2MetricsHelper").isPercentageCovered(this.percentFactor/100,a.getDurationMs(),a.getWatchedSegments())?1:0};b.computeDelta=function(a,b){return a-b};b.getMetricName=function(){return h+this.percentFactor};return a}();g["default"]=a}),98);
__d("R2D2ViewCount100Metric",["R2D2ViewCountPercentage"],(function(a,b,c,d,e,f,g){var h=100;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,h)||this}return b}(c("R2D2ViewCountPercentage"));g["default"]=a}),98);
__d("R2D2ViewCount10Metric",["R2D2UniqueTimeSpentMetric"],(function(a,b,c,d,e,f,g){var h="true_view_count",i=10*1e3,j=.97;a=function(){function a(){}var b=a.prototype;b.compute=function(a){var b=new(c("R2D2UniqueTimeSpentMetric"))();return b.compute(a)>=i||a.getDurationMs()>0&&b.compute(a)>=a.getDurationMs()*j?1:0};b.computeDelta=function(a,b){return a-b};b.getMetricName=function(){return h};return a}();g["default"]=a}),98);
__d("R2D2ViewCount25Metric",["R2D2ViewCountPercentage"],(function(a,b,c,d,e,f,g){var h=25;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,h)||this}return b}(c("R2D2ViewCountPercentage"));g["default"]=a}),98);
__d("R2D2ViewCount50Metric",["R2D2ViewCountPercentage"],(function(a,b,c,d,e,f,g){var h=50;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,h)||this}return b}(c("R2D2ViewCountPercentage"));g["default"]=a}),98);
__d("R2D2ViewCount75Metric",["R2D2ViewCountPercentage"],(function(a,b,c,d,e,f,g){var h=75;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,h)||this}return b}(c("R2D2ViewCountPercentage"));g["default"]=a}),98);
__d("R2D2ViewCount95Metric",["R2D2ViewCountPercentage"],(function(a,b,c,d,e,f,g){var h=95;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.call(this,h)||this}return b}(c("R2D2ViewCountPercentage"));g["default"]=a}),98);
__d("R2D2ViewCountMetric",["R2D2UniqueTimeSpentMetric"],(function(a,b,c,d,e,f,g){var h="view_count",i=3e3,j=.97;a=function(){function a(){}var b=a.prototype;b.compute=function(a){var b=new(c("R2D2UniqueTimeSpentMetric"))();return b.compute(a)>=i||a.getDurationMs()>0&&b.compute(a)>=a.getDurationMs()*j?1:0};b.computeDelta=function(a,b){return a-b};b.getMetricName=function(){return h};return a}();g["default"]=a}),98);
__d("R2D2ViewCountRetentionGraphMetric",["R2D2ViewCountMetric"],(function(a,b,c,d,e,f,g){var h="retention_graph",i=4,j=40,k=1e3,l=10;a=function(){function a(){}var b=a.prototype;b.computeDelta=function(a,b){if(a.length!==b.length)return[];var c=[];for(var d=0;d<a.length;d++)c.push(a[d]-b[d]);return c};b.getMetricName=function(){return h};b.compute=function(a){var b=a.getDurationMs();if(!isFinite(b)||b<=0)return[];b=new(c("R2D2ViewCountMetric"))().compute(a);var d=a.getDurationMs(),e=parseInt(((d-1)/(k*i)+1)*i,l);e=Math.min(e,j);var f=new Array(e+1);f.fill(0);if(b==0)return f;b=a.getWatchedSegments();for(var a=0;a<b.length;a++){var g=b[a],h=parseInt(e*g.getStartTimeMs()/d,l);g=parseInt(e*g.getEndTimeMs()/d,l);if(h<=g&&h>=0&&g<=e)for(var h=h;h<=g;h++)f[h]=1}return f};return a}();g["default"]=a}),98);
__d("R2D2UniqueTimeSpentWithSoundMetric",[],(function(a,b,c,d,e,f){var g="unique_time_spent_with_sound_ms";a=function(){function a(){}var b=a.prototype;b.compute=function(a){return this.$1(a)};b.computeDelta=function(a,b){return a-b};b.getMetricName=function(){return g};b.$1=function(a){var b=0,c=0;a=a.getWatchedSegmentsWithSound();for(var d=0;d<a.length;d++){var e=a[d],f=e.getEndTimeMs();if(f>b){f=Math.max(b,e.getStartTimeMs());c+=e.getEndTimeMs()-f;b=e.getEndTimeMs()}}f=10;return parseInt(c,f)};return a}();f["default"]=a}),66);
__d("R2D2ViewCountWithSoundMetric",["R2D2UniqueTimeSpentWithSoundMetric"],(function(a,b,c,d,e,f,g){var h="view_count_with_sound_on",i=3e3,j=.97;a=function(){function a(){}var b=a.prototype;b.compute=function(a){var b=new(c("R2D2UniqueTimeSpentWithSoundMetric"))();return b.compute(a)>=i||a.getDurationMs()>0&&b.compute(a)>=a.getDurationMs()*j?1:0};b.computeDelta=function(a,b){return a-b};b.getMetricName=function(){return h};return a}();g["default"]=a}),98);
__d("R2D2VideoStateSummaryCalculator",["R2D2FinishCountMetric","R2D2PlayCountMetric","R2D2UniqueTimeSpentMetric","R2D2VideoPlayRetention0to15s","R2D2VideoStateSummary","R2D2ViewCount100Metric","R2D2ViewCount10Metric","R2D2ViewCount25Metric","R2D2ViewCount50Metric","R2D2ViewCount75Metric","R2D2ViewCount95Metric","R2D2ViewCountMetric","R2D2ViewCountRetentionGraphMetric","R2D2ViewCountWithSoundMetric"],(function(a,b,c,d,e,f,g){a=function(){function a(){this.$1=[new(c("R2D2UniqueTimeSpentMetric"))(),new(c("R2D2PlayCountMetric"))(),new(c("R2D2ViewCountMetric"))(),new(c("R2D2VideoPlayRetention0to15s"))(),new(c("R2D2FinishCountMetric"))(),new(c("R2D2ViewCountRetentionGraphMetric"))(),new(c("R2D2ViewCount25Metric"))(),new(c("R2D2ViewCount50Metric"))(),new(c("R2D2ViewCount75Metric"))(),new(c("R2D2ViewCount95Metric"))(),new(c("R2D2ViewCount100Metric"))(),new(c("R2D2ViewCountWithSoundMetric"))(),new(c("R2D2ViewCount10Metric"))()]}var b=a.prototype;b.getVideoStateSummary=function(a){var b=new(c("R2D2VideoStateSummary"))();this.$1.forEach(function(c){return b.setMetricValue(c.getMetricName(),c.compute(a))});return b};b.calculateDelta=function(a,b){var d=new(c("R2D2VideoStateSummary"))();this.$1.forEach(function(c){var e=a.getMetricValue(c.getMetricName());if(b!==void 0){var f=b.getMetricValue(c.getMetricName());e=c.computeDelta(e,f)}d.setMetricValue(c.getMetricName(),e)});return d};return a}();g["default"]=a}),98);
__d("R2D2Logger",["Banzai","R2D2VideoMetadata","R2D2VideoSession","R2D2VideoStateMachine","R2D2VideoStateSummaryCalculator","VideoPlayerStateBasedLoggingEvents","gkx"],(function(a,b,c,d,e,f){var g=10*1e3,h="video_player",i="r2d2_summary",j="r2d2_event_validation";a=function(){"use strict";function a(a){this.$4=a,this.$2=new(b("R2D2VideoStateSummaryCalculator"))(),this.$1=new Map()}var c=a.prototype;c.setScriptPath=function(a){this.$3=a};c.$5=function(a,b){return a+":"+b};c.addEvent=function(a,c){var d=this;if(this.shouldNotLogEvent(a))return;var e=this.$5(c.player_instance_key,c.video_id),f=this.$1.get(e);f==null&&(f=new(b("R2D2VideoSession"))(new(b("R2D2VideoMetadata"))(c),new(b("R2D2VideoStateMachine"))(),this.$2),this.$1.set(e,f));f.addEvent(a,c);setTimeout(function(){return d.$6()},g)};c.$6=function(){var a=this,c=[];this.$1.forEach(function(d,e){var f=null;d.hasUpdates()?f=a.createR2D2SummaryLoggingData(d.getMetadata(),d.recalculateDelta(),i):d.hasExpired()&&(c.push(e),f=a.createR2D2SummaryLoggingData(d.getMetadata(),d.getEventValidationSummary(),j));f!==null&&b("Banzai").post(h,f)});c.forEach(function(b){a.$1["delete"](b)})};c.createR2D2SummaryLoggingData=function(a,b,c){a=Object.assign(a.toJSON(),b.toJSON());return{event:c,logData:a,scriptPath:this.$3,source:this.$4}};c.shouldLogForR2D2=function(){return b("gkx")("676938")};c.shouldNotLogEvent=function(a){var c=new Set(b("VideoPlayerStateBasedLoggingEvents").StateBasedLoggingEventNames);return!c.has(a)};return a}();e.exports=a}),null);
__d("VideoPlayerLoggerErrorStates",[],(function(a,b,c,d,e,f){a="playback_failure";b="player_failure";f.PLAYBACK_FAILURE=a;f.PLAYER_FAILURE=b}),66);
__d("VideoPlayerLoggerErrors",[],(function(a,b,c,d,e,f){a="entered_fallback";b="error_calling_flash";f.ENTERED_FALLBACK=a;f.ERROR_CALLING_FLASH=b}),66);
__d("VideoPlayerLoggerFallbackReasons",[],(function(a,b,c,d,e,f){a="timeout";b="flash_error";c="flash_unavailable";f.TIMEOUT=a;f.FLASH_ERROR=b;f.FLASH_UNAVAILABLE=c}),66);
__d("VideoPlayerLoggerPlayerStates",[],(function(a,b,c,d,e,f){a="started";b="unpaused";c={STARTED:a,UNPAUSED:b};f["default"]=c}),66);
__d("VideoPlayerLoggerSource",[],(function(a,b,c,d,e,f){a=Object.freeze({AD_LIBRARY:"ad_library",ADS:"ads",ADS_PREVIEW:"ads_preview",ANIMATED_IMAGE_SHARE:"animated_image_share",ASSET:"asset",ASSET_MANAGER:"asset_manager",AUDIO_HOME:"audio_home",AUDIO_HOME_ORION_CTA:"audio_home_orion_cta",AYMT:"aymt",BALLOT:"ballot",BIZ_ART:"biz_art",BIZ_MENTIONS_AND_TAGS:"biz_mentions_and_tags",BIZ_STORIES_COMPOSER:"biz_stories_composer",BLOKS_EMULATOR:"bloks_emulator",BROADCAST_REQUEST_ATTACHMENT:"broadcast_request_attachment",BULLETIN_AUDIO_PLAYER:"bulletin_audio_player",BUSINESS_FEED:"business_feed",CAMERA_POST:"camera_post",CANDIDATE_PORTAL:"candidate_portal",CANDIDATE_VIDEOS:"candidate_videos",CATALOG_MANAGER:"catalog_manager",CHAINED:"chained",CHAINED_SUGGESTION:"chained_suggestion",CHANNEL:"channel",CHANNEL_TAB:"channel_tab",CHANNEL_TAB_LIVE_CARD:"channel_tab_live_card",CHANNEL_TAB_VIDEOS_CARD:"channel_tab_videos_card",CMS:"cms",COMMERCE_MANAGER:"commerce_manager",COMPASS_CURATION:"compass_curation",CONTINUE_WATCHING_RECOMMENDATION:"continue_watching_recommendation",CORPORATE_CARD_APPLICATION:"corporate_card_application",COWATCH:"cowatch",CREATOR_STUDIO_MIX_INSIGHTS_TRENDS:"creator_studio_mix_insights_trends",CREATOR_STUDIO_STARS_CUE_INSERTION_PREVIEW:"creator_studio_stars_cue_insertion_preview",CRICKET_MATCHES_AGGREGATION:"cricket_matches_aggregation",CROWDSOURCING_VIDEO_PREVIEW:"crowdsourcing_video_preview",CS_VIDEO_COMPOSER_CROSSPOSTING_REVIEW:"cs_video_composer_crossposting_review",CURATION:"curation",CURATION_QP:"curation_qp",DIM_SUM:"dim_sum",DISCOVERY_HUBS_HEADER:"discovery_hubs_header",DOLLY_DISCOVERY_PAGE:"dolly_discovery_page",EMBEDDED:"embedded",EMBEDDED_PAGE_PLUGIN:"embedded_page_plugin",EMBEDDED_VIDEO:"embedded_video",EMBEDDED_VIDEO_FROM_UFI:"embedded_video_from_ufi",EMBEDDED_VIDEO_PREVIEW:"embedded_video_preview",ENTRY_POINT:"entry_point",ENTRY_POINT_NOTIFICATIONS:"entry_point_notifications",EP_TAKEDOWN_REQUEST_MANAGER:"ep_takedown_request_manager",EVENTS_COVER:"events_cover",EVENTS_LIVE_CTA:"events_live_cta",EVENTS_LIVE_VIDEO_SECTION:"events_live_video_section",EXTERNAL_DEEPLINK:"external_deeplink",FACEBOOK_DESIGN:"facebook_design",FB_REELS_VIDEO_PREVIEW:"fb_reels_video_preview",FB_SHORTS_CREATION_FEED_UNIT:"fb_shorts_creation_feed_unit",FB_SHORTS_NATIVE_IN_FEED_UNIT:"fb_shorts_native_in_feed_unit",FB_SHORTS_PROFILE_VIEWER:"fb_shorts_profile_viewer",FB_SHORTS_RESHARE_FEED_UNIT:"fb_shorts_reshare_feed_unit",FB_SHORTS_UNIFIED_TOFU:"fb_shorts_unified_tofu",FB_SHORTS_VIEWER:"fb_shorts_viewer",FEED:"feed",FEED_STORY:"feed_story",FUNDRAISER_COVER:"fundraiser_cover",GAMEROOM_LIVE_VIDEO_HERO_BANNER:"gameroom_live_video_hero_banner",GAMEROOM_LIVE_VIDEO_TAB:"gameroom_live_video_tab",GAMEROOM_LIVE_VIDEO_THUMBNAIL:"gameroom_live_video_thumbnail",GAMES_ARENA_HERO:"games_arena_hero",GAMES_ARENA_VIDEOS_TAB:"games_arena_videos_tab",GAMES_AUDIENCE_NETWORK_ADS:"games_audience_network_ads",GAMES_FEATURED_HERO_BANNER:"games_featured_hero_banner",GAMES_FEED:"games_feed",GAMES_FEED_STORY_HEADER:"games_feed_story_header",GAMES_FEED_VOD_UNIT:"games_feed_vod_unit",GAMES_GAME_DETAILS:"games_game_details",GAMES_INSTANT_GAME_QUICK_PROMOTION:"games_instant_game_quick_promotion",GAMES_PROFILE:"games_profile",GAMES_STREAMER_DASHBOARD:"games_streamer_dashboard",GAMES_VERSE_DESTINATION:"games_verse_destination",GAMES_VIDEO_CLIPS_HOME:"games_video_clips_home",GAMES_VIDEO_CLIPS_HOME_IMMERSIVE_PLAYER:"games_video_clips_home_immersive_player",GAMES_VIDEO_CLIPS_HOME_MY_CLIPS:"games_video_clips_home_my_clips",GAMES_VIDEO_CLIPS_HOME_TOP_CLIPS:"games_video_clips_home_top_clips",GAMES_VIDEO_CLIPS_LIBRARY_PREVIEW_MODAL:"games_video_clips_library_preview_modal",GAMES_VIDEO_COMMUNITY_FEED:"games_video_community_feed",GAMES_VIDEO_COSTREAMERS_LIST:"games_video_costreamers_list",GAMES_VIDEO_EXPLORE_HOME:"games_video_explore_home",GAMES_VIDEO_HIGHLIGHT_VIDEO_PREVIEW:"games_video_highlight_video_preview",GAMES_VIDEO_HIGHLIGHT_VIDEO_TRANSITION:"games_video_highlight_video_transition",GAMES_VIDEO_HIGHLIGHTED_CLIPS_STREAMER_PAGE:"games_video_highlighted_clips_streamer_page",GAMES_VIDEO_HOME:"games_video_home",GAMES_VIDEO_HOME_HERO:"games_video_home_hero",GAMES_VIDEO_HOME_LEFT_RAIL:"games_video_home_left_rail",GAMES_VIDEO_HOME_SEE_ALL:"games_video_home_see_all",GAMES_VIDEO_HOME_STREAMER_HUB:"games_video_home_streamer_hub",GAMES_VIDEO_HOME_STREAMER_HUB_HERO:"games_video_home_streamer_hub_hero",GAMES_VIDEO_HOME_STREAMER_HUB_SCHEDULE:"games_video_home_streamer_hub_schedule",GAMES_VIDEO_HUB:"games_video_hub",GAMES_VIDEO_HUB_REDIRECT_NOTIFICATION:"games_video_hub_redirect_notification",GAMES_VIDEO_HUB_REDIRECT_UNKNOWN:"games_video_hub_redirect_unknown",GAMES_VIDEO_LIVE_RECOMMENDATION:"games_video_live_recommendation",GAMES_VIDEO_MIXER_US_QP_RECOMMENDED_LIVE:"games_video_mixer_us_qp_recommended_live",GAMES_VIDEO_PLAY_WITH_STREAMERS_LIVE:"games_video_play_with_streamers_live",GAMES_VIDEO_QP_RECOMMENDED_LIVE:"games_video_qp_recommended_live",GAMES_VIDEO_QP_US_RECOMMENDED_LIVE:"games_video_qp_us_recommended_live",GAMES_VIDEO_SEARCH_UNIT:"games_video_search_unit",GAMES_VIDEO_SINGLE_GAME:"games_video_single_game",GAMES_VIDEO_SOCIAL_PLUGIN:"games_video_social_plugin",GAMES_VIDEO_STREAMER_HUB:"games_video_streamer_hub",GAMES_VIDEO_STREAMER_SEARCH_UNIT:"games_video_streamer_unit",GAMES_VIDEO_THUMBNAIL_PREVIEW:"games_video_thumbnail_preview",GAMES_VIDEO_TOP_WEEKLY_CLIPS_STREAMER_PAGE:"games_video_top_weekly_clips_streamer_page",GAMES_VIDEO_VIEW_HIGHLIGHTS_CUE:"games_video_view_highlights_cue",GAMING_FOLLOWED_GAME_AGGREGATION:"gaming_followed_game_aggregation",GAMING_TOP_VIDEOS_AGGREGATION:"gaming_top_videos_aggregation",GET_CAUGHT_UP_QP:"get_caught_up_qp",GOODWILL_PRODUCT_SYSTEM:"goodwill_product_system",GROUP_HIGHLIGHT_LIVE_AFFILIATE_PLAYER:"group_highlight_live_affiliate_player",GROUP_LIVE_VIDEO_MODULE:"group_live_video_module",GROUP_VIDEOS_AGGREGATION:"group_videos_aggregation",GROUPS_COVER:"groups_cover",GROUPS_LATEST_VIDEOS:"groups_latest_videos",GROUPS_WATCH_ALL:"groups_watch_all",GROUPS_WATCH_POPULAR:"groups_watch_popular",GUIDANCE_HUB:"guidance_hub",HASHTAG_DESTINATION:"hashtag_destination",HORIZON_WEB_LEARN_MORE:"horizon_web_learn_more",HTML5:"html5",IGD_THREAD:"igd_thread",INLINE:"inline",INLINE_END_SCREEN:"inline_end_screen",INLINE_PAUSE_SCREEN:"inline_pause_screen",INLINE_QP:"inline_qp",INSIGHTS:"insights",INSTANT_GAMES:"instant_games",INTERESTS_BLING_STRING:"interests_bling_string",INTERESTS_CUE_LISTPACK:"interests_cue_listpack",INTERESTS_FIXED_ENTRYPOINT:"interests_fixed_entrypoint",INTERESTS_FIXED_LISTPACK:"interests_fixed_listpack",INTERESTS_FOLLOW_CUE:"interests_follow_cue",INTERESTS_FOLLOW_EDGE_HEADER:"interests_follow_edge_header",INTERESTS_MANAGER:"interests_manager",INTERESTS_MULTIPLE_SUBTOPIC_CUE:"interests_multiple_subtopic_cue",INTERESTS_SPRING_BOARD:"interests_spring_board",INTERESTS_SUBTOPIC_AGGREGATION:"interests_subtopic_aggregation",INTERESTS_SUGGESTED_FOLLOW:"interests_suggested_follow",INTERESTS_WARION_BELT:"interests_warion_belt",INTERN_API_UNLABELLED_DATASETS:"intern_api_unlabelled_datasets",INTERN_CRM_CALL_RECORDING:"intern_crm_call_recording",INTERN_CURATION:"intern_curation",INTERN_EXAMPLE:"intern_example",INTERN_NEW_HIRE_ORIENTATION:"intern_new_hire_orientation",ISSUES_MODULE:"issues_module",JOBS_VISUAL_INTRO:"jobs_visual_intro",LANCELET:"lancelet",LIGHTWEIGHT_STATUS:"lightweight_status",LIGHTWEIGHT_STATUS_CONSUMPTION:"lightweight_status_consumption",LIGHTWEIGHT_STATUS_SELF_VIEW:"lightweight_status_self_view",LINEAR_CHANNEL:"linear_channel",LIVE_AUTOPLAY_WATCH_AND_SCROLL:"live_autoplay_watch_and_scroll",LIVE_BEEPER:"live_beeper",LIVE_CLIPS_CREATOR:"live_clips_creator",LIVE_CONTROL_PANEL:"live_control_panel",LIVE_DESTINATION_SCHEDULED_LIVES_QP:"live_destination_scheduled_lives_qp",LIVE_DESTINATION_THEMATIC_UPSELL_QP:"live_destination_thematic_upsell_qp",LIVE_DESTINATION_UPSELL_QP:"live_destination_upsell_qp",LIVE_EVERGREEN_QP:"live_evergreen_qp",LIVE_GAMING_RHC:"live_gaming_rhc",LIVE_HERO:"live_hero",LIVE_LINEAR:"live_linear",LIVE_MAP:"live_map",LIVE_MAP_LISTVIEW:"live_map_listview",LIVE_MAP_SIDEBAR:"live_map_sidebar",LIVE_MAP_TOOLTIP:"live_map_tooltip",LIVE_MAP_TOOLTIP_FROM_LISTVIEW:"live_map_tooltip_from_listview",LIVE_MAP_TOOLTIP_FROM_MAP:"live_map_tooltip_from_map",LIVE_MAP_TOOLTIP_FROM_WEBGL:"live_map_tooltip_from_webgl",LIVE_MSITE:"live_msite",LIVE_MUSIC_DESTINATION:"live_music_destination",LIVE_PAGE_UPCOMING_NEXT_UNIT:"live_page_upcoming_next_unit",LIVE_PRODUCER:"live_producer",LIVE_PYML:"live_pyml",LIVE_QP:"live_qp",LIVE_RHC:"live_rhc",LIVE_SHOPPING:"live_shopping",LIVE_SHOPPING_EVERGREEN_QP:"live_shopping_buyer_qp",LIVE_VIDEO_BROADCAST:"live_video_broadcast",LIVE_VIDEO_PREVIEW:"live_video_preview",LIVING_ROOM:"living_room",LIVING_ROOM_COMMENTATING:"living_room_commentating",LIVING_ROOM_RECAP_FULLSCREEN:"living_room_recap_fullscreen",LIVING_ROOM_RECAP_INLINE:"living_room_recap_inline",LOOKBACK:"lookback",MARKETPLACE_PROMOTIONAL_VIDEO:"marketplace_promotional_video",MEDIA_COLLAGE:"media_collage",MEDIA_MATCH_SERVICE:"media_match_service",MEDIA_SYNC:"media_sync",MEDIA_VIEWER:"media_viewer",MEMORY_LEAK_TEST:"memory_leak_test",MESSAGING:"messaging",MESSENGER_COWATCH:"messenger_cowatch",MESSENGER_KIDS_CHALLENGES_INTERNAL_TOOL:"messenger_kids_challenges_internal_tool",MESSENGER_KIDS_DOT_COM:"messenger_kids_dot_com",MESSENGER_THREAD:"messenger_thread",MISC:"misc",MOBILE:"mobile",MORC_CONSOLE:"morc_console",MOVIES_RECOMMENDED_MOVIES_QP:"movies_recommended_movies_qp",MUSIC_HOME:"music_home",MUSIC_HOME_DEEPLINK:"music_home_deeplink",MUSIC_HOME_ENTRY_AGGREGATION:"music_home_entry_aggregation",MUSIC_HOME_INTERNAL_BOOKMARK:"music_home_internal_bookmark",MUSIC_HOME_NEWSFEED_ATTACHMENT:"music_home_newsfeed_attachment",MUSIC_HOME_NEWSFEED_ATTACHMENT_TRENDING:"music_home_newsfeed_attachment_trending",MUSIC_HOME_NOTIFICATION:"music_home_notification",MUSIC_HOME_QP:"music_home_qp",MUSIC_HOME_QP_OVERLAY_HEADER:"music_home_qp_overlay_header",MUSIC_HOME_RICH_TILE:"music_home_rich_tile",MUSIC_HOME_SEARCH_SHORTCUT:"music_home_search_shortcut",MUSIC_HOME_SERP:"music_home_serp",MUSIC_HOME_SPRINGBOARD_UNIT:"music_home_springboard_unit",MUSIC_HOME_STATIONS_QP:"music_home_stations_qp",MUSIC_HOME_TAPPABLE_EDGE_HEADER:"music_home_tappable_edge_header",MUSIC_HOME_THIRD_PARTY_PIVOT:"music_home_third_party_pivot",MUSIC_HOME_UGC_CTA:"music_home_ugc_cta",MUSIC_HOME_UNKNOWN:"music_home_unknown",MUSIC_HOME_WATCH_CUE:"music_home_watch_cue",MUSIC_HOME_WATCH_CUE_ARTIST:"music_home_watch_cue_artist",MUSIC_HOME_WATCH_CUE_TRENDING:"music_home_watch_cue_trending",MUSIC_HOME_WATCH_PILL:"music_home_watch_pill",MUSIC_HOME_WATCH_PILL_FIX:"music_home_watch_pill_fix",MUSIC_HOME_WATCH_SEARCH:"music_home_watch_search",MUSIC_HOME_WATCH_SPOTLIGHT_UNIT:"music_home_watch_spotlight_unit",MUSIC_HOME_WATCH_STATIONS_UNIT:"music_home_watch_stations_unit",MUSIC_HOME_WATCH_SURFACE_PROMOTION_PILL:"music_home_watch_surface_promotion_pill",MUSIC_VIDEOS_FEATURING_ARTIST_CARD:"music_videos_featuring_artist_card",MUSIC_VIDEOS_PLAYLISTS_CARD:"music_videos_playlists_card",MUSIC_WEEKLY_CHART:"music_weekly_chart",NEWSFEED_QP:"newsfeed_qp",NOT_SPECIFIED_PLEASE_FIX:"not_specified_please_fix",NOTIFICATIONS:"notifications",NPR_QP:"npr_qp",OCULUS_GAMES:"oculus_games",OCULUS_HUB:"oculus_hub",OCULUS_RECOMMENDED_VIDEO_UNIT:"oculus_recommended_video_unit",OFFERS_DETAIL:"offers_detail",PAGE_ADMIN_THINGS_YOU_SHOULD_DO_TIP:"page_admin_things_you_should_do_tip",PAGE_AUTOLOAD_WATCH_AND_SCROLL:"page_autoload_watch_and_scroll",PAGE_LIVE_TAB:"page_live_tab",PAGE_LIVE_VIDEO_MODULE:"page_live_video_module",PAGE_ROLES:"page_roles",PAGE_TIMELINE_LIVE_CARD:"page_timeline_live_card",PAGE_TIMELINE_LIVE_NOW_DIALOG:"page_timeline_live_now_dialog",PAGES_COVER:"pages_cover",PAGES_COVER_HOVER:"pages_cover_hover",PAGES_FINCH_MAIN_VIDEO:"pages_finch_main_video",PAGES_FINCH_THUMBNAIL_VIDEO:"pages_finch_thumbnail_video",PAGES_FINCH_TRAILER:"pages_finch_trailer",PAGES_HOME_HERO:"pages_home_hero",PAGES_HOME_PMV_UNIT:"pages_home_pmv_unit",PAGES_MESSAGING_VIDEO:"pages_messaging_video",PAGES_TIMELINE_INLINE:"pages_timeline_inline",PAGES_TIMELINE_PAGES_COVER:"pages_timeline_pages_cover",PAGES_VIDEO_SET:"pages_video_set",PAID_CONTENT_PACKAGE_PERMALINK_COVER:"paid_content_package_permalink_cover",PEOPLE_PORTAL:"people_portal",PERMALINK:"permalink",PLAYLIST_PAGE:"playlist_page",PLAYLISTS_CARD:"playlists_card",PLAYLISTS_TAB:"playlists_tab",PMV_BACK_CATALOG_QP:"pmv_back_catalog_qp",PMV_NEW_RELEASE_DIGEST:"pmv_new_release_digest",PMV_NEW_RELEASE_DIGEST_CHANNEL_VIEW:"pmv_new_release_digest_channel_view",PMV_NEW_RELEASE_QP:"pmv_new_release_qp",PMV_THIRD_PARTY_TRIGGERED_CTA:"pmv_third_party_triggered_cta",PMV_TOP_CHART_CTA:"pmv_top_chart_cta",PMV_UGC_CTA:"pmv_ugc_cta",PMV_YOUTUBE_STORY_LEVEL_CTA:"pmv_youtube_story_level_cta",POE_QP:"poe_qp",PROFILE_COVER:"profile_cover",PROFILE_FEATURED_SECTION:"profile_featured_section",PROFILE_OVERVIEW:"profile_overview",PROFILE_PLUS_LIVE_CARD:"profile_plus_live_card",PROFILE_PLUS_LIVE_VIDEOS_TAB:"profile_plus_live_videos_tab",PROFILE_PLUS_PINNED_POPULAR_VIDEO_CARD:"profile_plus_pinned_popular_video_card",PROFILE_PLUS_POPULAR_VIDEO_CARD:"profile_plus_popular_video_card",PROFILE_PLUS_PRODUCT_TOUR:"profile_plus_product_tour",PROFILE_PLUS_VIDEO_TAB:"profile_plus_video_tab",PROFILE_PLUS_VIDEOS_CARD:"profile_plus_videos_card",PROFILE_SWITCHER_ILLUSTRATION:"profile_switcher_illustration",PROFILE_VIDEO:"profile_video",PROFILE_VIDEO_HOVERCARD:"profile_video_hovercard",PROFILE_VIDEO_THUMB:"profile_video_thumb",PROTON:"proton",PUSH:"push",REDIRECTED_WATCH_SERP:"redirected_watch_serp",REMOTE_LEARNING_INSTRUCTOR_HOME:"remote_learning_instructor_home",REPORT_FLOW:"report_flow",RESULTS:"results",REVIEW:"review",RL_HUB:"rl_hub",ROBOTICS_RTC_PAGE:"robotics_rtc_page",ROBOTICS_TOUR_GUIDE_PAGE:"robotics_tour_guide_page",ROOMS_TRAY:"rooms_tray",SAVED_VIDEOS_QP:"saved_videos_qp",SEARCH_LIVE_VIDEO_MODULE:"search_live_video_module",SERIES_CARD:"series_card",SERP_INLINE_PLAYER:"serp_inline_player",SERP_THUMBNAIL_PREVIEW:"serp_thumbnail_preview",SERP_VIDEOS_TAB:"serp_videos_tab",SHORT_VIDEOS_SPOTLIGHT:"short_videos_spotlight",SHOWS_CATALOG:"shows_catalog",SINGLE_PAGE_CHANNEL:"single_page_channel",SLIDESHOW:"slideshow",SNOWLIFT:"snowlift",SOTTO_CATALOG:"sotto_catalog",SOTTO_CONSIDERATION_PAGE:"sotto_consideration_page",SPOTLIGHT_FEATURED:"spotlight_featured",SPOTLIGHT_LIVE:"spotlight_live",SPOTLIGHT_POPULAR:"spotlight_popular",SPOTLIGHT_UNKNOWN:"spotlight_unknown",SRT_REVIEW:"srt_review",STAGES_WAITING_ROOM_ONDEMAND:"stages_waiting_room_ondemand",STORIES_VIDEO_PREVIEW:"stories_video_preview",STORY_TRAY_LIVE_DROPDOWN:"story_tray_live_dropdown",STORY_VIEWER_LIVE_CTA:"story_viewer_live_cta",STORY_VIEWER_LIVE_DROPDOWN:"story_viewer_live_dropdown",STORY_VIEWER_LIVE_STICKER:"story_viewer_live_sticker",STORY_VIEWER_LIVE_VIDEO_VIEW:"story_viewer_live_video_view",SUGGESTED_PAGES_TO_FOLLOW_AGG:"suggested_pages_to_follow_agg",TAHOE:"tahoe",TAHOE_COSTREAMING_THUMBNAIL:"tahoe_costreaming_thumbnail",TEXT_BASED_VIDEO_EDITOR_ON_COMET:"text_based_video_editor_on_comet",TIMEPASS:"timepass",TOPIC_ANIMALS:"topic_animals",TOPIC_BEAUTY:"topic_beauty",TOPIC_CHANNEL_LIVING_ROOM:"topic_channel_living_room",TOPIC_CRICKET:"topic_cricket",TOPIC_FEED:"topic_feed",TOPIC_FOLLOWING:"topic_following",TOPIC_FOLLOWING_CONTINUE_WATCHING:"topic_following_continue_watching",TOPIC_FOLLOWING_LATEST:"topic_following_latest",TOPIC_FOLLOWING_NOT_WATCHED:"topic_following_not_watched",TOPIC_FOOD:"topic_food",TOPIC_GAMING:"topic_gaming",TOPIC_INTEREST:"topic_interest",TOPIC_LIVE:"topic_live",TOPIC_MUSIC:"topic_music",TOPIC_NEWS:"topic_news",TOPIC_SAVED_VIDEOS:"topic_saved_videos",TOPIC_SHOWS:"topic_shows",TOPIC_SPORTS:"topic_sports",TOPICS:"topics",TPFC:"tpfc",TRAILER_OG_ATTACHMENT:"trailer_og_attachment",TRAILER_TIMELINE_COLLECTIONS:"trailer_timeline_collections",TRAILER_TIMELINE_UNIT:"trailer_timeline_unit",TRIVIA_GAME_ADMIN_DASHBOARD:"trivia_game_admin_dashboard",TV:"tv",UFI_COMMENT_ATTACHMENT:"ufi_comment_attachment",UNIFIED_EDITOR:"unified_editor",UNIFIED_TOFU:"unified_tofu",USER_VIDEO_TAB:"user_video_tab",VEP_SESSION:"vep_session",VEP_WAITING_ROOM:"vep_waiting_room",VIDEO_COMPOSER_CROSSPOSTING_REVIEW:"video_composer_crossposting_review",VIDEO_COPYRIGHT_PREVIEW:"video_copyright_preview",VIDEO_COPYRIGHT_SEGMENT_PREVIEW:"video_copyright_segment_preview",VIDEO_HOME_CATALOG:"video_home_catalog",VIDEO_HOME_CHANNEL:"video_home_channel",VIDEO_HOME_CRICKET:"video_home_cricket",VIDEO_HOME_EXPLORE:"discover",VIDEO_HOME_EXPLORE_TAB:"explore",VIDEO_HOME_INLINE:"video_home_inline",VIDEO_HOME_NOTIF_HUB:"notif_hub",VIDEO_HOME_PINEAPPLE_HOME:"video_home_pineapple_home",VIDEO_HOME_RAINBOW_QP:"video_home_rainbow_qp",VIDEO_HOME_THUMBNAIL_PREVIEW:"video_home_thumbnail_preview",VIDEO_HOME_TOP_SEARCHED_TV_MOVIES_KEYWORDS:"video_home_top_searched_tv_movies_keywords",VIDEO_HOME_TV_MOVIES:"video_home_tv_movies",VIDEO_HOME_VIDEO_NOT_FOUND:"video_home_video_not_found",VIDEO_HOME_WATCHLIST:"watchlist",VIDEO_INLINE_CHAINING:"video_inline_chaining",VIDEO_INSIGHTS_MULTIVIEWER:"video_insights_multiviewer",VIDEO_INSIGHTS_OPSVIEW:"video_insights_opsview",VIDEO_LIST:"video_list",VIDEO_LIST_AGGREGATION:"video_list_aggregation",VIDEO_PAGE_SPOTLIGHT_UNIT:"video_page_spotlight_unit",VIDEO_PAGE_UNSPECIFIED:"video_page_unspecified",VIDEO_PAGE_VIDEO_LIST:"video_page_video_list",VIDEO_WALL:"video_wall",VIDEOHUB_FEATURED:"videohub_featured",VIDEOHUB_LIVE:"videohub_live",VIDEOHUB_PLAYLIST:"videohub_playlist",VIDEOS_CARD:"videos_card",VIDEOS_TAB:"videos_tab",VOICES_PODCAST:"voices_podcast",WATCH:"watch",WATCH_CASTING_QP:"watch_casting_qp",WATCH_CONTINUE_WATCHING:"watch_continue_watching",WATCH_CONTINUE_WATCHING_QP:"watch_continue_watching_qp",WATCH_CREATOR_QP:"watch_creator_qp",WATCH_EXPLORE_SURFACE_GCU:"watch_explore_surface_gcu",WATCH_EXPLORE_SURFACE_INTEREST:"watch_explore_surface_interest",WATCH_EXPLORE_SURFACE_NEW_RELEASES_PMV:"watch_explore_surface_new_releases_pmv",WATCH_EXPLORE_SURFACE_PAGES:"watch_explore_surface_pages",WATCH_EXPLORE_SURFACE_POPULAR_PMV:"watch_explore_surface_popular_pmv",WATCH_EXPLORE_SURFACE_PYML:"watch_explore_surface_pyml",WATCH_EXPLORE_SURFACE_TRENDING:"watch_explore_surface_trending",WATCH_EXPLORE_SURFACE_TVM:"watch_explore_surface_tv_movie",WATCH_EXPLORE_TRENDING_UNIT:"watch_explore_trending_unit",WATCH_HISTORY:"watch_history",WATCH_LIKED_VIDEOS:"watch_liked_videos",WATCH_NULLSTATE_DISCOVERY_GCU:"watch_nullstate_discovery_gcu",WATCH_NULLSTATE_DISCOVERY_INTEREST:"watch_nullstate_discovery_interest",WATCH_NULLSTATE_DISCOVERY_PYML:"watch_nullstate_discovery_pyml",WATCH_ORIGINALS_QP:"watch_originals_qp",WATCH_PREMIUM_CONTENT_QP:"watch_premium_content_qp",WATCH_RACIAL_INJUSTICE_QP:"watch_racial_injustice_qp",WATCH_RAINBOW_QP:"watch_rainbow_qp",WATCH_SCROLL:"watch_scroll",WATCH_SEARCH_DISCOVER:"watch_search_discover",WATCH_SUBTOPIC_CHANNEL:"watch_subtopic_channel",WATCH_TOPIC_PILLS_TO_CHANNEL:"watch_topic_pills_to_channel",WATCH_VIDEO_HIGHLIGHTS_QP:"watch_video_highlights_qp",WATCHLIST_AGGREGATION:"watchlist_aggregation",WOODHENGE_COMET_SIGNUP:"woodhenge_comet_signup",WORK_CAPTIONS_REVIEW:"work_captions_review",WORK_CHAPTERS_EDITOR:"work_chapters_editor",WORK_TOP_OF_FEED_UNIT:"work_top_of_feed_unit",WORK_VIDEO_QP:"work_video_qp",WORK_WATCH_COLLECTIONS:"work_watch_collections",WORK_WATCH_COLLECTIONS_OFFICIAL:"work_watch_collections_official",WORK_WATCH_GROUPS:"work_watch_groups",WORK_WATCH_GROUPS_ALL:"work_watch_groups_all",WORK_WATCH_GROUPS_OUTER:"work_watch_groups_outer",WORK_WATCH_GROUPS_POPULAR:"work_watch_groups_popular",WORK_WATCH_HOME:"work_watch_home",WORK_WATCH_HOME_CAROUSEL:"work_watch_home_carousel",WORK_WATCH_HOME_CONTINUE_WATCHING:"work_watch_home_continue_watching",WORK_WATCH_HOME_EXPLORE_OTHER_GROUPS:"work_watch_home_explore_other_groups",WORK_WATCH_HOME_HEAR_ABOUT_LEADERS:"work_watch_home_hear_about_leaders",WORK_WATCH_HOME_POPULAR:"work_watch_home_popular",WORK_WATCH_HOME_RECENT_FROM_GROUPS:"work_watch_home_recent_from_groups",WORK_WATCH_HOME_RECENT_OTHER_GROUPS:"work_watch_home_recent_other_groups",WORK_WATCH_HOME_RECENTLY_LIVE:"work_watch_home_recently_live",WORK_WATCH_HOME_RECENTLY_WATCHED:"work_watch_home_recently_watched",WORK_WATCH_HOME_SAVED_VIDEOS:"work_watch_home_saved_videos",WORK_WATCH_LIVE:"work_watch_live",WORK_WATCH_LIVE_ALL:"work_watch_live_all",WORK_WATCH_LIVE_POPULAR:"work_watch_live_popular",WORKPLACE_INSIGHTS:"workplace_insights"});f["default"]=a}),66);
__d("VideoPlayerWwwFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1914651");c=b("FalcoLoggerInternal").create("video_player_www",a);e.exports=c}),null);
__d("VideoPlayerLogger",["invariant","FBLogger","R2D2Logger","VideoPlayerExperiments","VideoPlayerHTML5Experiments","VideoPlayerLoggerErrorStates","VideoPlayerLoggerErrors","VideoPlayerLoggerFallbackReasons","VideoPlayerLoggerPlayerStates","VideoPlayerLoggerSource","VideoPlayerWwwFalcoEvent","getVideoBrowserTabId","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g){"use strict";var h,i=200,j=b("VideoPlayerHTML5Experiments").useBanzaiVitalForLive,k=b("VideoPlayerHTML5Experiments").discerningAbandonStallLogging;function l(a,b,c,d){return babelHelpers["extends"]({event_name:a,source:c,scriptPath:d},b)}var m=5e3,n=function(){return b("VideoPlayerHTML5Experiments").useMonotonicallyIncreasingTimers?(h||(h=b("performanceAbsoluteNow")))():Date.now()};a=function(){function a(a,c){this.$29=[],this.$30=null,this.$31=0,this.$32=!1,this.$2=a,this.$3=null,this.$5={},this.$4=c,this.$7=0,this.$8=0,this.$9=0,this.$10=0,this.$6=[],this.$19=0,this.$20=0,this.$11=0,this.$27=!1,this.$16=!1,this.$33(),this.$34(),this.$28=new(b("R2D2Logger"))(this.$2)}var c=a.prototype;c.updateSource=function(a){this.$2=a};c.getSource=function(){return this.$2};c.disable=function(){this.$32=!0};c.isDisabled=function(){return this.$32};c.logEvent=function(a,c){var d=this;c=babelHelpers["extends"]({},c,this.$4);c.initial_event=!Object.prototype.hasOwnProperty.call(this.$5,a);Object.prototype.hasOwnProperty.call(c,"time_ms")||(c.time_ms=n());Object.prototype.hasOwnProperty.call(c,"browser_tab_id")||(c.browser_tab_id=b("getVideoBrowserTabId")());Object.prototype.hasOwnProperty.call(c,"time")||(c.time=Math.round(c.time_ms/1e3));c.is_stalling=this.$35();c.error_user_info=this.$36(c.error_user_info);this.$3&&Object.assign(c,this.$3);b("VideoPlayerExperiments").logVideoFramesInfo&&this.$37();switch(a){case"paused":case"finished_playing":if(this.$24){var e=this.$24,f=e.getABREvaluation();c.ideal_samples=f.idealSamples;c.conservative_samples=f.conservativeSamples;c.aggressive_samples=f.aggressiveSamples;c.conservative_resolution_constrained_samples=f.conservativeResolutionConstrainedSamples;c.last_quality_switch_reason=f.lastQualitySwitchReason;c.reason&&e.setLastQualitySwitchReason(c.reason)}f=typeof this.$25==="function"&&this.$25();e=typeof this.$26==="function"&&this.$26();typeof e==="number"&&typeof f==="number"&&(c.dropped_frame_count=f,c.total_frame_count=e);break}switch(a){case"started_playing":case"unpaused":this.$27=!0;break;case"finished_playing":case"error":case"paused":this.$27=!1;break}switch(a){case"requested_playing":this.$33();this.$38();this.$5.started_playing?c.state=b("VideoPlayerLoggerPlayerStates").UNPAUSED:c.state=b("VideoPlayerLoggerPlayerStates").STARTED;break;case"started_playing":case"unpaused":case"finished_playing":case"cancelled_requested_playing":case"error":case"paused":case"representation_ended":case"heart_beat":a==="error"&&c.state===b("VideoPlayerLoggerErrorStates").PLAYER_FAILURE&&!this.$5.started_playing&&(c.state=b("VideoPlayerLoggerPlayerStates").STARTED);if(a==="error"&&b("VideoPlayerExperiments").disableStallLoggingForError)break;if(a=="representation_ended"&&!this.$5.started_playing)break;if(a==="heart_beat"&&(!this.$5.started_playing||!b("VideoPlayerHTML5Experiments").heartbeatUpdateWatchTimeV2||this.$35()))break;a==="heart_beat"&&(c.v2_heart_beat=!0);(a==="started_playing"||a==="unpaused")&&(this.$11=c.time_ms,this.$39());if(a==="error"&&c.state!==b("VideoPlayerLoggerErrorStates").PLAYBACK_FAILURE)break;a==="cancelled_requested_playing"&&(this.$5.started_playing?c.state=b("VideoPlayerLoggerPlayerStates").UNPAUSED:c.state=b("VideoPlayerLoggerPlayerStates").STARTED);this.$40();this.$41();(a==="paused"||a==="finished_playing")&&(k&&a==="finished_playing"&&this.$39(),c.recent_stalls_count=this.$42());this.$43();this.$44(c);this.$45(c);this.$34();k&&this.$39();this.$33();break}if(b("VideoPlayerExperiments").logVideoFramesInfo)switch(a){case"started_playing":case"unpaused":case"finished_playing":case"paused":case"heart_beat":f=this.$46();f&&(c.video_frames_info=f);break}e={logData:c,event:a,scriptPath:this.$1,source:this.$2};a||b("FBLogger")("video").warn("Missing event name");this.$5[a]=!0;if(this.$2==="animated_image_share")return null;if(this.isDisabled())return null;c.ad_client_token||b("VideoPlayerHTML5Experiments").useVitalForEverything||j&&c.playback_is_live_streaming||b("VideoPlayerHTML5Experiments").useVitalForClosing&&(a==="paused"||a==="finished_playing"||a==="heart_beat")||b("VideoPlayerHTML5Experiments").useVitalForOpening&&(a==="unpaused"||a==="started_playing")?b("VideoPlayerWwwFalcoEvent").logImmediately(function(){return l(a,c,d.$2,d.$1)}):b("VideoPlayerWwwFalcoEvent").log(function(){return l(a,c,d.$2,d.$1)});return e};c.setScriptPath=function(a){this.$1=a,this.$28.setScriptPath(a)};c.setFTData=function(a){this.$3=a};c.setABRQualityTracker=function(a){this.$24=a};c.setFrameCountGetters=function(a,b){this.$25=a,this.$26=b};c.startBuffering=function(a){if(b("VideoPlayerHTML5Experiments").disableBufferingBeforeStartedPlaying&&!this.$5.started_playing)return;this.$38(a)};c.endBuffering=function(){if(b("VideoPlayerHTML5Experiments").disableBufferingBeforeStartedPlaying&&!this.$5.started_playing)return;this.$41();this.$47();this.$40();this.$43()};c.startInterrupt=function(){this.$48()};c.endInterrupt=function(){this.$41(),this.$47()};c.$35=function(){return this.$15>0};c.$38=function(a){if(this.$35())return;this.$16=this.$27;this.$15=Date.now();a!==void 0&&this.$5.started_playing&&(this.$17=a)};c.$48=function(){if(this.$49())return;this.$21=Date.now()};c.$49=function(){return this.$21>0};c.$50=function(){return!this.$49()?0:Date.now()-this.$21};c.$51=function(){return this.$35()?Date.now()-this.$15:0};c.$41=function(){if(this.$49()){var a=this.$50();this.$22+=a;this.$20+=a;this.$23+=1;this.$19+=1}};c.$47=function(){this.$49()&&(this.$21=0)};c.$34=function(){this.$22=0,this.$23=0,this.$47()};c.$40=function(){if(this.$35()){var a=this.$51();this.$17!==null&&(this.$18=a);this.$14+=a;this.$8+=a;this.$12++;a>200&&this.$13++;this.$7++;this.$16&&(this.$10+=a,this.$9++,this.$16=!1);k&&this.$6.push(n())}};c.$43=function(){this.$35()&&(this.$15=0)};c.$36=function(a){return a&&typeof a==="object"?JSON.stringify(a):a};c.$37=function(){var a=this;this.$30||(this.$30=setInterval(function(){return a.$52()},i))};c.$52=function(){var a=typeof this.$26==="function"&&this.$26(),b=typeof this.$25==="function"&&this.$25();typeof a==="number"&&typeof b==="number"&&(a!==this.$31||b!==0)&&(this.$29.push({time_stamp:n(),total_frames:a,dropped_frames:b}),this.$31=a)};c.$46=function(){if(!this.$29.length)return null;var a=[];for(var b=this.$29,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;a.push([e.time_stamp,e.total_frames,e.dropped_frames])}this.$29=[];return JSON.stringify(a)};c.stopCollectingVideoFramesInfo=function(){clearInterval(this.$30),this.$30=null,this.$29=[]};c.getCumulativeStallCount=function(){return this.$7};c.getCumulativeInPlayStallCount=function(){return this.$9};c.getStallCount=function(){return this.$12};c.getCumulativeStallTime=function(){return this.$8+this.$51()};c.getCumulativeInPlayStallTime=function(){return this.$10+(this.$16?this.$51():0)};c.getCumulativeInterruptCount=function(){return this.$19};c.getCumulativeInterruptTime=function(){return this.$20+this.$50()};c.$44=function(a){a.stall_time=Math.max(0,this.$14),a.stall_count=this.$12,a.stall_count_200_ms=this.$13,this.$18&&(a.first_stall_time=this.$18,a.first_stall_start_position=this.$17)};c.$45=function(a){a.interrupt_time=Math.max(0,this.$22),a.interrupt_count=this.$23};c.$42=function(){var a=n(),b=a-m;this.$6=this.$6.filter(function(a){return a>=b});k||this.$12>0&&this.$6.push(a);return this.$6.length};c.$33=function(){this.$14=0,this.$15=0,this.$12=0,this.$13=0,this.$17=null,this.$18=0};c.$39=function(){this.$6=[]};c.getFTdata=function(){return this.$3};return a}();a.Sources=b("VideoPlayerLoggerSource");a.Errors=b("VideoPlayerLoggerErrors");a.FallbackReasons=b("VideoPlayerLoggerFallbackReasons");a.ErrorStates=b("VideoPlayerLoggerErrorStates");a.PlayerStates=b("VideoPlayerLoggerPlayerStates");e.exports=a}),null);
__d("HVideoPlayerLoggerMixin",["EventListener","HVideoPlayerMixin","VideoPlayerLogger"],(function(a,b,c,d,e,f){a={};c={initLogger:function(){var a=this;b("EventListener").listen(this.getVideoElement(),"play",function(){return a._onPlayLogUnmute()});this._logger=new(b("VideoPlayerLogger"))(b("VideoPlayerLogger").Sources.HTML5);var c=function(b,c){var d=a.getSavedOffline(),e=a.getConnectivityType(),f=a.getResourceUrl(),g=a.getIsAdsPreview();c=babelHelpers["extends"]({},c,{saved_offline:d,connectivity_type:e,resource_url:f,is_ads_preview:g});b==="unmuted"&&(a._unmutedWasLogged=!0);c=Object.assign(c,a.getAdditionalLogData(b));a._logger.logEvent(b,c)};b("HVideoPlayerMixin").initLogger.call(this,c)},_onPlayLogUnmute:function(){var a=this.getLastPlayReason();!this._unmutedWasLogged&&this.getVideoElement()&&!this.getVideoElement().muted&&a=="user_initiated"&&this._logEvent("unmuted")},getLogger:function(){return this._logger},getAdClientToken:function(){var a=this.getVideoData();return a.adClientToken?a.adClientToken:null},getSavedOffline:function(){return null},logDisplayed:function(){this._logEvent("displayed",{is_auto_played:!0})},logPauseEvent:function(a){this.onPause(a?a:{})},logEvent:function(a,b){this._logEvent(a,b)}};Object.assign(a,b("HVideoPlayerMixin"));Object.assign(a,c);e.exports=a}),null);
__d("MInlineVideoDebugger",["CSS","DOM","MVideoUtils"],(function(a,b,c,d,e,f,g){a=function(){function a(a,b){this.$6=b,this.$7(a),this.$8(),this.$9(),this.$10(),this.$11()}var b=a.prototype;b.$7=function(a){this.$1=d("DOM").create("div"),c("CSS").conditionClass(this.$1,c("MVideoUtils").DEBUGGER_CLASS,!0),d("DOM").insertAfter(a,this.$1)};b.$8=function(){this.$2=d("DOM").create("div"),d("DOM").appendContent(this.$1,this.$2)};b.$9=function(){this.$3=d("DOM").create("div"),d("DOM").appendContent(this.$1,this.$3)};b.$10=function(){this.$4=d("DOM").create("div"),d("DOM").appendContent(this.$1,this.$4)};b.$11=function(){this.$5=d("DOM").create("div"),d("DOM").appendContent(this.$1,this.$5),this.updateVideoIdDebugger(this.$6.videoID)};b.updateViewabilityLoggingDebugger=function(a){d("DOM").setContent(this.$2,"viewability:"+a)};b.updatePlayerStateDebugger=function(a){d("DOM").setContent(this.$3,"player state:"+a)};b.updateLastActionReasonDebugger=function(a){d("DOM").setContent(this.$4,"lastActionReason:"+a)};b.updateVideoIdDebugger=function(a){d("DOM").setContent(this.$5,"video ID:"+a)};b.cleanUp=function(){d("DOM").remove(this.$1)};return a}();g["default"]=a}),98);
__d("Network",["$InternalEnum","mixInEventEmitter"],(function(a,b,c,d,e,f,g){var h=!0,i=a.navigator.connection,j={0:"unknown",1:"ethernet",2:"wifi",3:"2g",4:"3g"},k=b("$InternalEnum")({Bluetooth:"bluetooth",Cellular:"cellular",Ethernet:"ethernet",None:"none",Wifi:"wifi",Wimax:"wimax",Other:"other",Unavailable:"unavailable",Unknown:"unknown"}),l=b("$InternalEnum")({Type_Slow2g:"slow-2g",Type_2g:"2g",Type_3g:"3g",Type_4g:"4g",Unavailable:"unavailable"});function m(){return h}function d(a){if(a==h)return;h=a;r.emit(a?"online":"offline")}function e(){if(!m())return 0;var a=i==null?void 0:i.downlinkMax;if(typeof a==="number"&&Number.isFinite(a))return a;a=i==null?void 0:i.downlink;return typeof a==="number"&&Number.isFinite(a)?a:null}function f(){if(!m())return 0;var a=i==null?void 0:i.rtt;return typeof a==="number"&&Number.isFinite(a)?a:null}function n(){return i!=null&&i!=void 0}function o(){var a=i?String(i.type):"0";return j[a]||a}function p(){var a=i==null?void 0:i.type;return(a=typeof a==="string"?k.cast(a):null)!=null?a:k.Unavailable}function q(){var a=i==null?void 0:i.effectiveType;return(a=typeof a==="string"?l.cast(a):null)!=null?a:l.Unavailable}var r={NetworkConnectivityType:k,NetworkConnectivityEffectiveType:l,getBandwidth:e,getEffectiveType:q,getType:p,getType_DEPRECATED_DO_NOT_USE:o,isOnline:m,setOnline:d,getRTT:f,containsNetworkInformation:n};c("mixInEventEmitter")(r,{online:!0,offline:!0});a.addEventListener?(a.addEventListener("online",d.bind(null,!0)),a.addEventListener("offline",d.bind(null,!1))):a.attachEvent&&(a.attachEvent("online",d.bind(null,!0)),a.attachEvent("offline",d.bind(null,!1)));b=r;g["default"]=b}),98);
__d("MVideoNetworkUtils",["Network"],(function(a,b,c,d,e,f,g){"use strict";a={getConnectivityType:function(){switch(c("Network").getType()){case c("Network").NetworkConnectivityType.Bluetooth:case c("Network").NetworkConnectivityType.Ethernet:case c("Network").NetworkConnectivityType.Wifi:case c("Network").NetworkConnectivityType.Wimax:return"WIFI";case c("Network").NetworkConnectivityType.Cellular:return"MOBILE";default:break}switch(c("Network").getEffectiveType()){case c("Network").NetworkConnectivityEffectiveType.Type_4g:return"WIFI";case c("Network").NetworkConnectivityEffectiveType.Type_Slow2g:case c("Network").NetworkConnectivityEffectiveType.Type_2g:case c("Network").NetworkConnectivityEffectiveType.Type_3g:return"MOBILE";default:return null}},getNetworkBandwidth:function(){return c("Network").getBandwidth()}};b=a;g["default"]=b}),98);
__d("SubRipText",[],(function(a,b,c,d,e,f){var g={size:"90%"};function h(a){var b=Number(a.substr(0,a.length-1)),c=a.substr(-1);switch(c){case"s":return b;case"m":return b*60;case"h":return b*3600}c=a.split(":");b=Number(c[c.length-1].replace(/,/,"."));c.length>1&&(b+=Number(c[c.length-2])*60);c.length>2&&(b+=Number(c[c.length-3])*3600);return b}function i(a){a=a.split(/\r\n|\r|\n/).map(function(a){return a.trim()});var b=[],c=0;do{var d=a.indexOf("",c);d<0&&(d=a.length);var e=k(a.slice(c,d));e&&b.push(e);c=d+1}while(c>0&&c<a.length);return b}function j(a){a=a.split("-->");if(a.length!=2)return null;var b=h(a[0].trim());a=h(a[1].trim());return Number.isNaN(a)||Number.isNaN(b)?null:{begin:b,end:a}}function k(a){if(a.length<3)return null;var b=l(a[0]),c=j(a[1]);return!c?null:{counter:b,begin:c.begin,end:c.end,text:a.slice(2,6)}}function l(a){return Number(a.trim())}function m(a){a=a.split(".");return a[0].length<2?"0"+a.join("."):a.join(".")}function n(a){var b=m(Math.floor(a/3600).toString()),c=m(Math.floor(a%3600/60).toString());a=m((a%60).toFixed(3));return b+":"+c+":"+a}function o(a,b,c){var d="";if(c)for(var e in c)d+=" "+e+":"+c[e];return n(a)+" --> "+n(b)+d}function p(a,b){return a.counter+"\n"+o(a.begin,a.end,b)+"\n"+a.text.join("\n")+"\n"}function q(a,b){return"WEBVTT\n\n"+a.map(function(a){return p(a,b)}).join("\n")}a=function(){function a(a){var b=this;this.$1=i(a);this.$1.sort(function(a,b){return a.counter-b.counter});this.$2=this.$1.map(function(a,b){return b}).sort(function(a,c){return b.$1[a].begin-b.$1[c].begin});this.invalidateCache();this.$6=g}var b=a.prototype;b.$7=function(a){return this.$1[this.$2[a]]};b.$8=function(a){var b=this.$3;while(b<this.$2.length){var c=this.$7(b);if(c.begin<=a)this.$4.push(c),b++;else break}this.$3=b};b.$9=function(a){this.$4=this.$4.filter(function(b){return b.end>a})};b.invalidateCache=function(){this.$5=0,this.$4=[],this.$3=0};b.setStyle=function(a){this.$6=a};b.getSubtitles=function(a){a<this.$5&&this.invalidateCache();this.$5=a;this.$8(a);this.$9(a);return this.$4.reduce(function(a,b){return a.concat(b.text)},[])};b.renderVTT=function(){return q(this.$1,this.$6)};return a}();f["default"]=a}),66);
__d("MVideoSubtitles",["fbt","DOM","EventListener","SubRipText","XHRRequest","emptyFunction","getCrossOriginTransport"],(function(a,b,c,d,e,f,g,h){var i=a.URL||a.webkitURL;b=function(){function a(a){this.$1=a,this.$2=c("emptyFunction")}var b=a.prototype;b.$3=function(a){a=new(c("SubRipText"))(a);if("Blob"in self){a=new Blob([a.renderVTT()],{type:"text/vtt"});return i.createObjectURL(a)}return null};b.loadSubtitles=function(a){var b=this;if(!i)return;new(c("XHRRequest"))(a).setTransportBuilder(c("getCrossOriginTransport")).setMethod("GET").setResponseHandler(function(a){b.$4(b.$3(a))}).send()};b.$4=function(a){var b=this;if(a==null)return;a=d("DOM").create("track",{label:h._("On"),kind:"captions",src:a});c("EventListener").listen(a,"load",function(){b.$2()});d("DOM").appendContent(this.$1,a);this.hideSubtitles()};b.showSubtitles=function(){Array.prototype.forEach.call(this.$1.textTracks,function(a){return a.mode="showing"})};b.hideSubtitles=function(){Array.prototype.forEach.call(this.$1.textTracks,function(a){return a.mode="hidden"})};b.setOnSubtitlesReady=function(a){this.$2=a};return a}();g["default"]=b}),98);
__d("MVideoViewability",["MFullScreen","Visibility","getElementPosition","getViewportDimensions"],(function(a,b,c,d,e,f,g){function a(a){return!!a&&a.videoViewabilityLoggingEnabled&&a.videoViewabilityLoggingPollingRate>0}function b(a){if(d("MFullScreen").isFullScreen())return 100;if(c("Visibility").isHidden())return-2;a=h(c("getElementPosition")(a));if(a===0)return-2;else if(a<25)return 0;else if(a<50)return 25;else if(a<75)return 50;else if(a<100)return 75;else return 100}function h(a){var b=c("getViewportDimensions")().width,d=c("getViewportDimensions")().height;if(a.width===0||a.height===0)return 0;var e=a.x,f=a.x+a.width,g=a.y,h=a.y+a.height;if(f<=0||e>=b||h<=0||g>=d)return 0;f=Math.min(f,b)-Math.max(e,0);b=Math.min(h,d)-Math.max(g,0);return f*b*100/(a.width*a.height)}g.shouldLog=a;g.calculateViewabilityPercentage=b;g.calculateViewabilityPercentageNumber=h}),98);
__d("moz-player/loggings/OzOperationLoggerBase",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.start=function(){var a=this.getClientTimeBegin();(a==null||a===0)&&(a=Date.now(),this.setClientTimeBegin(a));return this};b.log=function(){var a=this.getClientTimeBegin(),b=this.getClientTimeEnd();(a==null||a===0)&&(a=Date.now(),this.setClientTimeBegin(a));(b==null||b===0)&&(b=Date.now(),this.setClientTimeEnd(b));this.setClientTimeDuration(b-a)};b.setError=function(a){this.$2=a;return this};b.setResult=function(a){this.$3=a;return this};b.setType=function(a){this.$4=a;return this};b.setClientTimeBegin=function(a){this.$5=a;return this};b.setClientTimeDuration=function(a){this.$6=a;return this};b.setClientTimeEnd=function(a){this.$7=a;return this};b.setSegmentCount=function(a){this.$14=a;return this};b.setTimeToFirstByte=function(a){this.$8=a;return this};b.setTimeToLastByte=function(a){this.$9=a;return this};b.setTimeToRequestStart=function(a){this.$10=a;return this};b.setTimeToRequestSent=function(a){this.$11=a;return this};b.setReason=function(a){this.$12=a;return this};b.setResource=function(a){this.$13=a;return this};b.setSegmentStartTime=function(a){this.$15=a;return this};b.setSegmentEndTime=function(a){this.$16=a;return this};b.setLength=function(a){this.$17=a;return this};b.setLiveheadPosition=function(a){this.$18=a;return this};b.setLiveheadSeqNumHeader=function(a){this.$19=a;return this};b.setLiveheadSeqNumMpd=function(a){this.$20=a;return this};b.setManifestType=function(a){this.$21=a;return this};b.setPriorityFloat=function(a){this.$22=a;return this};b.setAppendedBufferMs=function(a){this.$23=a;return this};b.setInitiator=function(a){this.$24=a;return this};b.setPreloadTime=function(a){this.$25=a;return this};b.setConcluder=function(a){this.$26=a;return this};b.setPreviousRepresentationID=function(a){this.$27=a;return this};b.setRepresentationID=function(a){this.$28=a;return this};b.setStreamSwitchReason=function(a){this.$29=a;return this};b.setState=function(a){this.$30=a;return this};b.setContentLengthHeader=function(a){this.$31=a;return this};b.setOriginHitHeader=function(a){this.$33=a;return this};b.setEdgeHitHeader=function(a){this.$34=a;return this};b.setCode=function(a){this.$32=a;return this};b.setResponseTimeMsHeader=function(a){this.$35=a;return this};b.getError=function(){return this.$2};b.getResult=function(){return this.$3};b.getType=function(){return this.$4};b.getClientTimeBegin=function(){return this.$5};b.getClientTimeEnd=function(){return this.$6!=null?this.$5!=null?this.$5+this.$6:null:this.$7};b.getTimeToRequestStart=function(){return this.$10};b.getTimeToRequestSent=function(){return this.$11};b.getReason=function(){return this.$12};b.getResource=function(){return this.$13};b.getOperationName=function(){return this.$1};b.getSegmentStartTime=function(){return this.$15};b.getSegmentEndTime=function(){return this.$16};b.getLength=function(){return this.$17};b.getLiveheadPosition=function(){return this.$18};b.getManifestType=function(){return this.$21};b.getPriorityFloat=function(){return this.$22};b.getAppendedBufferMs=function(){return this.$23};b.getInitiator=function(){return this.$24};b.getPreloadTime=function(){return this.$25};b.getConcluder=function(){return this.$26};b.getContentLengthHeader=function(){return this.$31};b.getOriginHitHeader=function(){return this.$33};b.getEdgeHitHeader=function(){return this.$34};b.getCode=function(){return this.$32};b.getResponseTimeMsHeader=function(){return this.$35};return a}();f["default"]=a}),66);
__d("moz-player/loggings/OzPerfLoggerProviderBase",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){}var b=a.prototype;b.cloneContext=function(){var a=this.createLoggerProvider();this.$8(a);return a};b.setType=function(a){this.$1=a;return this};b.setInitiator=function(a){this.$2=a;return this};b.setResource=function(a){this.$4=a;return this};b.setRepresentationID=function(a){this.$3=a;return this};b.setSegmentStartTime=function(a){this.$5=a;return this};b.setSegmentEndTime=function(a){this.$6=a;return this};b.setStreamSwitchReason=function(a){this.$7=a;return this};b.getType=function(){return this.$1};b.getInitiator=function(){return this.$2};b.getRepresentationID=function(){return this.$3};b.getStreamSwitchReason=function(){return this.$7};b.getResource=function(){return this.$4};b.getSegmentStartTime=function(){return this.$5};b.getSegmentEndTime=function(){return this.$6};b.getOperationLogger=function(a){a=this.createOperationLogger(a);return this.setOperationContext(a)};b.setOperationContext=function(a){this.$8(a);return a};b.createOperationLogger=function(a){throw new Error("Not implemented: createOperationLogger")};b.createLoggerProvider=function(){throw new Error("Not implemented: createLoggerProvider")};b.$8=function(a){this.getType()&&a.setType(this.getType()),this.getInitiator()&&a.setInitiator(this.getInitiator()),this.getResource()&&a.setResource(this.getResource()),this.getRepresentationID()&&a.setRepresentationID(this.getRepresentationID()),this.getStreamSwitchReason()&&a.setStreamSwitchReason(this.getStreamSwitchReason()),typeof this.getSegmentStartTime()==="number"&&a.setSegmentStartTime(this.getSegmentStartTime()),typeof this.getSegmentEndTime()==="number"&&a.setSegmentEndTime(this.getSegmentEndTime())};return a}();f["default"]=a}),66);
__d("moz-player/shims/OzEventEmitter",["EventEmitter"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("EventEmitter")}),98);
__d("moz-player/loggings/OzPreInitLogger",["moz-player/loggings/OzOperationLoggerBase","moz-player/loggings/OzPerfLoggerProviderBase","moz-player/shims/OzEventEmitter"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.$OzPreInitOperationLogger1=c;return a}var c=a.prototype;c.log=function(){b.prototype.log.call(this),this.$OzPreInitOperationLogger1(this)};return a}(c("moz-player/loggings/OzOperationLoggerBase"));a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=d=a.call.apply(a,[this].concat(f))||this,d.$OzPreInitLoggerProvider1=!1,d.$OzPreInitLoggerProvider2=[],d.$OzPreInitLoggerProvider3=new(c("moz-player/shims/OzEventEmitter"))(),b)||babelHelpers.assertThisInitialized(d)}var d=b.prototype;d.deactivate=function(){this.$OzPreInitLoggerProvider1=!1};d.activate=function(){var a=this;this.$OzPreInitLoggerProvider1=!0;this.$OzPreInitLoggerProvider2.forEach(function(b){a.$OzPreInitLoggerProvider3.emit("operation_logged",b)});this.$OzPreInitLoggerProvider2=[]};d.setOperationLoggedListener=function(a){return this.$OzPreInitLoggerProvider3.addListener("operation_logged",function(b){a(b)})};d.createOperationLogger=function(a){var b=this;a=new h(a,function(a){b.$OzPreInitLoggerProvider1?b.$OzPreInitLoggerProvider3.emit("operation_logged",a):b.$OzPreInitLoggerProvider2.push(a)});return a};d.createLoggerProvider=function(){return new b()};return b}(c("moz-player/loggings/OzPerfLoggerProviderBase"));g.OzPreInitLoggerProvider=a}),98);
__d("MVideoPlayerApiBase",["invariant","Bootloader","CSS","DOM","DataAttributeUtils","EventEmitter","EventListener","HVideoPlayerLoggerMixin","MFullScreen","MInlineVideoDebugger","MParent","MVideoCache","MVideoExperiments","MVideoNetworkUtils","MVideoSubtitles","MVideoUtils","MVideoViewability","ODS","Promise","Stratcom","StratcomManager","SubscriptionsHandler","URI","VideoPlayerStateBasedLoggingEvents","VideoViewabilityKeyEvents","clearInterval","gkx","isCdnURI","mixin","moz-player/loggings/OzPreInitLogger","setInterval","setTimeoutAcrossTransitions","throttle"],(function(a,b,c,d,e,f,g,h){var i={CONSTRUCTED:"constructed",INIT_DONE:"init_done",CREATED:"created",FIRST_PLAYING:"first_playing",PLAYING:"playing",CANCELLED_REQUEST_PLAYING:"cancelled_request_playing",PAUSE_WITHOUT_PLAY:"pause_without_play",PAUSED:"paused",ENDED:"ended",FIRST_REQUESTED_PLAYING:"first_requested_playing",REQUESTED_PLAYING:"requested_playing",FIRST_VIDEO_PLAY:"first_video_play",VIDEO_PLAY:"video_play",RESCHEDULE_VIDEO_PLAY:"reschedule_video_play",REQUESTED_PAUSE_BEFORE_STARTED_PLAYING:"requested_pause_before_started_playing",REQUESTED_PAUSE:"requested_pause",DESTROYED_REQUESTED_PLAYING:"destroyed_requested_playing",DESTROY:"destroy"},j=["canplay","play","seeked","seeking"],k=100,l=1e3/15,m=3e4;a=function(a){babelHelpers.inheritsLoose(e,a);function e(b){var e;e=a.call(this)||this;e.eventEmitter=new(c("EventEmitter"))();e.$MVideoPlayerApiBase13=!1;e.$MVideoPlayerApiBase28=!1;e.$MVideoPlayerApiBase29=0;e.$MVideoPlayerApiBase30=!1;e.$MVideoPlayerApiBase31=0;e.$MVideoPlayerApiBase32=0;e.$MVideoPlayerApiBase54=function(){var a=e.getVideoElement();c("Stratcom").invoke("m:video:player:fullscreenchange",null,{videoElement:e.$MVideoPlayerApiBase1,player:a});var b=c("MFullScreen").isFullScreen();c("MVideoExperiments").do_not_stretch_fullscreen&&c("CSS").conditionClass(a,c("MVideoUtils").FULL_WIDTH_PLAYER_CLASS,!b);e.handleFullScreenBehaviour(b,a);e.logEvent(b?"entered_fs":"exited_fs")};e.$MVideoPlayerApiBase55=function(){e.getVideoElement().readyState>=2&&e.$MVideoPlayerApiBase13&&e.$MVideoPlayerApiBase56()};e.$MVideoPlayerApiBase42=function(){c("Stratcom").invoke("m:video:player:play",null,{videoElement:e.$MVideoPlayerApiBase1,player:e.getVideoElement(),videoID:e.getVideoID()}),e.toggleClassOnMVideoElement(c("MVideoUtils").SHOW_PAUSE_CLASS,!1),e.$MVideoPlayerApiBase57()};e.$MVideoPlayerApiBase43=function(){e.$MVideoPlayerApiBase41(i.FIRST_PLAYING),e.$MVideoPlayerApiBase35(i.PLAYING),e.$MVideoPlayerApiBase9=!1,c("Stratcom").invoke("m:video:player:playing",null,{videoElement:e.$MVideoPlayerApiBase1,player:e.getVideoElement()}),e.hideLoadingSpinner(),e.$MVideoPlayerApiBase58(),e.$MVideoPlayerApiBase24&&e.$MVideoPlayerApiBase24.log(),e.$MVideoPlayerApiBase24=null,e.heartbeatEnabled()&&e.$MVideoPlayerApiBase59(),e.eventEmitter.emit("playing")};e.$MVideoPlayerApiBase44=function(a){e.$MVideoPlayerApiBase60(),e.$MVideoPlayerApiBase9=!1,e.$MVideoPlayerApiBase24&&(e.$MVideoPlayerApiBase24.setResult("aborted").log(),e.$MVideoPlayerApiBase24=null),c("Stratcom").invoke("m:video:player:pause",null,{videoElement:e.$MVideoPlayerApiBase1,player:e.getVideoElement(),destroyed:a}),c("MVideoExperiments").mtouch_prevent_consequent_calls||e.$MVideoPlayerApiBase61(!1),e.hideLoadingSpinner(),e.$MVideoPlayerApiBase62(),e.$MVideoPlayerApiBase63(),e.$MVideoPlayerApiBase64(),e.$MVideoPlayerApiBase25&&(e.$MVideoPlayerApiBase25.log(),e.$MVideoPlayerApiBase25=null),e.eventEmitter.emit("paused")};e.$MVideoPlayerApiBase45=function(){if(e.$MVideoPlayerApiBase3.loop&&e.$MVideoPlayerApiBase3.numOfLoops&&!e.$MVideoPlayerApiBase3.playEndSec&&!e.$MVideoPlayerApiBase3.playStartSec&&c("gkx")("1086729")){e.$MVideoPlayerApiBase29++;if(e.$MVideoPlayerApiBase29<e.$MVideoPlayerApiBase3.numOfLoops){e.play("loop_initiated");return}}e.$MVideoPlayerApiBase35(i.ENDED);c("Stratcom").invoke("m:video:player:ended",null,{videoElement:e.$MVideoPlayerApiBase1,player:e.getVideoElement(),videoID:e.getVideoID()});e.$MVideoPlayerApiBase9=!1;e.$MVideoPlayerApiBase62();e.$MVideoPlayerApiBase3.playOnClick&&e.$MVideoPlayerApiBase3.playInFullScreen&&c("MFullScreen").isSupported()&&c("MFullScreen").disableFullScreen();e.eventEmitter.emit("finished")};e.$MVideoPlayerApiBase46=function(){e.showLoadingSpinner()};e.$MVideoPlayerApiBase50=function(){e.$MVideoPlayerApiBase9=!0};e.$MVideoPlayerApiBase51=function(){e.$MVideoPlayerApiBase9=!1,e.$MVideoPlayerApiBase7&&(e.$MVideoPlayerApiBase8=!0,e.$MVideoPlayerApiBase62(),e.logPauseEvent({lastPauseReason:"seek_initiated"}))};e.$MVideoPlayerApiBase47=function(){var a=e.getVideoElement().volume;e.$MVideoPlayerApiBase14!==void 0&&(e.$MVideoPlayerApiBase14===0&&a!==0?e.eventEmitter.emit("unmuted"):e.$MVideoPlayerApiBase14!==0&&a===0&&e.eventEmitter.emit("muted"),e.eventEmitter.emit("changeVolume",{volume:a}));e.$MVideoPlayerApiBase14=a;if(e.$MVideoPlayerApiBase27){e.$MVideoPlayerApiBase27=!1;return}c("Stratcom").invoke("m:video:player:volumechange",null,{videoElement:e.$MVideoPlayerApiBase1,player:e.getVideoElement()})};e.$MVideoPlayerApiBase48=function(){e.hideLoadingSpinner()};e.$MVideoPlayerApiBase52=function(){!e.$MVideoPlayerApiBase6&&e.getLastActionReason()==="page_visibility_initiated"&&e.play("user_initiated")};e.$MVideoPlayerApiBase53=function(){e.$MVideoPlayerApiBase6&&e.pause("page_visibility_initiated")};e.$MVideoPlayerApiBase49=function(){e.$MVideoPlayerApiBase3.playStartSec&&e.$MVideoPlayerApiBase3.playStartSec>0&&(e.getVideoElement().currentTime=e.$MVideoPlayerApiBase3.playStartSec),e.eventEmitter.emit("updateMetadata")};e.$MVideoPlayerApiBase65=function(){var a=e.$MVideoPlayerApiBase16;e.$MVideoPlayerApiBase68();if(e.$MVideoPlayerApiBase16!==a){e.logEvent("viewability_changed",(a={},a.current_viewability_percentage=e.$MVideoPlayerApiBase16,a))}};e.$MVideoPlayerApiBase33=function(){e.$MVideoPlayerApiBase3.playEndSec&&e.getVideoElement().currentTime>e.$MVideoPlayerApiBase3.playEndSec&&!e.$MVideoPlayerApiBase3.loop&&e.pause()};e.$MVideoPlayerApiBase34=function(){if(e.$MVideoPlayerApiBase3.loop&&(e.$MVideoPlayerApiBase3.playStartSec||e.$MVideoPlayerApiBase3.playEndSec)&&(e.$MVideoPlayerApiBase3.playEndSec&&e.getVideoElement().currentTime>e.$MVideoPlayerApiBase3.playEndSec||e.$MVideoPlayerApiBase3.playStartSec&&e.getVideoElement().currentTime==0)){var a=e.$MVideoPlayerApiBase3.playStartSec||0;e.getVideoElement().currentTime=a}};e.hideLoadingSpinner=function(){e.toggleClassOnMVideoElement(c("MVideoUtils").LOADING_CLASS,!1)};e.showLoadingSpinner=function(){e.toggleClassOnMVideoElement(c("MVideoUtils").LOADING_CLASS,!0)};e.toggleVideoQuality=function(){};e.getVideoQuality=function(){return e.$MVideoPlayerApiBase3.defaultQuality};e.$MVideoPlayerApiBase72=function(){if(!e.$MVideoPlayerApiBase7||!e.getVideoElement()){e.$MVideoPlayerApiBase64();return}e.logHeartbeat()};e.$MVideoPlayerApiBase1=b;e.$MVideoPlayerApiBase3=c("MVideoUtils").getVideoDataFromMVideo(e.$MVideoPlayerApiBase1);e.$MVideoPlayerApiBase3[c("MVideoUtils").API_INSTANCE_KEY]=babelHelpers.assertThisInitialized(e);e.$MVideoPlayerApiBase23=new(d("moz-player/loggings/OzPreInitLogger").OzPreInitLoggerProvider)();e.$MVideoPlayerApiBase18=c("throttle").withBlocking(e.$MVideoPlayerApiBase33,l,babelHelpers.assertThisInitialized(e));e.$MVideoPlayerApiBase19=c("throttle").withBlocking(e.$MVideoPlayerApiBase34,l,babelHelpers.assertThisInitialized(e));return e}var f=e.prototype;f.setup=function(){};f.init=function(a){var b=this;this.reset();this.$MVideoPlayerApiBase28=!0;a&&(this.$MVideoPlayerApiBase2=a);this.$MVideoPlayerApiBase35(i.CONSTRUCTED);this.$MVideoPlayerApiBase3.videoInitSeqID==null?this.$MVideoPlayerApiBase3.videoInitSeqID=0:this.$MVideoPlayerApiBase3.videoInitSeqID=1+this.$MVideoPlayerApiBase3.videoInitSeqID;this.$MVideoPlayerApiBase4=new(c("SubscriptionsHandler"))();this.prepareDOMNode();j.forEach(function(a){c("StratcomManager").enableDispatch(b.getVideoElement(),a)});this.$MVideoPlayerApiBase36();this.$MVideoPlayerApiBase3&&(this.setAudioOnly&&this.setAudioOnly(!!this.$MVideoPlayerApiBase3.audioOnly));this.$MVideoPlayerApiBase37(a);this.$MVideoPlayerApiBase22=!0;this.$MVideoPlayerApiBase38();this.$MVideoPlayerApiBase3.videoDebuggerEnabled&&(this.$MVideoPlayerApiBase10=new(c("MInlineVideoDebugger"))(this.$MVideoPlayerApiBase1,this.$MVideoPlayerApiBase3),this.$MVideoPlayerApiBase10.updateLastActionReasonDebugger(this.getLastActionReason()));this.$MVideoPlayerApiBase15=d("MVideoViewability").shouldLog(this.$MVideoPlayerApiBase3);this.$MVideoPlayerApiBase3.loop&&this.$MVideoPlayerApiBase3.numOfLoops===null&&(this.getVideoElement().setAttribute("loop","true"),this.getVideoElement().loop=!0);c("Stratcom").invoke("m:video:player:init",null,{apiInstance:this});this.$MVideoPlayerApiBase35(i.INIT_DONE);this.postInit();this.$MVideoPlayerApiBase35(i.CREATED)};f.$MVideoPlayerApiBase36=function(){var a;this.initLogger();a=(a=this.getVideoData().disableLogging)!=null?a:!1;a&&this.getLogger().disable();a=d("MParent").bySigil(this.$MVideoPlayerApiBase1,"story-div");if(a){a=c("DataAttributeUtils").getDataFt(a);a={ft:JSON.parse(a)};this.getLogger().setFTData(a)}this.$MVideoPlayerApiBase31=0;this.$MVideoPlayerApiBase32=0};f.$MVideoPlayerApiBase39=function(){var a;this.$MVideoPlayerApiBase3.videoElement?this.$MVideoPlayerApiBase3.videoElement:(this.$MVideoPlayerApiBase35("create_new_video_node"),a=c("MVideoUtils").createVideoNode(),this.$MVideoPlayerApiBase3.videoElement=a)};f.$MVideoPlayerApiBase40=function(a){return this.$MVideoPlayerApiBase21.has(a)};f.$MVideoPlayerApiBase41=function(a){this.$MVideoPlayerApiBase35(a,!0)};f.$MVideoPlayerApiBase35=function(a,b){b===void 0&&(b=!1);if(!c("MVideoExperiments").mtouch_enable_playback_funnel_counters)return;var e=this.getPlayerVersion();if(b&&this.$MVideoPlayerApiBase40(a))return;this.$MVideoPlayerApiBase21.add(a);d("ODS").bumpEntityKey(2966,"mtouch_video."+e+"."+this.$MVideoPlayerApiBase2,a)};f.reset=function(){this.$MVideoPlayerApiBase28&&h(0,5251),this.$MVideoPlayerApiBase2="user_initiated",this.$MVideoPlayerApiBase5=!0,this.$MVideoPlayerApiBase6=!1,this.$MVideoPlayerApiBase7=!1,this.$MVideoPlayerApiBase8=!1,this.$MVideoPlayerApiBase9=!1,this.$MVideoPlayerApiBase10=null,this.$MVideoPlayerApiBase11="user_initiated",this.$MVideoPlayerApiBase12=void 0,this.$MVideoPlayerApiBase15=!1,this.$MVideoPlayerApiBase16=void 0,this.$MVideoPlayerApiBase17=void 0,this.$MVideoPlayerApiBase20=void 0,this.$MVideoPlayerApiBase21=new Set([]),this.$MVideoPlayerApiBase22=!1,this.$MVideoPlayerApiBase24=void 0,this.$MVideoPlayerApiBase25=void 0,this.$MVideoPlayerApiBase26=void 0,this.$MVideoPlayerApiBase27=!1,this.$MVideoPlayerApiBase29=0,this.$MVideoPlayerApiBase30=!1};f.postInit=function(){};f.prepareDOMNode=function(){this.$MVideoPlayerApiBase3.videoElement&&this.$MVideoPlayerApiBase35("consume_precreated_video_node");this.$MVideoPlayerApiBase39();var a=this.getVideoElement();a.controls=!(c("MVideoExperiments").enableSphericalVideo&&this.$MVideoPlayerApiBase3.spherical)&&!this.$MVideoPlayerApiBase3.disableVideoControls;c("DOM").prependContent(this.$MVideoPlayerApiBase1,a);a.setAttribute("playInFullScreen",this.$MVideoPlayerApiBase3.playInFullScreen);!this.$MVideoPlayerApiBase3.playInFullScreen&&this.$MVideoPlayerApiBase3.shouldPlayInline&&a.setAttribute("playsinline","true");this.$MVideoPlayerApiBase3.muted&&(a.muted=!0,this.shouldIgnoreInitialMuteOperation()&&(this.$MVideoPlayerApiBase27=!0))};f.$MVideoPlayerApiBase38=function(){var a=this;this.$MVideoPlayerApiBase4.addSubscriptions(c("Stratcom").listen("m:page:unload",null,function(){a.release(),c("Stratcom").removeCurrentListener()}));var b=this.getVideoElement();this.$MVideoPlayerApiBase4.addSubscriptions(c("EventListener").listen(b,"play",this.$MVideoPlayerApiBase42),c("EventListener").listen(b,"playing",this.$MVideoPlayerApiBase43),c("EventListener").listen(b,"pause",function(){return a.$MVideoPlayerApiBase44(!0)}),c("EventListener").listen(b,"ended",this.$MVideoPlayerApiBase45),c("EventListener").listen(b,"waiting",this.$MVideoPlayerApiBase46),c("EventListener").listen(b,"timeupdate",this.onTimeUpdateBase.bind(this)),c("EventListener").listen(b,"volumechange",this.$MVideoPlayerApiBase47),c("EventListener").listen(b,"canplay",this.$MVideoPlayerApiBase48),c("EventListener").listen(b,"loadedmetadata",this.$MVideoPlayerApiBase49),c("EventListener").listen(this.getVideoElement(),"contextmenu",function(a){a.preventDefault()}));c("MVideoExperiments").use_shared_seeking||this.$MVideoPlayerApiBase4.addSubscriptions(c("EventListener").listen(b,"seeked",this.$MVideoPlayerApiBase50),c("EventListener").listen(b,"seeking",this.$MVideoPlayerApiBase51));this.$MVideoPlayerApiBase4.addSubscriptions(c("EventListener").listen(window,"focus",this.$MVideoPlayerApiBase52),c("EventListener").listen(window,"blur",this.$MVideoPlayerApiBase53));c("MFullScreen").isSupported()&&this.$MVideoPlayerApiBase4.addSubscriptions(c("MFullScreen").listenForFullScreenEvent(window,this.$MVideoPlayerApiBase54));c("MVideoExperiments").listen_readystate_to_play&&this.$MVideoPlayerApiBase4.addSubscriptions(c("EventListener").listen(b,"loadeddata",this.$MVideoPlayerApiBase55))};f.$MVideoPlayerApiBase60=function(){this.$MVideoPlayerApiBase40(i.FIRST_REQUESTED_PLAYING)?this.$MVideoPlayerApiBase40(i.FIRST_PLAYING)||this.$MVideoPlayerApiBase41(i.CANCELLED_REQUEST_PLAYING):this.$MVideoPlayerApiBase35(i.PAUSE_WITHOUT_PLAY),this.$MVideoPlayerApiBase35(i.PAUSED)};f.$MVideoPlayerApiBase57=function(){this.$MVideoPlayerApiBase15&&(this.$MVideoPlayerApiBase17=c("setInterval")(this.$MVideoPlayerApiBase65,this.$MVideoPlayerApiBase3.videoViewabilityLoggingPollingRate))};f.$MVideoPlayerApiBase63=function(){c("clearInterval")(this.$MVideoPlayerApiBase17)};f.onTimeUpdateBase=function(a){this.$MVideoPlayerApiBase8&&this.$MVideoPlayerApiBase9&&(this.$MVideoPlayerApiBase9=!1,this.$MVideoPlayerApiBase66()),this.$MVideoPlayerApiBase18(),this.$MVideoPlayerApiBase19(),this.eventEmitter.emit("updateStatus",{position:this.getCurrentTimePosition()})};f.$MVideoPlayerApiBase66=function(){this.logEvent("requested_playing",{debug_reason:"seek_initiated"}),this.onPlaying(),this.$MVideoPlayerApiBase58(),this.$MVideoPlayerApiBase8=!1};f.$MVideoPlayerApiBase58=function(){this.$MVideoPlayerApiBase7=!0};f.$MVideoPlayerApiBase62=function(){this.$MVideoPlayerApiBase7=!1};f.$MVideoPlayerApiBase67=function(){this.$MVideoPlayerApiBase10&&this.$MVideoPlayerApiBase10.updateViewabilityLoggingDebugger(this.$MVideoPlayerApiBase16)};f.$MVideoPlayerApiBase68=function(){var a=d("MVideoViewability").calculateViewabilityPercentage(this.$MVideoPlayerApiBase1);this.$MVideoPlayerApiBase16!==a&&(this.$MVideoPlayerApiBase16=a,this.$MVideoPlayerApiBase67())};f.isVisible=function(){return this.$MVideoPlayerApiBase5};f.show=function(a){a===void 0&&(a=!0),this.$MVideoPlayerApiBase5=!0,c("CSS").conditionClass(this.$MVideoPlayerApiBase1,c("MVideoUtils").SHOWN_CLASS,!0),this.$MVideoPlayerApiBase69(),a&&this.$MVideoPlayerApiBase70()};f.hide=function(){this.$MVideoPlayerApiBase5=!1,c("CSS").conditionClass(this.$MVideoPlayerApiBase1,c("MVideoUtils").SHOWN_CLASS,!1)};f.$MVideoPlayerApiBase37=function(a){this.$MVideoPlayerApiBase41(i.FIRST_REQUESTED_PLAYING),this.$MVideoPlayerApiBase35(i.REQUESTED_PLAYING),this.logEvent("requested_playing",null),this.$MVideoPlayerApiBase24||(this.$MVideoPlayerApiBase24=this.$MVideoPlayerApiBase23.getOperationLogger("requested_playing").start().setInitiator(a))};f.shouldDisablePlayDelay=function(){return!1};f.shouldIgnoreInitialMuteOperation=function(){return!1};f.play=function(a){var b=this;if(c("MVideoExperiments").mtouch_prevent_consequent_calls&&this.$MVideoPlayerApiBase6)return;this.$MVideoPlayerApiBase3&&(this.setAudioOnly&&this.setAudioOnly(!!this.$MVideoPlayerApiBase3.audioOnly));a&&this.setLastActionReason(a);this.$MVideoPlayerApiBase22?this.$MVideoPlayerApiBase22=!1:this.$MVideoPlayerApiBase37(a);this.$MVideoPlayerApiBase61(!0);c("MVideoExperiments").set_pending_play_request&&this.__setPendingPlayRequest(!0);if(c("MVideoExperiments").isKaiOS||this.shouldDisablePlayDelay())this.$MVideoPlayerApiBase56();else{if(c("MVideoExperiments").wait_timeout_to_play){if(this.$MVideoPlayerApiBase12)return;this.$MVideoPlayerApiBase12=c("setTimeoutAcrossTransitions")(function(){b.$MVideoPlayerApiBase56()},k)}c("MVideoExperiments").listen_readystate_to_play&&(this.$MVideoPlayerApiBase13=!0,this.$MVideoPlayerApiBase55())}};f.$MVideoPlayerApiBase56=function(){this.$MVideoPlayerApiBase13=!1,this.$MVideoPlayerApiBase12&&window.clearTimeout(this.$MVideoPlayerApiBase12),this.$MVideoPlayerApiBase12=null,this.$MVideoPlayerApiBase41(i.FIRST_VIDEO_PLAY),this.$MVideoPlayerApiBase35(i.VIDEO_PLAY),this.attemptVideoElementPlay()};f.attemptVideoElementPlay=function(){var a=this,b=this.getVideoElement().play();b&&b["catch"](function(b){b&&b.name==="NotAllowedError"&&a.logEvent("cancelled_requested_playing",{reason:"not_allowed"})})};f.pause=function(a){if(c("MVideoExperiments").mtouch_prevent_consequent_calls&&!this.$MVideoPlayerApiBase6)return;this.$MVideoPlayerApiBase25=this.$MVideoPlayerApiBase23.getOperationLogger("pause").start().setInitiator(a);this.$MVideoPlayerApiBase40(i.FIRST_REQUESTED_PLAYING)&&!this.$MVideoPlayerApiBase40(i.FIRST_PLAYING)&&this.$MVideoPlayerApiBase41(i.REQUESTED_PAUSE_BEFORE_STARTED_PLAYING);this.$MVideoPlayerApiBase35(i.REQUESTED_PAUSE);a&&this.setLastActionReason(a);this.$MVideoPlayerApiBase61(!1);this.getVideoElement().pause();this.$MVideoPlayerApiBase12&&(window.clearTimeout(this.$MVideoPlayerApiBase12),this.$MVideoPlayerApiBase12=null);this.toggleClassOnMVideoElement(c("MVideoUtils").SHOW_PAUSE_CLASS,!0)};f.unload=function(){this.$MVideoPlayerApiBase40(i.FIRST_REQUESTED_PLAYING)&&!this.$MVideoPlayerApiBase40(i.FIRST_PLAYING)&&this.$MVideoPlayerApiBase35(i.DESTROYED_REQUESTED_PLAYING);this.$MVideoPlayerApiBase44(!0);this.logPauseEvent();this.$MVideoPlayerApiBase71();this.pause("unloaded");c("Stratcom").invoke("m:video:player:destroy",null,{videoElement:this.$MVideoPlayerApiBase1,player:this.getVideoElement()});var a=this.getVideoElement();this.$MVideoPlayerApiBase3.videoElement=null;this.$MVideoPlayerApiBase10&&(this.$MVideoPlayerApiBase10.cleanUp(),this.$MVideoPlayerApiBase10=null);this.$MVideoPlayerApiBase20&&(this.$MVideoPlayerApiBase20.unload(),this.$MVideoPlayerApiBase20=null);this.release();this.hide();a&&(a.setAttribute("src",""),a.load&&a.load());a=null;this.$MVideoPlayerApiBase35(i.DESTROY);this.$MVideoPlayerApiBase23.deactivate();this.$MVideoPlayerApiBase28=!1};f.destroy=function(){this.unload(),delete this.$MVideoPlayerApiBase3[c("MVideoUtils").API_INSTANCE_KEY]};f.$MVideoPlayerApiBase71=function(){c("DOM").remove(this.getVideoElement());while(this.getVideoElement().hasChildNodes())this.getVideoElement().removeChild(this.getVideoElement().lastChild);this.getVideoElement().removeAttribute("src")};f.release=function(){this.$MVideoPlayerApiBase4.release(),c("clearInterval")(this.$MVideoPlayerApiBase17)};f.getVolume=function(){return this.getVideoElement().volume};f.setVolume=function(a){this.getVideoElement().volume=a};f.mute=function(){this.getVideoElement().muted=!0};f.unmute=function(){this.getVideoElement().muted=!1};f.seek=function(a){this.getVideoElement().currentTime=a};f.getPlaybackDuration=function(){return this.getVideoElement().duration||0};f.getCurrentTimePosition=function(){return this.getVideoElement().currentTime||0};f.getPreInitLoggerProvider=function(){return this.$MVideoPlayerApiBase23};f.$MVideoPlayerApiBase69=function(){this.$MVideoPlayerApiBase3.width&&this.getVideoElement().setAttribute("width",this.$MVideoPlayerApiBase3.width),this.$MVideoPlayerApiBase3.height&&this.getVideoElement().setAttribute("height",this.$MVideoPlayerApiBase3.height)};f.getDimensions=function(){var a=this.getVideoElement();return{width:Number(this.$MVideoPlayerApiBase3.width||a.width),height:Number(this.$MVideoPlayerApiBase3.height||a.height)}};f.$MVideoPlayerApiBase70=function(){if(!c("isCdnURI")(new(c("URI"))(this.$MVideoPlayerApiBase3.subtitlesSrc)))return;var a=new(c("MVideoSubtitles"))(this.getVideoElement());a.setOnSubtitlesReady(function(){return a.showSubtitles()});a.loadSubtitles(this.$MVideoPlayerApiBase3.subtitlesSrc)};f.toggleClassOnMVideoElement=function(a,b){c("CSS").conditionClass(this.$MVideoPlayerApiBase1,a,b)};f.hasActivePlayer=function(){return this.$MVideoPlayerApiBase5&&this.getVideoElement().parentNode===this.$MVideoPlayerApiBase1};f.getVideoData=function(){return this.$MVideoPlayerApiBase3};f.getMVideoElement=function(){return this.$MVideoPlayerApiBase1};f.$MVideoPlayerApiBase61=function(a){this.$MVideoPlayerApiBase6=a,this.$MVideoPlayerApiBase10&&this.$MVideoPlayerApiBase10.updatePlayerStateDebugger(this.$MVideoPlayerApiBase6?c("MVideoUtils").PLAYER_STATE.playing:c("MVideoUtils").PLAYER_STATE.paused)};f.isPlayingState=function(){return this.isPlayScheduled()||this.isCurrentlyPlaying()};f.isPlayScheduled=function(){return this.$MVideoPlayerApiBase6};f.isCurrentlyPlaying=function(){return this.$MVideoPlayerApiBase7};f.setPlayerState=function(a){this.$MVideoPlayerApiBase61(a===c("MVideoUtils").PLAYER_STATE.playing)};f.setLastActionReason=function(a){this.$MVideoPlayerApiBase11=a,this.$MVideoPlayerApiBase10&&this.$MVideoPlayerApiBase10.updateLastActionReasonDebugger(a)};f.getLastActionReason=function(){return this.$MVideoPlayerApiBase11};f.getPlayerFormat=function(){return this.$MVideoPlayerApiBase3.playerFormat};f.getPlayerOrigin=function(){return this.$MVideoPlayerApiBase3.playerOrigin};f.getPlayerSuborigin=function(){return this.$MVideoPlayerApiBase3.playerSuborigin};f.getSubscriptions=function(){return this.$MVideoPlayerApiBase4};f.getVideoElement=function(){this.$MVideoPlayerApiBase3.videoElement||this.$MVideoPlayerApiBase39();return this.$MVideoPlayerApiBase3.videoElement};f.getVideoID=function(){return this.$MVideoPlayerApiBase3.videoID};f.getSavedOffline=function(){return c("MVideoCache").isVideoDownloaded(this.$MVideoPlayerApiBase3.videoID)};f.getConnectivityType=function(){return c("MVideoNetworkUtils").getConnectivityType()};f.getLastPlayReason=function(){return this.getLastActionReason()};f.getVideoPlayReason=function(){return this.$MVideoPlayerApiBase2};f.getResourceUrl=function(){return c("MVideoExperiments").shouldLogResourceUrl?this.$MVideoPlayerApiBase3.src:null};f.getIsAdsPreview=function(){return!!this.$MVideoPlayerApiBase3.isAdsPreview};f.getAdditionalLogData=function(a){var b;b=(b={},b.video_quality=this.getVideoQuality(),b.streaming_format=this.getStreamingFormat(),b.player_version=this.getPlayerVersion(),b.video_init_seq_id=this.getVideoData().videoInitSeqID,b.external_log_id=this.$MVideoPlayerApiBase3.external_log_id,b.external_log_type=this.$MVideoPlayerApiBase3.external_log_type,b.event_seq_num=++this.$MVideoPlayerApiBase31,b.seq_num=c("VideoPlayerStateBasedLoggingEvents").StateBasedLoggingEventNames.indexOf(a)>=0?++this.$MVideoPlayerApiBase32:null,b);this.$MVideoPlayerApiBase3.iframeEmbedReferrer&&(b.iframe_embed_referrer=this.$MVideoPlayerApiBase3.iframeEmbedReferrer);this.$MVideoPlayerApiBase3.permalinkShareID&&(b.permalink_share_id=this.$MVideoPlayerApiBase3.permalinkShareID);this.$MVideoPlayerApiBase3.feedPosition!=null&&(b.feed_position=this.$MVideoPlayerApiBase3.feedPosition);this.$MVideoPlayerApiBase3.chainDepth!=null&&(b.video_chaining_depth_level=this.$MVideoPlayerApiBase3.chainDepth);var e=this.$MVideoPlayerApiBase2;e&&a!=="displayed"&&(b.video_play_reason=e);c("VideoViewabilityKeyEvents").Events.includes(a)&&d("MVideoViewability").shouldLog(this.$MVideoPlayerApiBase3)&&(this.$MVideoPlayerApiBase68(),b.current_viewability_percentage=this.$MVideoPlayerApiBase16);a==="video_playback_fallback"&&delete b.representation_id;return b};f.getPlayerVersion=function(){return"html5"};f.getStreamingFormat=function(){return"progressive"};f.getEmbeddedVideoControlsConfig=function(){return null};f.getEmbeddedVideoControls=function(){return this.$MVideoPlayerApiBase20};f.getIsInMWERedesign=function(){return this.getPlayerOrigin()==="external"&&c("MVideoExperiments").mwe_overlay_redesign_enabled};f.setupControls=function(){var a=this,d=this.getEmbeddedVideoControlsConfig();return!d?b("Promise").resolve():new(b("Promise"))(function(b){var e={toggleQuality:a.toggleVideoQuality,getCurrentVideoQuality:a.getVideoQuality};a.$MVideoPlayerApiBase4.addSubscriptions(c("Bootloader").loadModules(["MEmbeddedVideoControls"],function(c){a.$MVideoPlayerApiBase20=new c(a,a.getVideoElement(),a.getMVideoElement(),e,d),b()},"MVideoPlayerApiBase"))})};f.$MVideoPlayerApiBase59=function(){if(this.$MVideoPlayerApiBase26)return;this.$MVideoPlayerApiBase26=c("setInterval")(this.$MVideoPlayerApiBase72,m)};f.$MVideoPlayerApiBase64=function(){c("clearInterval")(this.$MVideoPlayerApiBase26),this.$MVideoPlayerApiBase26=null};f.heartbeatEnabled=function(){return!1};f.isInitialized=function(){return this.$MVideoPlayerApiBase28};f.handleFullScreenBehaviour=function(a,b){if(this.$MVideoPlayerApiBase2!="autoplay_initiated"||!a||!b.muted||this.$MVideoPlayerApiBase30)return;this.logEvent("muted");this.$MVideoPlayerApiBase30=!0};f.shouldAllowAudioOnlyToggle=function(){var a=this.getVideoData();if(!a)return!1;if(!a.playbackIsLiveStreaming)return!1;return this.getPlayerOrigin()==="external"?!1:!!a.audioOnlyEnabled};return e}(c("mixin")(c("HVideoPlayerLoggerMixin")));g["default"]=a}),98);
__d("VideoPlayerDashPerformanceLoggerEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1962341");c=b("FalcoLoggerInternal").create("video_player_dash_performance_logger_event",a);e.exports=c}),null);
__d("VideoPlayerDashPerformanceLoggerPayloadBuilder",[],(function(a,b,c,d,e,f){"use strict";var g={access_token:void 0,additional_buffered_ranges:void 0,append_target:void 0,appended_buffer_ms:void 0,bandwidth_estimate:void 0,client_time_begin:void 0,client_time_duration:void 0,client_time_end:void 0,code:void 0,concluder:void 0,connection_quality_level:void 0,content_length_header:void 0,device_pixel_ratio_float:void 0,dropped_frames:void 0,dynamic_bitrate:void 0,edge_hit_header:void 0,ended:void 0,error:void 0,event:void 0,expected_length:void 0,fbls_to_ply_dis_ms:void 0,initiator:void 0,is_drm:void 0,is_live:void 0,is_muted:void 0,is_online:void 0,is_p2p_playback:void 0,is_page_visible:void 0,is_ring_buffer_sample:void 0,is_servable_via_fbms:void 0,is_templated_manifest:void 0,is_latency_catchup_enabled:void 0,last_buffered_end:void 0,last_buffered_start:void 0,last_buffering_event_end_time:void 0,last_buffering_event_start_time:void 0,last_playing_event_time:void 0,length:void 0,livehead_delta:void 0,livehead_seq_num_header:void 0,livehead_seq_num_mpd:void 0,logical_cpu_count:void 0,lowest_quality_representation_id:void 0,manifest_type:void 0,mediastream_event_count:void 0,one_observed:void 0,one_req_wave:void 0,one_res_wave:void 0,origin_hit_header:void 0,parent_id:void 0,playback_fbms_param:void 0,playback_rate:void 0,player_height:void 0,player_instance_count:void 0,player_origin_caller_specified:void 0,player_suborigin:void 0,player_version:void 0,player_width:void 0,player_format:void 0,playhead:void 0,preload_time:void 0,previous_representation_id:void 0,priority_float:void 0,proxy_status_header:void 0,reason:void 0,representation_id:void 0,reschedule_count:void 0,resource:void 0,response_time_ms_header:void 0,result:void 0,script_path:void 0,segment_count:void 0,segment_end_time:void 0,segment_start_time:void 0,segment_time_gap:void 0,sequential_id:void 0,session:void 0,state:void 0,stream_switch_reason:void 0,time_between_bytes_max:void 0,time_since_main_thread_available:void 0,time_to_first_byte:void 0,time_to_last_byte:void 0,time_to_request_sent:void 0,time_to_request_start:void 0,total_frames:void 0,type:void 0,update_period:void 0,user_info:void 0,video_duration:void 0,video_id:void 0,video_playback_experience_issue:void 0,was_delayed:void 0,fna_hit_header:void 0,last_video_buffered_end:void 0,last_video_buffered_start:void 0,last_audio_buffered_end:void 0,last_audio_buffered_start:void 0,per_session_sampling_rate:void 0};function h(a){var b=a;typeof b==="string"&&(b=Number(a));return b!=null&&isFinite(b)?String(Math.floor(b)):null}a=function(){function a(){this.$1=babelHelpers["extends"]({},g)}var b=a.prototype;b.clear=function(){this.$1=babelHelpers["extends"]({},g);return this};b.getData=function(){return babelHelpers["extends"]({},this.$1)};b.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};b.setPerSessionSampleRate=function(a){this.$1.per_session_sampling_rate=h(a);return this};b.setAccessToken=function(a){this.$1.access_token=a;return this};b.setAdditionalBufferedRanges=function(a){this.$1.additional_buffered_ranges=a;return this};b.setAppendTarget=function(a){this.$1.append_target=h(a);return this};b.setAppendedBufferMs=function(a){this.$1.appended_buffer_ms=h(a);return this};b.setBandwidthEstimate=function(a){this.$1.bandwidth_estimate=h(a);return this};b.setClientTimeBegin=function(a){this.$1.client_time_begin=h(a);return this};b.setClientTimeDuration=function(a){this.$1.client_time_duration=h(a);return this};b.setClientTimeEnd=function(a){this.$1.client_time_end=h(a);return this};b.setCode=function(a){this.$1.code=h(a);return this};b.setConcluder=function(a){this.$1.concluder=a;return this};b.setConnectionQualityLevel=function(a){this.$1.connection_quality_level=a;return this};b.setContentLengthHeader=function(a){this.$1.content_length_header=h(a);return this};b.setDevicePixelRatioFloat=function(a){this.$1.device_pixel_ratio_float=a;return this};b.setDroppedFrames=function(a){this.$1.dropped_frames=h(a);return this};b.setDynamicBitrate=function(a){this.$1.dynamic_bitrate=h(a);return this};b.setFNAHitHeader=function(a){this.$1.fna_hit_header=a;return this};b.setEdgeHitHeader=function(a){this.$1.edge_hit_header=a;return this};b.setEnded=function(a){this.$1.ended=a;return this};b.setError=function(a){this.$1.error=a;return this};b.setEvent=function(a){this.$1.event=a;return this};b.setExpectedLength=function(a){this.$1.expected_length=h(a);return this};b.setFblsToPlyDisMs=function(a){this.$1.fbls_to_ply_dis_ms=h(a);return this};b.setPreferredEdgeLatency=function(a){this.$1.preferred_edge_latency=h(a);return this};b.setInitiator=function(a){this.$1.initiator=a;return this};b.setIsDrm=function(a){this.$1.is_drm=a;return this};b.setIsLive=function(a){this.$1.is_live=a;return this};b.setIsMuted=function(a){this.$1.is_muted=a;return this};b.setIsOnline=function(a){this.$1.is_online=a;return this};b.setIsP2pPlayback=function(a){this.$1.is_p2p_playback=a;return this};b.setIsPageVisible=function(a){this.$1.is_page_visible=a;return this};b.setIsRingBufferSample=function(a){this.$1.is_ring_buffer_sample=a;return this};b.setIsServableViaFbms=function(a){this.$1.is_servable_via_fbms=a;return this};b.setIsTemplatedManifest=function(a){this.$1.is_templated_manifest=a;return this};b.setIsLatencyCachupEnabled=function(a){this.$1.is_latency_catchup_enabled=a;return this};b.setPlayerFormat=function(a){this.$1.player_format=a;return this};b.setLastBufferedEnd=function(a){this.$1.last_buffered_end=h(a);return this};b.setLastBufferedStart=function(a){this.$1.last_buffered_start=h(a);return this};b.setLastBufferingEventEndTime=function(a){this.$1.last_buffering_event_end_time=h(a);return this};b.setLastBufferingEventStartTime=function(a){this.$1.last_buffering_event_start_time=h(a);return this};b.setLastPlayingEventTime=function(a){this.$1.last_playing_event_time=h(a);return this};b.setLength=function(a){this.$1.length=h(a);return this};b.setLiveheadDelta=function(a){this.$1.livehead_delta=h(a);return this};b.setLiveheadSeqNumHeader=function(a){this.$1.livehead_seq_num_header=h(a);return this};b.setLiveheadSeqNumMpd=function(a){this.$1.livehead_seq_num_mpd=h(a);return this};b.setLogicalCpuCount=function(a){this.$1.logical_cpu_count=h(a);return this};b.setLowestQualityRepresentationID=function(a){this.$1.lowest_quality_representation_id=a;return this};b.setManifestType=function(a){this.$1.manifest_type=a;return this};b.setMediastreamEventCount=function(a){this.$1.mediastream_event_count=h(a);return this};b.setOneObserved=function(a){this.$1.one_observed=a;return this};b.setOneReqWave=function(a){this.$1.one_req_wave=h(a);return this};b.setOneResWave=function(a){this.$1.one_res_wave=h(a);return this};b.setOriginHitHeader=function(a){this.$1.origin_hit_header=a;return this};b.setParentID=function(a){this.$1.parent_id=h(a);return this};b.setPlaybackFbmsParam=function(a){this.$1.playback_fbms_param=a;return this};b.setPlaybackRate=function(a){this.$1.playback_rate=a;return this};b.setPlayerHeight=function(a){this.$1.player_height=h(a);return this};b.setPlayerInstanceCount=function(a){this.$1.player_instance_count=h(a);return this};b.setPlayerOriginCallerSpecified=function(a){this.$1.player_origin_caller_specified=a;return this};b.setPlayerSuborigin=function(a){this.$1.player_suborigin=a;return this};b.setPlayerVersion=function(a){this.$1.player_version=a;return this};b.setPlayerWidth=function(a){this.$1.player_width=h(a);return this};b.setPlayhead=function(a){this.$1.playhead=h(a);return this};b.setPreloadTime=function(a){this.$1.preload_time=h(a);return this};b.setPreviousRepresentationID=function(a){this.$1.previous_representation_id=a;return this};b.setPriorityFloat=function(a){this.$1.priority_float=a;return this};b.setProxyStatusHeader=function(a){this.$1.proxy_status_header=a;return this};b.setPushed=function(a){return this};b.setReason=function(a){this.$1.reason=a;return this};b.setRepresentationID=function(a){this.$1.representation_id=a;return this};b.setRescheduleCount=function(a){this.$1.reschedule_count=h(a);return this};b.setResource=function(a){this.$1.resource=a;return this};b.setResponseTimeMsHeader=function(a){this.$1.response_time_ms_header=h(a);return this};b.setResult=function(a){this.$1.result=a;return this};b.setScriptPath=function(a){this.$1.script_path=a;return this};b.setSegmentCount=function(a){this.$1.segment_count=h(a);return this};b.setSegmentEndTime=function(a){this.$1.segment_end_time=h(a);return this};b.setSegmentStartTime=function(a){this.$1.segment_start_time=h(a);return this};b.setSegmentTimeGap=function(a){this.$1.segment_time_gap=h(a);return this};b.setSequentialID=function(a){this.$1.sequential_id=h(a);return this};b.setSession=function(a){this.$1.session=a;return this};b.setState=function(a){this.$1.state=a;return this};b.setStreamSwitchReason=function(a){this.$1.stream_switch_reason=a;return this};b.setTimeBetweenBytesMax=function(a){this.$1.time_between_bytes_max=h(a);return this};b.setTimeSinceMainThreadAvailable=function(a){this.$1.time_since_main_thread_available=h(a);return this};b.setTimeToFirstByte=function(a){this.$1.time_to_first_byte=h(a);return this};b.setTimeToLastByte=function(a){this.$1.time_to_last_byte=h(a);return this};b.setTimeToRequestSent=function(a){this.$1.time_to_request_sent=h(a);return this};b.setTimeToRequestStart=function(a){this.$1.time_to_request_start=h(a);return this};b.setTotalFrames=function(a){this.$1.total_frames=h(a);return this};b.setType=function(a){this.$1.type=a;return this};b.setUpdatePeriod=function(a){this.$1.update_period=h(a);return this};b.setUserInfo=function(a){this.$1.user_info=a;return this};b.setVideoDuration=function(a){this.$1.video_duration=h(a);return this};b.setVideoID=function(a){this.$1.video_id=a;return this};b.setVideoPlaybackExperienceIssue=function(a){this.$1.video_playback_experience_issue=a;return this};b.setWasDelayed=function(a){this.$1.was_delayed=a;return this};b.setDynamicStatusHeader=function(a){this.$1.dynamic_status_header=a;return this};b.setLastAudioBufferedEnd=function(a){this.$1.last_audio_buffered_end=h(a);return this};b.setLastAudioBufferedStart=function(a){this.$1.last_audio_buffered_start=h(a);return this};b.setLastVideoBufferedEnd=function(a){this.$1.last_video_buffered_end=h(a);return this};b.setLastVideoBufferedStart=function(a){this.$1.last_video_buffered_start=h(a);return this};return a}();f.convertToInt64=h;f.VideoPlayerDashPerformanceLoggerPayloadBuilder=a}),66);
__d("MVideoPlayerOzEventOperationLogger",["VideoPlayerDashPerformanceLoggerEventFalcoEvent","VideoPlayerDashPerformanceLoggerPayloadBuilder"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.setState=function(b){this.$MVideoPlayerOzEventOperationLogger1=b;return a.prototype.setState.call(this,b)};d.getState=function(){return this.$MVideoPlayerOzEventOperationLogger1};d.setSequentialID=function(b){this.$MVideoPlayerOzEventOperationLogger2=b;a.prototype.setSequentialID.call(this,b);return this};d.setParentLogger=function(a){this.setParentID(a.$MVideoPlayerOzEventOperationLogger2);return this};d.log=function(){this.$MVideoPlayerOzEventOperationLogger3()};d.$MVideoPlayerOzEventOperationLogger3=function(){var a=this;c("VideoPlayerDashPerformanceLoggerEventFalcoEvent").log(function(){return a.getData()})};return b}(d("VideoPlayerDashPerformanceLoggerPayloadBuilder").VideoPlayerDashPerformanceLoggerPayloadBuilder);g["default"]=a}),98);
__d("moz-player/utils/OzError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b.description)||this;c.$OzError1=b;c.name=b.type;return c}var c=b.prototype;c.getExtra=function(){return this.$OzError1.extra||{}};c.getType=function(){return this.$OzError1.type};c.getDescription=function(){return this.$OzError1.description};return b}(babelHelpers.wrapNativeSuper(Error));f["default"]=a}),66);
__d("MVideoPlayerOzPerfLoggerProvider",["MVideoPlayerOzEventOperationLogger","ScriptPath","VideoPlayerShakaPerformanceLoggerConfig","moz-player/loggings/OzPerfLoggerProviderBase","moz-player/utils/OzError"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);b.isEnabled=function(){return Boolean(c("VideoPlayerShakaPerformanceLoggerConfig").isSampled)};function b(b){var c;c=a.call(this)||this;c.$MVideoPlayerOzPerfLoggerProvider18=b;c.$MVideoPlayerOzPerfLoggerProvider2=b.videoID;c.$MVideoPlayerOzPerfLoggerProvider4=b.video;c.$MVideoPlayerOzPerfLoggerProvider1=b.uniqueID;c.$MVideoPlayerOzPerfLoggerProvider3=0;c.$MVideoPlayerOzPerfLoggerProvider9=b.isLive;c.$MVideoPlayerOzPerfLoggerProvider8=null;c.$MVideoPlayerOzPerfLoggerProvider10=b.accessToken;c.$MVideoPlayerOzPerfLoggerProvider11=b.playerOrigin;c.$MVideoPlayerOzPerfLoggerProvider12=b.playerSuborigin;c.$MVideoPlayerOzPerfLoggerProvider17=b.preloadTime;c.setRepresentationID(b.representationId);c.$MVideoPlayerOzPerfLoggerProvider19=b.getBandwidthEstimate;return c}var e=b.prototype;e.createLoggerProvider=function(){return new b(this.$MVideoPlayerOzPerfLoggerProvider18)};e.$MVideoPlayerOzPerfLoggerProvider20=function(a){a=a;var b=this.$MVideoPlayerOzPerfLoggerProvider4.buffered;if(b.length>0){var c=b.length-1;a=a.setLastBufferedStart(Math.round(b.start(c)*1e3)).setLastBufferedEnd(Math.round(b.end(c)*1e3))}c=[];for(var d=0;d<b.length-1;d++){var e=Math.round(this.$MVideoPlayerOzPerfLoggerProvider4.buffered.start(d)*1e3),f=Math.round(this.$MVideoPlayerOzPerfLoggerProvider4.buffered.end(d)*1e3);c.push([e,f])}c.length&&(a=a.setAdditionalBufferedRanges(JSON.stringify(c)));return a};e.setType=function(a){this.$MVideoPlayerOzPerfLoggerProvider16=a;return this};e.getLiveheadDelta=function(){return this.$MVideoPlayerOzPerfLoggerProvider8?Math.round((this.$MVideoPlayerOzPerfLoggerProvider8-this.$MVideoPlayerOzPerfLoggerProvider4.currentTime)*1e3):null};e.getVideoID=function(){return this.$MVideoPlayerOzPerfLoggerProvider2};e.getEventLogger=function(a){var b=this,e=Date.now(),f=new(c("MVideoPlayerOzEventOperationLogger"))(),g=this.$MVideoPlayerOzPerfLoggerProvider4.currentTime,h=this.$MVideoPlayerOzPerfLoggerProvider4.duration;this.$MVideoPlayerOzPerfLoggerProvider20(f).setEvent(a).setVideoID(this.$MVideoPlayerOzPerfLoggerProvider2).setLogicalCpuCount(navigator&&navigator.hardwareConcurrency).setPlayerOriginCallerSpecified(this.$MVideoPlayerOzPerfLoggerProvider11).setScriptPath(d("ScriptPath").getScriptPath()).setPlayerSuborigin(this.$MVideoPlayerOzPerfLoggerProvider12).setDynamicBitrate(this.$MVideoPlayerOzPerfLoggerProvider15).setRepresentationID(this.getRepresentationID()).setLowestQualityRepresentationID(this.$MVideoPlayerOzPerfLoggerProvider14).setPlayhead(Math.round(g*1e3)).setVideoDuration(Math.round(h*1e3)).setIsLive(this.$MVideoPlayerOzPerfLoggerProvider9).setSession(this.$MVideoPlayerOzPerfLoggerProvider1).setManifestType(this.$MVideoPlayerOzPerfLoggerProvider13).setSequentialID(this.$MVideoPlayerOzPerfLoggerProvider3++).setState(this.$MVideoPlayerOzPerfLoggerProvider5).setLastBufferingEventEndTime(this.$MVideoPlayerOzPerfLoggerProvider7).setLastPlayingEventTime(this.$MVideoPlayerOzPerfLoggerProvider6).setLiveheadDelta(this.getLiveheadDelta()).setResult("success").setAccessToken(this.$MVideoPlayerOzPerfLoggerProvider10).setClientTimeBegin(e).setClientTimeDuration(0).setClientTimeEnd(e).setPreloadTime(this.$MVideoPlayerOzPerfLoggerProvider17).setBandwidthEstimate(Math.round(this.$MVideoPlayerOzPerfLoggerProvider19()));var i=this,j=f.setState;f.setState=function(a){a!==this.$MVideoPlayerOzPerfLoggerProvider5&&a==="playing"?i.$MVideoPlayerOzPerfLoggerProvider6=Date.now():a!=="playing"&&(i.$MVideoPlayerOzPerfLoggerProvider6=null);i.$MVideoPlayerOzPerfLoggerProvider5=a;return j.call(this,a)};f.updateState=function(a){return this.getState()==i.$MVideoPlayerOzPerfLoggerProvider5?this.setState(a):this};var k=f.setError;f.setError=function(a){typeof a==="object"?(a.type==="aborted"||a.type==="delay"?this.setResult("aborted"):a.type==="paused"?this.setResult("paused"):(this.setResult("failed"),k.call(this,a.type)),a instanceof c("moz-player/utils/OzError")?this.setCode(a.getExtra().code):this.setCode(a.status),this.setError(a.name)):k.call(this,a);return this};var l=f.setManifestType;f.setManifestType=function(a){b.$MVideoPlayerOzPerfLoggerProvider13=a;return l.call(f,a)};return f};e.getOperationLogger=function(a){a=this.createOperationLogger(a);this.setOperationContext(a);return a};e.createOperationLogger=function(a){var b=this,c=this.getEventLogger(a);c.setClientTimeEnd(null);c.setClientTimeDuration(null);var d=c.log,e=this;c.log=function(){var b=this,c=Date.now(),f=b.getData().client_time_begin,g=b.getData().client_time_end;f=f!=null?Number(f):null;g=g!=null?Number(g):null;(f==null||f===0)&&(f=c,b.setClientTimeBegin(f));(g==null||g===0)&&(g=c,b.setClientTimeEnd(g));b.setClientTimeDuration(g-f);a==="buffering"&&(e.$MVideoPlayerOzPerfLoggerProvider7=g);return d.call(b)};c.start=function(){var a=Date.now();this.setClientTimeBegin(a);this.setClientTimeEnd(null);this.setClientTimeDuration(null);return c};c.setLiveheadPosition=function(a){b.$MVideoPlayerOzPerfLoggerProvider8=a;c.setLiveheadDelta(b.getLiveheadDelta());return c};var f=c.setDynamicBitrate;c.setDynamicBitrate=function(a){a=Number(a)||null;b.$MVideoPlayerOzPerfLoggerProvider15=a;return f.call(c,a)};var g=c.setLowestQualityRepresentationID;c.setLowestQualityRepresentationID=function(a){b.$MVideoPlayerOzPerfLoggerProvider14=a;return g.call(c,a)};return c};e.setDynamicBitrate=function(a){this.$MVideoPlayerOzPerfLoggerProvider15=a};return b}(c("moz-player/loggings/OzPerfLoggerProviderBase"));g["default"]=a}),98);
__d("MOzLiveVideoPlayerApi",["MVideoPlayerApiBase","MVideoPlayerOzPerfLoggerProvider","ODS","guid","promiseDone","requireWeak"],(function(a,b,c,d,e,f,g){var h=null;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){b=a.call(this,b)||this;b.$MOzLiveVideoPlayerApi1=!1;b.$MOzLiveVideoPlayerApi2=!1;return b}var e=b.prototype;e.getAdditionalLogData=function(b){b=a.prototype.getAdditionalLogData.call(this,b);var c={},d=this.getVideoData().playbackIsLiveStreaming;d&&(c.playback_is_live_streaming=this.getVideoData().playbackIsLiveStreaming);return babelHelpers["extends"]({},b,c)};e.heartbeatEnabled=function(){return!0};e.postInit=function(){var a=this;c("requireWeak")("MOzLivePlayer",function(b){var e=[],f=a.$MOzLiveVideoPlayerApi3();f&&e.push(f);f=a.getVideoData();var g=!1;f&&(g=!!f.audioOnly);b.createPlayer(a.getVideoElement(),a.getVideoData().src,{perfLoggerProviders:e,observedOperationLoggers:[a.getPreInitLoggerProvider()]},{audioOnly:g}).getPromise().then(function(b){h=b,a.$MOzLiveVideoPlayerApi2=!0,a.$MOzLiveVideoPlayerApi1&&(a.getVideoElement().play(),a.$MOzLiveVideoPlayerApi1=!1)})["catch"](function(a){d("ODS").bumpEntityKey(2966,"MOzLivePlayer","createPlayer.error")});a.getVideoElement().controls=!1;c("promiseDone")(a.setupControls())})};e.attemptVideoElementPlay=function(){this.$MOzLiveVideoPlayerApi2?a.prototype.attemptVideoElementPlay.call(this):this.$MOzLiveVideoPlayerApi1=!0};e.unload=function(){h&&h.destroy(),h=null,a.prototype.unload.call(this)};e.getEmbeddedVideoControlsConfig=function(){var a=this.getIsInMWERedesign();return{playbackControlHidden:!1,scrubberHidden:!0,playbackTimerHidden:!0,fullScreenControlHidden:!1,allowAudioOnly:this.shouldAllowAudioOnlyToggle(),displayPermalinkButton:a}};e.getPlayerVersion=function(){return"mtouch_shaka_live"};e.getStreamingFormat=function(){return"dash"};e.$MOzLiveVideoPlayerApi3=function(){var a;a=(a=this.getVideoData().disableLogging)!=null?a:!1;return!c("MVideoPlayerOzPerfLoggerProvider").isEnabled()||a?null:new(c("MVideoPlayerOzPerfLoggerProvider"))({videoID:this.getVideoID(),isLive:!0,video:this.getVideoElement(),uniqueID:c("guid")(),playerOrigin:this.getPlayerOrigin(),playerSuborigin:this.getPlayerSuborigin(),accessToken:null,representationId:null,preloadTime:null,getBandwidthEstimate:function(){return 0}})};return b}(c("MVideoPlayerApiBase"));g["default"]=a}),98);
__d("moz-player/configs/MockOzConfig",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){a===void 0&&(a={}),this.$1=a}var b=a.prototype;b.getBool=function(a,b){return typeof this.$1[a]===typeof b?this.$1[a]:b};b.getNumber=function(a,b){return typeof this.$1[a]===typeof b?this.$1[a]:b};b.getString=function(a,b){return typeof this.$1[a]===typeof b?this.$1[a]:b};return a}();f["default"]=a}),66);
__d("moz-player/configs/OzPlayerConfigDefaults",[],(function(a,b,c,d,e,f){"use strict";a={abr_use_download_time:!1,allow_queueing_end_of_stream_when_update:!1,append_last_segment_if_beyond_end:!0,back_off_pdash_504_retry:!0,bandwidth_ignore_on_stream_write_samples:!1,bandwidth_use_response_time_adjustment:!1,buffer_when_waiting:!1,call_end_of_stream_in_quick_starter:!0,cancel_tracker_on_append_error:!0,check_buffer_range_once_for_playhead_update:!1,cleanup_video_node_on_destroy:!0,clear_buffer_when_switch_representation_initiator_is_user:!0,convert_dom_exception_to_oz_error:!1,copy_new_manifest:!1,delay_stream_end_for_sourceended:!1,detach_media_source_manager:!0,disable_audio_scheduler:!1,emit_stream_error_event:!0,enable_abr_for_first_request:!1,enable_adaptation:!0,enable_appends_on_wait_update_end_failure:!1,enable_network_manager_error:!1,enable_quickdashv2:!0,estimate_video_bandwidth_only:!0,exclude_prefetch_bandwidth_samples:!0,fallback_on_append_error:!1,fix_abr_default_representation:!0,fix_buffer_ahead_priority_strategy:!0,fix_prepended_segments_tagging:!0,fix_quick_starter_overhead:!0,fix_reload_manifest_retry:!0,fix_seek_performance:!1,fix_setup_video_duration_on_representation_switch:!0,fix_source_buffer_error_logging:!0,fix_stream_deferred_cancel:!0,fix_template_duration_artifact_in_manifest:!0,generate_mos_segment_buffer_diff:!1,handle_mpd_retries_outside_oz_mpd_updater:!0,handle_switch_to_unparsed_representation_sidx:!0,ignore_time_to_response_start:!1,lazy_parse_sidx:!1,listen_for_canplay_in_buffering_detector:!0,live_audio_ibr:!0,live_catch_up_only_when_paused:!1,live_disable_mpd_updates_when_paused:!0,live_gracefully_handle_410:!1,live_gracefully_handle_mpd_errors:!0,live_gracefully_handle_no_network:!0,live_no_segment_when_playhead_is_before_first_segment:!0,live_playhead_catch_up:!1,live_query_time_in_range:!0,load_video_node_on_unload:!0,log_appended_secs:!1,maybe_end_stream_if_prepended_segments:!0,mpd_update_cancel_current_request_tracker:!0,no_new_loop_body_promise_when_stream_ongoing:!0,pausable_stream_throws_error_when_aborted:!0,pdash_use_pdash_segmentlocator:!1,playhead_manager_handle_timerange_update_on_timeupdate:!0,prevent_unnecessary_seek_stream_anchor_reset:!1,queue_data_with_error_handling:!1,reach_end_only_when_video_ended:!1,remove_src_attr_on_unload:!0,respect_initial_representation_on_setup:!1,retry_fetch_on_prefetch_error:!1,sbm_abort_on_readable_stream_error:!0,sbm_check_source_buffer_ready_state_on_cancel:!1,sbm_recursively_waits_for_update_end:!1,sbm_waits_for_update_end:!0,seek_ahead_use_native_current_time:!0,seek_to_start_quick_starter:!0,set_source_buffer_append_window_end:!1,set_stream_anchor_only_on_done_status:!0,skip_videobuffer_gaps:!1,skip_videobuffer_gaps_on_buffer_updated:!1,stable_buffered_timeranges_in_observedsourcebufferstate:!0,stop_manifest_update_when_static:!0,suppress_playing_event_while_buffering:!1,throw_network_error_during_stream:!1,throw_on_non_zero_r_d_mismatch:!0,touch_cb_key:!1,update_bandwidth_cache_on_sample:!1,update_duration_when_init_appended:!0,update_live_video_config_on_representation_switch:!0,update_media_source_duration:!0,use_abr_for_missing_default_representation:!0,use_deferred_streaming_task:!0,use_loose_manifest_updates:!1,use_performance_entry_on_stream_close:!1,use_scf_timebased_segments:!1,use_scheduler:!0,use_sc_timebased_segments:!1,use_segment_request_cache:!1,use_stream_end_time_in_segment_locator:!1,xmlparser_use_domparser:!1,fix_prefetch_xhr_http_status:!0};b={abr_confidence_threshold:.9,abr_eval_buffer_threshold:0,abr_min_bandwidth_samples:0,abr_prevent_down_switch_buffer_threshold:11,abr_restrict_from_index:0,abr_restrict_to_index:0,append_byte_target_without_range:1e5,appends_per_segment:3,auto_seek_playhead_slack:.5,bandwidth_boundary_standard_deviation_factor:1,bandwidth_estimator_half_life:6,bandwidth_estimator_outlier_exclusion_factor:50,bandwidth_estimator_std_dev_penalty_factor:0,bandwidth_estimator_variance_penalty_down_factor:0,bandwidth_estimator_variance_penalty_half_life:0,bandwidth_estimator_variance_penalty_up_factor:0,bandwidth_penalty_additional_video_start:0,bandwidth_penalty_per_additional_video:0,bandwidth_response_time_handicap:0,buffer_ahead_target:22,byte_count_per_sample:2e5,default_bandwidth_estimate:1e6,download_time_buffer_delta_penalty_factor:0,initial_manifest_request_retry_count:3,initial_switch_interval:0,in_play_buffer_overflow_target:1,in_play_buffer_underflow_target:.1,live_audio_ibr_bandwidth_percentage:.05,live_catch_up_fall_behind_threshold:20,live_catch_up_live_head_delta:6,live_max_try_attempts_on_404:2,live_numerical_error_epsilon:1e-4,low_buffer_bandwidth_target_increase_factor:0,low_buffer_bandwidth_target_threshold:10,low_segment_stream_playhead_threshold:0,max_bandwidth_sample_count:30,maximum_bandwidth_sample_bandwidth:2e6,max_start_eme_attempts:3,min_block_time_range_interval_ms:0,min_eval_interval:100,minimum_bandwidth_sample_duration:30,minimum_bytes_to_sample_on_close:25e3,minimum_download_additional_buffer_ms:0,min_switch_interval:100,network_seg_timeout_ms:0,partial_playback_buffer_overflow:0,paused_stream_segments_count:2,per_stream_duration_target:0,pixels_above_viewport_to_observe:0,pixels_below_viewport_to_observe:0,playhead_manager_timeupdate_throttle_ms:1e3,playhead_nudge_slack:.1,pre_start_buffer_ahead_target:16.924449682236,prioritize_by_viewport_static_penalty:0,resolution_constraint_factor:2,sbm_read_timeout_ms:0,seconds_to_stream:10,seconds_to_stream_near_bandwidth_boundary:10,seek_ahead_epsilon:.05,segments_to_stream:5,segments_to_stream_near_bandwidth_boundary:5,segments_to_stream_under_playhead_threshold:0,skip_videobuffer_gaps_max_gap_size_sec:0,start_buffer_underflow_target:.1,stream_interrupt_check_mpd_stale_count_threshold:3,tagged_time_range_per_append_throttle:0,timeline_offset_threshold:10,time_to_first_byte_estimate_half_life_ms:500};c={bandwidth_cache_key:"bandwidthEstimate",block_representation_status_codes_json:"[]",network_end_broadcasts_json:'["410"]',network_reload_mpd_json:"[]",network_retry_intervals_json:'{"0": 1000, "404": 2000, "502": 1000, "503": 1000, "504": 1000, "429": 2000}',network_skip_json:"[]",stream_types_eligible_for_partial_playback:""};e.exports={defaultBools:a,defaultNumbers:b,defaultStrings:c}}),null);
__d("moz-player/configs/OzPlayerConfig",["moz-player/configs/OzPlayerConfigDefaults"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}var b=a.prototype;b.getBool=function(a){return d("moz-player/configs/OzPlayerConfigDefaults").defaultBools[a]};b.getNumber=function(a){return d("moz-player/configs/OzPlayerConfigDefaults").defaultNumbers[a]};b.getString=function(a){return d("moz-player/configs/OzPlayerConfigDefaults").defaultStrings[a]};b.getLegacyConfig=function(){return{getBool:function(a,b){return(a=d("moz-player/configs/OzPlayerConfigDefaults").defaultBools[a])!=null?a:b},getNumber:function(a,b){return(a=d("moz-player/configs/OzPlayerConfigDefaults").defaultNumbers[a])!=null?a:b},getString:function(a,b){return(a=d("moz-player/configs/OzPlayerConfigDefaults").defaultStrings[a])!=null?a:b}}};return a}();g["default"]=a}),98);
__d("moz-player/configs/OzConfigUtils",["moz-player/configs/OzPlayerConfig"],(function(a,b,c,d,e,f,g){"use strict";var h=new(c("moz-player/configs/OzPlayerConfig"))();a=function(a){return{getBool:function(b){return a.getBool(b,h.getBool(b))},getNumber:function(b){return a.getNumber(b,h.getNumber(b))},getString:function(b){return a.getString(b,h.getString(b))},getLegacyConfig:function(){return a}}};g.provideConfigWithDefaults=a}),98);
__d("moz-player/loggings/OzLoggingUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){a=a.getOperationLogger(b).start();try{b=c(a);return b}catch(b){a.setError(b);throw b}finally{a.log()}}function b(a,b,c,d,e){d===void 0&&(d=function(){});e===void 0&&(e=function(){});var f=b.getOperationLogger(c).start();d(f);return a.then(function(a){e(f);f.log();return a})["catch"](function(a){e(f);f.setError(a);f.log();throw a})}f.executeOperationAndLog=a;f.monitorPromiseAndLogOperation=b}),66);
__d("moz-player/loggings/OzMultiDestinationPerfLogger",["moz-player/loggings/OzOperationLoggerBase","moz-player/loggings/OzPerfLoggerProviderBase"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.$OzMultiDestinationPerfLoggerProvider1=b;return c}var c=b.prototype;c.createOperationLogger=function(a){var b=new h(a,this.$OzMultiDestinationPerfLoggerProvider1.map(function(b){return b.getOperationLogger(a)}));return b};c.createLoggerProvider=function(){return new b(this.$OzMultiDestinationPerfLoggerProvider1)};return b}(c("moz-player/loggings/OzPerfLoggerProviderBase"));var h=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.$OzMultiDestinationOperationLogger1=c;return a}var c=a.prototype;c.start=function(){b.prototype.start.call(this);this.$OzMultiDestinationOperationLogger1.forEach(function(a){return a.start()});return this};c.setResult=function(a){b.prototype.setResult.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setResult(a)});return this};c.setError=function(a){b.prototype.setError.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setError(a)});return this};c.setType=function(a){b.prototype.setType.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setType(a)});return this};c.setClientTimeBegin=function(a){b.prototype.setClientTimeBegin.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setClientTimeBegin(a)});return this};c.setClientTimeDuration=function(a){b.prototype.setClientTimeDuration.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setClientTimeDuration(a)});return this};c.setClientTimeEnd=function(a){b.prototype.setClientTimeEnd.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setClientTimeEnd(a)});return this};c.setSegmentCount=function(a){b.prototype.setSegmentCount.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setSegmentCount(a)});return this};c.setTimeToFirstByte=function(a){b.prototype.setTimeToFirstByte.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setTimeToFirstByte(a)});return this};c.setTimeToLastByte=function(a){b.prototype.setTimeToLastByte.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setTimeToLastByte(a)});return this};c.setTimeToRequestStart=function(a){b.prototype.setTimeToRequestStart.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setTimeToRequestStart(a)});return this};c.setTimeToRequestSent=function(a){b.prototype.setTimeToRequestSent.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setTimeToRequestSent(a)});return this};c.setReason=function(a){b.prototype.setReason.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setReason(a)});return this};c.setResource=function(a){b.prototype.setResource.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setResource(a)});return this};c.setSegmentStartTime=function(a){b.prototype.setSegmentStartTime.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setSegmentStartTime(a)});return this};c.setSegmentEndTime=function(a){b.prototype.setSegmentEndTime.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setSegmentEndTime(a)});return this};c.setAppendedBufferMs=function(a){b.prototype.setAppendedBufferMs.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setAppendedBufferMs(a)});return this};c.setLength=function(a){b.prototype.setLength.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setLength(a)});return this};c.setLiveheadPosition=function(a){b.prototype.setLiveheadPosition.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setLiveheadPosition(a)});return this};c.setLiveheadSeqNumHeader=function(a){b.prototype.setLiveheadSeqNumHeader.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setLiveheadSeqNumHeader(a)});return this};c.setLiveheadSeqNumMpd=function(a){b.prototype.setLiveheadSeqNumMpd.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setLiveheadSeqNumMpd(a)});return this};c.setManifestType=function(a){b.prototype.setManifestType.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setManifestType(a)});return this};c.setPriorityFloat=function(a){b.prototype.setPriorityFloat.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setPriorityFloat(a)});return this};c.setInitiator=function(a){b.prototype.setInitiator.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setInitiator(a)});return this};c.setPreloadTime=function(a){b.prototype.setPreloadTime.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setPreloadTime(a)});return this};c.setConcluder=function(a){b.prototype.setConcluder.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setConcluder(a)});return this};c.setPreviousRepresentationID=function(a){b.prototype.setPreviousRepresentationID.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setPreviousRepresentationID(a)});return this};c.setRepresentationID=function(a){b.prototype.setRepresentationID.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setRepresentationID(a)});return this};c.setState=function(a){b.prototype.setState.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setState(a)});return this};c.setContentLengthHeader=function(a){b.prototype.setContentLengthHeader.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setContentLengthHeader(a)});return this};c.setEdgeHitHeader=function(a){b.prototype.setEdgeHitHeader.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setEdgeHitHeader(a)});return this};c.setOriginHitHeader=function(a){b.prototype.setOriginHitHeader.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setOriginHitHeader(a)});return this};c.setCode=function(a){b.prototype.setCode.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setCode(a)});return this};c.setResponseTimeMsHeader=function(a){b.prototype.setResponseTimeMsHeader.call(this,a);this.$OzMultiDestinationOperationLogger1.forEach(function(b){return b.setResponseTimeMsHeader(a)});return this};c.log=function(){b.prototype.log.call(this),this.$OzMultiDestinationOperationLogger1.forEach(function(a){return a.log()})};return a}(c("moz-player/loggings/OzOperationLoggerBase"));g.OzMultiDestinationPerfLoggerProvider=a}),98);
__d("moz-player/media_source/OzMediaErrorProvider",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.hasError=function(){return this.$1.error!==null};b.getMediaErrorName=function(){var a=this.$1.error;return a&&a.message?this.$2(a.message):null};b.getErrorCode=function(){var a=this.$1.error;return a&&a.code?a.code:null};b.getVideoNode=function(){return this.$1};b.$2=function(a){a=a.split(":")[0];return a||""};return a}();f["default"]=a}),66);
__d("OzDOMEventListenerImpl",["Event","EventListener"],(function(a,b,c,d,e,f,g){"use strict";a={listenDOMEvent:function(a,b,d){return c("EventListener").listen(a,b,d)},captureDOMEvent:function(a,b,d){return c("EventListener").capture(a,b,d)},suppressDOMEvent:function(a){c("Event").kill(a)}};b=a;g["default"]=b}),98);
__d("moz-player/shims/OzDOMEventListener",["OzDOMEventListenerImpl"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("OzDOMEventListenerImpl")}),98);
__d("moz-player/shims/OzDeferred",["Deferred"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("Deferred")}),98);
__d("moz-player/shims/OzMaybeNativePromise",["MaybeNativePromise"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("MaybeNativePromise")}),98);
__d("moz-player/shims/OzReadableStream",["cr:927622"],(function(a,b,c,d,e,f,g){"use strict";b("cr:927622")&&(b("cr:927622").ReadableStream.isPolyfilled=!0);a=b("cr:927622")?b("cr:927622").ReadableStream:window.ReadableStream;c=a;g["default"]=c}),98);
__d("moz-player/shims/OzSubscriptionsHandler",["SubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("SubscriptionsHandler")}),98);
__d("moz-player/shims/ozClearTimeout",["clearTimeout"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("clearTimeout")}),98);
__d("moz-player/shims/ozSetTimeoutAcrossTransitions",["setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("setTimeoutAcrossTransitions")}),98);
__d("moz-player/states/OzObservedSourceBufferState",["moz-player/shims/OzDOMEventListener","moz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){var d=this;this.$2=new(c("moz-player/shims/OzSubscriptionsHandler"))();this.$3=[];this.$5=function(){var a;try{a=d.$1.buffered}catch(a){if(a.name==="InvalidStateError"){d.$3=[];return}else throw a}var b=[];for(var c=0;c<a.length;c++)b.push({startTime:a.start(c),endTime:a.end(c)});d.$3=b};this.$1=a;this.$4=b;this.$2.addSubscriptions(c("moz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"updateend",this.$5),c("moz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"error",this.$5))}var b=a.prototype;b.getBufferedRanges=function(){return this.$3};b.addEventListener=function(a,b){return c("moz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"updateend",b)};b.destroy=function(){this.$2.release(),this.$2.engage()};return a}();g["default"]=a}),98);
__d("moz-player/utils/OzCustomErrorCode",[],(function(a,b,c,d,e,f){"use strict";a={SOURCE_BUFFER_UNKNOWN_ERROR:"21539",SOURCE_BUFFER_HAS_BEEN_REMOVED:"21540",SOURCE_BUFFER_ERROR_ATTRIBUTE_NOT_NULL:"21541",SOURCE_BUFFER_UPDATING_ATTRIBUTE_IS_TRUE:"21542"};b=a;f["default"]=b}),66);
__d("moz-player/utils/OzNumericalHelper",[],(function(a,b,c,d,e,f){"use strict";var g=1e-5;function h(a,b,c){c===void 0&&(c=g);return Math.abs(b-a)<=c}function i(a,b,c){c===void 0&&(c=g);return a>b&&!h(a,b,c)}function j(a,b,c){c===void 0&&(c=g);return a<b&&!h(a,b,c)}function a(a,b,c){c===void 0&&(c=g);return j(a,b,c)||h(a,b,c)}function b(a,b,c){c===void 0&&(c=g);return i(a,b,c)||h(a,b,c)}f.equalTo=h;f.greaterThan=i;f.lessThan=j;f.lessThanOrEqual=a;f.greaterThanOrEqual=b}),66);
__d("moz-player/utils/OzNumericalRangeUtil",["moz-player/utils/OzNumericalHelper"],(function(a,b,c,d,e,f,g){"use strict";var h=.01;function i(a,b){b=b.rangeEnd;return b==null?!1:Math.abs(a.rangeStart-b)>h&&a.rangeStart>b}function j(a,b){a=a.rangeEnd;b=b.rangeEnd;if(a==null)return!0;return b==null?!1:Math.abs(a-b)>h&&a>b}function k(a,b){b=b.rangeEnd;return b==null?!1:Math.abs(a-b)>h&&a>b}function l(a,b){return a>b-h}a=function(){function a(){}var b=a.prototype;b.mergeSortedRanges=function(a){if(!a.length)return[];var b=[],c=a[0];b.push(c);for(var d=1;d<a.length;d++){var e=a[d];if(!j(e,c))continue;else i(e,c)?(c={rangeStart:e.rangeStart,rangeEnd:e.rangeEnd},b.push(c)):c.rangeEnd=e.rangeEnd}return b};b.diffSortedRanges=function(a,b){return a.reduceRight(function(a,c){k(c.rangeStart,b)||k(b.rangeStart,c)?a.push(c):(b.rangeEnd!=null&&(c.rangeEnd==null||k(c.rangeEnd,b))&&a.push({rangeStart:b.rangeEnd,rangeEnd:c.rangeEnd}),l(b.rangeStart,c.rangeStart)&&a.push({rangeStart:c.rangeStart,rangeEnd:b.rangeStart}));return a},[]).filter(function(a){return a.rangeEnd==null||a.rangeStart<a.rangeEnd}).reverse()};b.findCurrentRangeIndex=function(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=d.rangeStart;if(l(a,e)&&!k(a,d))return c}return-1};b.findNextRangeIndex=function(a,b){for(var c=0;c<b.length;c++){var d=b[c];d=d.rangeStart;if(!l(a,d))return c}return-1};b.findDiffCoveredByRanges=function(a,b,c){return a>=b?0:c.reduceRight(function(c,d){var e=d.rangeStart;d=d.rangeEnd;if(b<e||d!=null&&a>d)return c;else if(d==null||b<=d)return Math.min(b-e,b-a)+c;else if(a>=e)return Math.min(d-a,b-a)+c;else return d-e+c},0)};b.firstAddedInSortedRanges=function(a,b){var c=null;for(var e=0;e<a.length;e++){var f=a[e];for(var g=e;g<b.length;g++){var h=b[g];if(d("moz-player/utils/OzNumericalHelper").equalTo(f.rangeStart,h.rangeStart)&&f.rangeEnd!=null&&h.rangeEnd!=null&&d("moz-player/utils/OzNumericalHelper").equalTo(f.rangeEnd,h.rangeEnd))break;else if(h.rangeEnd!=null&&f.rangeEnd!=null&&!d("moz-player/utils/OzNumericalHelper").equalTo(f.rangeStart,h.rangeStart)){c={rangeStart:h.rangeStart,rangeEnd:h.rangeEnd};break}else if(h.rangeEnd!=null&&f.rangeEnd!=null&&d("moz-player/utils/OzNumericalHelper").equalTo(f.rangeStart,h.rangeStart)&&!d("moz-player/utils/OzNumericalHelper").equalTo(f.rangeEnd,h.rangeEnd)){c={rangeStart:f.rangeEnd,rangeEnd:h.rangeEnd};break}}if(c!==null)break}return c};b.convertFromTimeRanges=function(a){var b=[];for(var c=0;c<a.length;c++)b.push({rangeStart:a[c].startTime,rangeEnd:a[c].endTime});return b};return a}();g["default"]=a}),98);
__d("moz-player/utils/OzSourceBufferUtil",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=0;for(var c=0;c<a.buffered.length;c++)b+=a.buffered.end(c)-a.buffered.start(c);return b}function b(a){return a.buffered.length==0?0:a.buffered.end(a.buffered.length-1)}f.getTotalBufferedTime=a;f.getEndBufferedTime=b}),66);
__d("moz-player/utils/ozConcatArrayBuffer",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=new Uint8Array(a.byteLength+b.byteLength);c.set(new Uint8Array(a),0);c.set(new Uint8Array(b),a.byteLength);return c.buffer}f["default"]=a}),66);
__d("moz-player/media_source/SourceBufferManager",["moz-player/loggings/OzLoggingUtils","moz-player/shims/OzDOMEventListener","moz-player/shims/OzDeferred","moz-player/shims/OzMaybeNativePromise","moz-player/shims/OzReadableStream","moz-player/shims/OzSubscriptionsHandler","moz-player/shims/ozClearTimeout","moz-player/shims/ozSetTimeoutAcrossTransitions","moz-player/states/OzObservedSourceBufferState","moz-player/utils/OzCustomErrorCode","moz-player/utils/OzError","moz-player/utils/OzNumericalRangeUtil","moz-player/utils/OzSourceBufferUtil","moz-player/utils/ozConcatArrayBuffer"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d){var e=this;this.$2=null;this.$3=new(c("moz-player/shims/OzSubscriptionsHandler"))();this.$6=!1;this.$7=[];this.$12=!1;this.$13=!1;this.$23=function(){if(e.$9.hasError()){e.$13=!1;e.$12=!1;var a=e.$9.getMediaErrorName();a=a!=null?a:"An unknown source buffer error occurred.";var b=e.$9.getErrorCode();b=b!=null?b:c("moz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_UNKNOWN_ERROR;a=new(c("moz-player/utils/OzError"))({type:"OZ_SOURCE_BUFFER",description:a,extra:{code:b.toString()}});e.$2&&e.$2.reject(a);e.$2=null;e.cancelOperationAndCleanQueue()}else e.$13||(e.$13=!0,e.$3.addSubscriptions(c("moz-player/shims/OzDOMEventListener").listenDOMEvent(e.$9.getVideoNode(),"error",e.$23)))};this.$14=function(){var a=e.$2;a&&(e.$12?e.$23():(a.resolve(),e.$2&&(e.$2=null)))};this.$15=function(){e.$10.getBool("fix_source_buffer_error_logging")?e.$12=!0:e.$24()};this.$1=a;this.$10=b;this.$3.addSubscriptions(c("moz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"updateend",this.$14),c("moz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"error",this.$15));this.$8=new(c("moz-player/states/OzObservedSourceBufferState"))(this.$1,this.$10);this.$9=d}var b=a.prototype;b.queueData=function(a,b,d,e){b===void 0&&(b=null);d===void 0&&(d=0);e===void 0&&(e=null);var f=new(c("moz-player/shims/OzDeferred"))(c("moz-player/shims/OzMaybeNativePromise"));this.$7.push({data:a,deferred:f,loggerProvider:b,appendTarget:d,onDataAppend:e});a=f.getPromise();this.$6||(this.$10.getBool("queue_data_with_error_handling")?this.$16():this.$17());return a};b.cancelOperationAndCleanQueue=function(){var a=this.$18();this.$7.forEach(function(b){b=b.deferred;b.reject(a)});this.$7=[];this.$10.getBool("sbm_check_source_buffer_ready_state_on_cancel")?this.$1&&this.$1.readyState==="open"&&this.$1.abort():this.$1.abort();var b=c("moz-player/shims/OzMaybeNativePromise").resolve(),d=this.$2;d&&(d.reject(a),b=d.getPromise()["catch"](function(){}));this.$4&&(this.$4.reject(a),this.$4=null);return b};b.getSourceBufferState=function(){return this.$8};b.clearRange=function(a,b){this.$1.remove(a,b)};b.$19=function(a){var b=this.$2=new(c("moz-player/shims/OzDeferred"))(c("moz-player/shims/OzMaybeNativePromise"));b=b.getPromise();a&&d("moz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(b,a,"wait_for_source_buffer");return b};b.$20=function(a,b,e){var f=this;if(this.$2!==null)return c("moz-player/shims/OzMaybeNativePromise").reject(this.$21("cannot have concurrent appends"));var g=function g(){if(f.$10.getBool("sbm_recursively_waits_for_update_end")&&f.$1.updating)return f.$19(b).then(g)["catch"](function(a){if(f.$10.getBool("enable_appends_on_wait_update_end_failure"))return g();throw a});var h=f.$2=new(c("moz-player/shims/OzDeferred"))(c("moz-player/shims/OzMaybeNativePromise")),i=!1;try{i=f.$1.updating,f.$1.appendBuffer(a)}catch(a){var j=c("moz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_HAS_BEEN_REMOVED;f.$9.hasError()?j=c("moz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_ERROR_ATTRIBUTE_NOT_NULL:i&&(j=c("moz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_UPDATING_ATTRIBUTE_IS_TRUE);i=new(c("moz-player/utils/OzError"))({type:"OZ_SOURCE_BUFFER",description:a.message,extra:{originalError:a,code:j.toString()}});f.$2=null;h.reject(i)}j=h.getPromise();b&&d("moz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(j,b,"append",function(b){b.setLength(a.byteLength)});var k=f.$10.getBool("log_appended_secs")?d("moz-player/utils/OzSourceBufferUtil").getTotalBufferedTime(f.$1):0;return j.then(function(){e&&e();return f.$10.getBool("log_appended_secs")?d("moz-player/utils/OzSourceBufferUtil").getTotalBufferedTime(f.$1)-k:0})};if(!this.$10.getBool("sbm_waits_for_update_end"))return g();return!this.$10.getBool("sbm_recursively_waits_for_update_end")&&this.$1.updating?this.$19(b).then(g)["catch"](function(a){if(f.$10.getBool("enable_appends_on_wait_update_end_failure"))return g();throw a}):g()};b.$17=function(){var a=this;if(this.$6)return c("moz-player/shims/OzMaybeNativePromise").reject(this.$21("Another unit of queued data is being appended."));var b=this.$7.shift();if(!b){this.$6=!1;return c("moz-player/shims/OzMaybeNativePromise").resolve()}var e=b.data,f=b.deferred,g=b.loggerProvider,h=b.appendTarget;b=b.onDataAppend;this.$6=!0;h=e instanceof c("moz-player/shims/OzReadableStream")?this.$22(e,g,h,b):this.$20(e,g,b);var i=NaN,j;this.$10.getBool("generate_mos_segment_buffer_diff")?j=new(c("moz-player/utils/OzNumericalRangeUtil"))().convertFromTimeRanges(this.$8.getBufferedRanges()):i=d("moz-player/utils/OzSourceBufferUtil").getEndBufferedTime(this.$1);return h["catch"](function(a){f.reject(a);return 0}).then(function(b){if(a.$10.getBool("generate_mos_segment_buffer_diff")){b=new(c("moz-player/utils/OzNumericalRangeUtil"))().firstAddedInSortedRanges(j,new(c("moz-player/utils/OzNumericalRangeUtil"))().convertFromTimeRanges(a.$8.getBufferedRanges()));i=(b==null?void 0:b.rangeStart)||0;b=(b==null?void 0:b.rangeEnd)||0}else b=d("moz-player/utils/OzSourceBufferUtil").getEndBufferedTime(a.$1);f.resolve({startTime_UNSAFE:i,endTime_UNSAFE:b,appendedSec:b-i});a.$6=!1;a.$17()})};b.$16=function(){var a=this;try{if(this.$6)throw this.$21("Another unit of queued data is being appended.");var b=this.$7.shift();if(!b){this.$6=!1;return}var e=b.data,f=b.deferred,g=b.loggerProvider;b=b.appendTarget;this.$6=!0;b=e instanceof c("moz-player/shims/OzReadableStream")?this.$22(e,g,b):this.$20(e,g);var h=d("moz-player/utils/OzSourceBufferUtil").getEndBufferedTime(this.$1);b.then(function(b){b=d("moz-player/utils/OzSourceBufferUtil").getEndBufferedTime(a.$1);f.resolve({startTime_UNSAFE:h,endTime_UNSAFE:b,appendedSec:b-h})},function(a){f.reject(a)})["finally"](function(){a.$6=!1,a.$16()})}catch(a){}};b.$22=function(a,b,d,e){var f=this,g=new ArrayBuffer(0),h=a.getReader();a=function a(){var i=new(c("moz-player/shims/OzDeferred"))(c("moz-player/shims/OzMaybeNativePromise"));f.$4=i;var j=null;f.$10.getNumber("sbm_read_timeout_ms")>0&&(j=c("moz-player/shims/ozSetTimeoutAcrossTransitions")(function(){var a=new(c("moz-player/utils/OzError"))({type:"OZ_SOURCE_BUFFER",description:"ReadableStreamReader.read() timed out.",extra:{}});i.reject(a);f.$4=null;f.$5=j=null},f.$10.getNumber("sbm_read_timeout_ms")));h.read().then(function(a){i.resolve(a),f.$4=null,j&&(c("moz-player/shims/ozClearTimeout")(j),f.$5=j=null)})["catch"](function(a){i.reject(a),f.$4=null,j&&(c("moz-player/shims/ozClearTimeout")(j),f.$5=j=null)});return i.getPromise().then(function(h){if(h.done)return g.byteLength>0?f.$20(g,b,e):c("moz-player/shims/OzMaybeNativePromise").resolve(0);h=h.value;var i=h;d>0&&(h instanceof Uint8Array&&(h=h.buffer),g=c("moz-player/utils/ozConcatArrayBuffer")(g,h),i=g);if(i&&i.byteLength>=d){g=new ArrayBuffer(0);return f.$20(i,b,e).then(function(b){return a().then(function(a){return a+b})})}return a()},function(a){f.$10.getBool("sbm_abort_on_readable_stream_error")&&f.$1.abort();return c("moz-player/shims/OzMaybeNativePromise").reject(a)})};return a()};b.$24=function(){var a=this,b=this.$2;b&&(c("moz-player/shims/ozClearTimeout")(this.$11),this.$11=c("moz-player/shims/ozSetTimeoutAcrossTransitions")(function(){a.$11=null;var d=a.$9.getErrorCode(),e=a.$9.getMediaErrorName();d={code:d!=null?d.toString():e!=null?e:"OZ_SB-1"};e=new(c("moz-player/utils/OzError"))({type:"OZ_SOURCE_BUFFER",description:e!=null?e:"Unknown SourceBuffer Append Error",extra:d});b.reject(e);a.$2=null},0))};b.$21=function(a){a=new Error(a);a.name="invariant_violation";return a};b.$18=function(){var a=new Error("operation is cancelled");a.name="cancelled";return a};b.destroy=function(){var a=this;this.$5&&c("moz-player/shims/ozClearTimeout")(this.$5);this.$5=null;c("moz-player/shims/ozClearTimeout")(this.$11);this.$11=null;var b=this.$2;b&&(!this.$13?(b.reject(this.$18()),this.$2=null,this.$3.release(),this.$3=new(c("moz-player/shims/OzSubscriptionsHandler"))()):b.getPromise()["catch"](function(){a.$2=null,a.$3.release(),a.$3=new(c("moz-player/shims/OzSubscriptionsHandler"))()}));this.$8.destroy()};b.getDebug=function(){return{SourceBuffer:this.$1}};return a}();g["default"]=a}),98);
__d("moz-player/media_source/MediaSourceManager",["moz-player/loggings/OzLoggingUtils","moz-player/loggings/OzMultiDestinationPerfLogger","moz-player/media_source/OzMediaErrorProvider","moz-player/media_source/SourceBufferManager","moz-player/shims/OzDOMEventListener","moz-player/shims/OzDeferred","moz-player/shims/OzMaybeNativePromise","moz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,e){var f=this;e===void 0&&(e=new(d("moz-player/loggings/OzMultiDestinationPerfLogger").OzMultiDestinationPerfLoggerProvider)([]));this.$3=new(c("moz-player/shims/OzSubscriptionsHandler"))();this.$5=[];this.$6=[];this.$8=!1;this.$10=!1;this.$12=function(){f.$13()||(f.$8=!1);if(!f.$14())return;var a=f.$6.shift();a&&(a(f.$2),f.$8=!0)};this.$4=e;this.$9=b;this.$1=a;this.$2=new MediaSource();this.$1.src=window.URL.createObjectURL(this.$2);this.$7=new(c("moz-player/media_source/OzMediaErrorProvider"))(this.$1);d("moz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(this.$11(),this.$4,"media_source_open")}var b=a.prototype;b.$11=function(){var a=this;if(this.$2.readyState==="open")return c("moz-player/shims/OzMaybeNativePromise").resolve();var b=new(c("moz-player/shims/OzDeferred"))(c("moz-player/shims/OzMaybeNativePromise"));this.$3.addSubscriptions(c("moz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceopen",function(){b.resolve(),a.$12()}));return b.getPromise()};b.createSourceBufferManager=function(a,b){var d=this;b===void 0&&(b=!1);return this.$11().then(function(){var e=d.$2.addSourceBuffer(a);b&&!isNaN(d.$2.duration)&&(e.appendWindowEnd=d.$2.duration);d.$5.push(e);d.$3.addSubscriptions(c("moz-player/shims/OzDOMEventListener").listenDOMEvent(e,"updateend",d.$12));return new(c("moz-player/media_source/SourceBufferManager"))(e,d.$9,d.$7)})};b.getMediaSource=function(){return this.$2};b.notifyEndOfStream=function(){var a=this,b=new(c("moz-player/shims/OzDeferred"))(c("moz-player/shims/OzMaybeNativePromise"));this.$3.addSubscriptions(c("moz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceended",function(){b.resolve()}));this.$6.push(function(b){a.$4.getOperationLogger("end_of_stream").log(),b.endOfStream()});this.$12();return b.getPromise()};b.updateDuration=function(a){this.$6.push(function(b){b.duration=a}),this.$12()};b.detach=function(){this.$1.removeAttribute("src");for(var a=0;a<this.$2.sourceBuffers.length;a++){var b=this.$2.sourceBuffers[a];this.$2.removeSourceBuffer(b)}this.$3.release();this.$3.engage();this.$6=[];this.$8=!1;this.$10=!0};b.$14=function(){return!this.$13()&&this.$2.readyState==="open"&&!this.$8&&!this.$10};b.$13=function(){return this.$5.some(function(a){return a.updating})};return a}();g["default"]=a}),98);
__d("moz-player/shims/ozvariant",["invariant"],(function(a,b,c,d,e,f,g,h){a=h;g["default"]=a}),98);
__d("moz-player/strategies/OzBlockedRepresentationsManager",["moz-player/shims/OzEventEmitter","moz-player/utils/OzError"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$1=new Set();this.$2=new Set();this.$3=new(c("moz-player/shims/OzEventEmitter"))();try{a=JSON.parse(a.getString("block_representation_status_codes_json"));Array.isArray(a)&&a.forEach(function(a){var c=parseInt(a,10);isNaN(c)||b.$1.add(a)})}catch(a){this.$1=new Set()}}var b=a.prototype;b.isBlocked=function(a){return this.$2.has(a)};b.handleError=function(a,b){if(b instanceof c("moz-player/utils/OzError")&&b.getType()==="OZ_NETWORK"){b=Number(b.getExtra().code);if(!isNaN(b)&&this.$1.has(b)){if(!this.$2.has(a)){this.$2.add(a);(b=this.$3)==null?void 0:b.emit("representation_blocked",a)}return!0}}return!1};b.applyRestriction=function(a,b){var c=this;return a.filter(function(a){return!c.$2.has(a.getID())})};b.onRepresentationBlocked=function(a){return this.$3?this.$3.addListener("representation_blocked",a):{remove:function(){}}};b.destroy=function(){var a;(a=this.$3)==null?void 0:a.removeAllListeners();this.$3=null};return a}();g["default"]=a}),98);
__d("moz-player/utils/OzErrorEmitter",["moz-player/shims/OzEventEmitter","moz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var d;b===void 0&&(b=!1);d=a.call(this)||this;d.$OzErrorEmitter1=!1;d.$OzErrorEmitter2=!1;d.$OzErrorEmitter3=[];d.emitError=function(a){!d.$OzErrorEmitter1?d.$OzErrorEmitter2?d.$OzErrorEmitter3.push(a):d.$OzErrorEmitter1||c("moz-player/shims/ozvariant")(0,14038):d.emit("error",a)};d.$OzErrorEmitter2=b;return d}var d=b.prototype;d.onError=function(a){this.$OzErrorEmitter1=!0;a=this.addListener("error",a);this.$OzErrorEmitter2&&this.$OzErrorEmitter3.length>0&&this.$OzErrorEmitter3.forEach(this.emitError);return a};return b}(c("moz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("moz-player/utils/maybeConvertReadableStreamToOzReadableStream",["moz-player/shims/OzReadableStream","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(!c("moz-player/shims/OzReadableStream").isPolyfilled)return a;var d=a.getReader();return new(c("moz-player/shims/OzReadableStream"))({start:function(a){var c,e,f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:g.next=3;return b("regeneratorRuntime").awrap(d.read());case 3:c=g.sent;e=c.done;f=c.value;if(!e){g.next=8;break}return g.abrupt("break",11);case 8:a.enqueue(f);g.next=0;break;case 11:a.close();case 12:case"end":return g.stop()}},null,this)}})}g["default"]=a}),98);
__d("moz-player/utils/convertPrefetchCacheEntryToReadableStream",["moz-player/shims/OzReadableStream","moz-player/utils/OzError","moz-player/utils/maybeConvertReadableStreamToOzReadableStream"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=new(c("moz-player/shims/OzReadableStream"))({start:function(b){a.then(function(a){switch(a.initiator){case"XHR_REQUEST":var d=new Uint8Array(a.response);b.enqueue(d);b.close();break;case"FETCH":d=a.response.body;if(d!=null){var e=function a(){f.read().then(function(c){var d=c.done;c=c.value;if(d){b.close();return}b.enqueue(c);a()})["catch"](function(a){b.err(a)})},f=c("moz-player/utils/maybeConvertReadableStreamToOzReadableStream")(d).getReader();e()}else a.response.arrayBuffer().then(function(a){a=new Uint8Array(a);b.enqueue(a);b.close()})["catch"](function(a){b.err(a)});break;default:a.initiator,b.error(new(c("moz-player/utils/OzError"))({type:"OZ_UNEXPECTED_CACHE_INITIATOR",description:"Unable to handle request initiator: "+a.initiator}))}})["catch"](function(a){b.error(a)})}});return b}g["default"]=a}),98);
__d("moz-player/media_source/OzQuickStarter",["moz-player/configs/OzConfigUtils","moz-player/loggings/OzLoggingUtils","moz-player/loggings/OzPreInitLogger","moz-player/media_source/MediaSourceManager","moz-player/shims/OzEventEmitter","moz-player/shims/ozvariant","moz-player/strategies/OzBlockedRepresentationsManager","moz-player/utils/OzError","moz-player/utils/OzErrorEmitter","moz-player/utils/convertPrefetchCacheEntryToReadableStream"],(function(a,b,c,d,e,f,g){"use strict";var h=.1;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e,f){var g;f===void 0&&(f=[]);g=a.call(this)||this;g.$OzQuickStarter5=new Map();g.$OzQuickStarter6=[];g.$OzQuickStarter8=new Map();g.$OzQuickStarter9=new Map();g.$OzQuickStarter10=new(c("moz-player/utils/OzErrorEmitter"))(!0);g.$OzQuickStarter3=b;g.$OzQuickStarter1=d("moz-player/configs/OzConfigUtils").provideConfigWithDefaults(e);g.$OzQuickStarter7=new(d("moz-player/loggings/OzPreInitLogger").OzPreInitLoggerProvider)();g.$OzQuickStarter7.setInitiator("quick_starter");g.$OzQuickStarter6.push(g.$OzQuickStarter7);g.$OzQuickStarter2=new(c("moz-player/media_source/MediaSourceManager"))(g.$OzQuickStarter3,g.$OzQuickStarter1,g.$OzQuickStarter7);g.$OzQuickStarter11=new(c("moz-player/strategies/OzBlockedRepresentationsManager"))(g.$OzQuickStarter1);g.$OzQuickStarter4=new Map();f.forEach(function(a){return g.addPrefetchTrack(a)});return g}var e=b.prototype;e.addPrefetchTrack=function(a){var b=this,e=a.mimeCodec,f=this.$OzQuickStarter12(e);if(!f)return;var g=this.$OzQuickStarter12(e),h=this.$OzQuickStarter13(this.$OzQuickStarter7).setType(g),i=this.$OzQuickStarter13(this.$OzQuickStarter7).setType(g+";init");this.$OzQuickStarter5.set(f,a.segmentPromise?1:0);var j=a.representationID;g=this.$OzQuickStarter2.createSourceBufferManager(e).then(function(e){var g=c("moz-player/utils/convertPrefetchCacheEntryToReadableStream")(a.initializationPromise);d("moz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a.initializationPromise,i,"fetch_stream");e.queueData(g,i)["catch"](function(a){return b.$OzQuickStarter14(j,a)});g=a.segmentPromise;if(g){var k=c("moz-player/utils/convertPrefetchCacheEntryToReadableStream")(g);d("moz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(g,h,"fetch_stream");e.queueData(k,h).then(function(a){b.$OzQuickStarter8.set(f,a.appendedSec),b.$OzQuickStarter1.getBool("call_end_of_stream_in_quick_starter")&&b.$OzQuickStarter8.size===b.$OzQuickStarter4.size&&b.$OzQuickStarter15()&&(b.$OzQuickStarter2.notifyEndOfStream(),b.emit("streamEnd")),b.$OzQuickStarter1.getBool("seek_to_start_quick_starter")&&b.$OzQuickStarter8.size===b.$OzQuickStarter4.size&&b.$OzQuickStarter16()})["catch"](function(a){return b.$OzQuickStarter14(j,a)})}return e});this.$OzQuickStarter4.set(f,g);a.representationID&&this.$OzQuickStarter9.set(f,a.representationID)};e.onError=function(a){return this.$OzQuickStarter10.onError(a)};e.$OzQuickStarter16=function(){var a=this.$OzQuickStarter3.buffered.length>0?this.$OzQuickStarter3.buffered.start(0):null;a!==null&&this.$OzQuickStarter3.currentTime<a&&(this.$OzQuickStarter3.currentTime=a+h)};e.$OzQuickStarter15=function(){var a=this;if(Number.isNaN(this.$OzQuickStarter3.duration))return!1;var b=!0;this.$OzQuickStarter8.forEach(function(c){Math.abs(c-a.$OzQuickStarter3.duration)>h&&(b=!1)});return b};e.$OzQuickStarter14=function(a,b){var d=new Error();!(b instanceof c("moz-player/utils/OzError"))?b.status!=null?d=new(c("moz-player/utils/OzError"))({type:"OZ_NETWORK",description:b.message,extra:{code:String(b.status)}}):d=new(c("moz-player/utils/OzError"))({type:"OZ_QUICKSTARTER",description:b.message}):d=b;this.$OzQuickStarter11.handleError(a,d)||this.$OzQuickStarter10.emitError(d)};e.getSourceBufferManagerPromise=function(a){a=this.$OzQuickStarter12(a);return this.$OzQuickStarter4.get(a)};e.getPrependedSegmentsCount=function(a){var b=this.$OzQuickStarter12(a);if(!b)return 0;b=this.$OzQuickStarter5.get(b)||0;return this.getSourceBufferManagerPromise(a)?b:0};e.getRepresentationId=function(a){a=this.$OzQuickStarter12(a);return!a?null:this.$OzQuickStarter9.get(a)||null};e.getAudioRepresentationIDAtTime=function(a){return this.$OzQuickStarter17("audio",a)};e.getVideoRepresentationIDAtTime=function(a){return this.$OzQuickStarter17("video",a)};e.getVideoNode=function(){return this.$OzQuickStarter3};e.getBlockedRepresentationsManager=function(){return this.$OzQuickStarter11};e.getMediaSourceManager=function(){return this.$OzQuickStarter2};e.getObservedOperationLoggers=function(){return this.$OzQuickStarter6};e.$OzQuickStarter17=function(a,b){var c=this.$OzQuickStarter8.get(a);return c!=null&&b<=c?this.$OzQuickStarter9.get(a):null};e.$OzQuickStarter13=function(a){a=a.cloneContext();a instanceof d("moz-player/loggings/OzPreInitLogger").OzPreInitLoggerProvider||c("moz-player/shims/ozvariant")(0,5677);this.$OzQuickStarter6.push(a);return a};e.$OzQuickStarter12=function(a){return(a.split("/")[0]||"").trim()};return b}(c("moz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("MMediaFactory",["MOzExperiments","MVideoUtils","moz-player/configs/MockOzConfig","moz-player/media_source/OzQuickStarter","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";var h=[];function i(){return window.MediaSource&&window.fetch&&window.ReadableStream}var j=function(){var a=c("MVideoUtils").createVideoNode(),b;i()&&c("MOzExperiments").use_quick_starter&&(b=new(c("moz-player/media_source/OzQuickStarter"))(a,new(c("moz-player/configs/MockOzConfig"))(c("MOzExperiments").fix_quick_starter_config?c("MOzExperiments"):{}),[]));return{node:a,quickStarter:b}};function k(){return j()}var l;function a(){c("MOzExperiments").precreate_cache_size>0&&!l&&(l=c("setImmediate")(n));if(h.length>0)return h.shift();else return k()}var m=function(){l=null;var a=h.length;if(c("MOzExperiments").precreate_cache_size&&a>=c("MOzExperiments").precreate_cache_size)return;a=c("MOzExperiments").precreate_cache_size-a;for(var b=0;b<a;b++)h.push(k())};function n(){m()}function b(a){}function d(a){}g.pool=h;g.create=k;g.get=a;g.populate=n;g.setPopulate=b;g.setCreate=d}),98);
__d("MOzConfigDefaults",[],(function(a,b,c,d,e,f){"use strict";a={abr_use_download_time:!1,append_last_segment_if_beyond_end:!1,allow_queueing_end_of_stream_when_update:!1,back_off_pdash_504_retry:!1,bandwidth_ignore_on_stream_write_samples:!1,bandwidth_use_response_time_adjustment:!1,buffer_when_waiting:!1,call_end_of_stream_in_quick_starter:!1,cancel_tracker_on_append_error:!1,check_buffer_range_once_for_playhead_update:!1,cleanup_video_node_on_destroy:!1,clear_buffer_when_switch_representation_initiator_is_user:!1,convert_dom_exception_to_oz_error:!1,copy_new_manifest:!1,delay_stream_end_for_sourceended:!1,detach_media_source_manager:!1,disable_audio_scheduler:!1,emit_stream_error_event:!1,enable_abr_for_first_request:!1,enable_adaptation:!0,enable_appends_on_wait_update_end_failure:!1,enable_network_manager_error:!1,enable_quickdashv2:!1,estimate_video_bandwidth_only:!1,exclude_prefetch_bandwidth_samples:!0,fallback_on_append_error:!1,fix_abr_default_representation:!1,fix_quick_starter_overhead:!0,fix_reload_manifest_retry:!1,fix_seek_performance:!1,fix_setup_video_duration_on_representation_switch:!1,fix_source_buffer_error_logging:!1,fix_stream_deferred_cancel:!1,fix_template_duration_artifact_in_manifest:!1,generate_mos_segment_buffer_diff:!1,handle_mpd_retries_outside_oz_mpd_updater:!1,handle_switch_to_unparsed_representation_sidx:!0,ignore_time_to_response_start:!1,lazy_parse_sidx:!1,listen_for_canplay_in_buffering_detector:!1,live_audio_ibr:!0,live_catch_up_only_when_paused:!1,live_disable_mpd_updates_when_paused:!1,live_gracefully_handle_410:!1,live_gracefully_handle_mpd_errors:!1,live_gracefully_handle_no_network:!1,live_no_segment_when_playhead_is_before_first_segment:!1,live_playhead_catch_up:!1,live_query_time_in_range:!1,load_video_node_on_unload:!1,log_appended_secs:!1,maybe_end_stream_if_prepended_segments:!1,mpd_update_cancel_current_request_tracker:!1,no_new_loop_body_promise_when_stream_ongoing:!1,pausable_stream_throws_error_when_aborted:!1,playhead_manager_handle_timerange_update_on_timeupdate:!1,queue_data_with_error_handling:!1,reach_end_only_when_video_ended:!1,remove_src_attr_on_unload:!1,respect_initial_representation_on_setup:!1,retry_fetch_on_prefetch_error:!1,sbm_abort_on_readable_stream_error:!1,sbm_check_source_buffer_ready_state_on_cancel:!1,sbm_recursively_waits_for_update_end:!1,sbm_waits_for_update_end:!0,seek_ahead_use_native_current_time:!1,seek_to_start_quick_starter:!1,set_source_buffer_append_window_end:!1,set_stream_anchor_only_on_done_status:!1,skip_videobuffer_gaps:!0,skip_videobuffer_gaps_on_buffer_updated:!1,stable_buffered_timeranges_in_observedsourcebufferstate:!1,stop_manifest_update_when_static:!1,suppress_playing_event_while_buffering:!1,throw_network_error_during_stream:!1,throw_on_non_zero_r_d_mismatch:!1,touch_cb_key:!1,update_bandwidth_cache_on_sample:!1,update_duration_when_init_appended:!1,update_live_video_config_on_representation_switch:!1,update_media_source_duration:!0,use_abr_for_missing_default_representation:!1,use_deferred_streaming_task:!1,use_loose_manifest_updates:!1,use_performance_entry_on_stream_close:!1,use_scf_timebased_segments:!1,use_scheduler:!0,use_sc_timebased_segments:!1,use_segment_request_cache:!1,use_stream_end_time_in_segment_locator:!1,pdash_use_pdash_segmentlocator:!1,fix_buffer_ahead_priority_strategy:!1,fix_prepended_segments_tagging:!1,xmlparser_use_domparser:!1,prevent_unnecessary_seek_stream_anchor_reset:!1,fix_prefetch_xhr_http_status:!0};b={abr_confidence_threshold:.9,abr_eval_buffer_threshold:0,abr_min_bandwidth_samples:0,abr_prevent_down_switch_buffer_threshold:11,abr_restrict_from_index:0,abr_restrict_to_index:0,append_byte_target_without_range:0,appends_per_segment:3,auto_seek_playhead_slack:0,bandwidth_boundary_standard_deviation_factor:1,bandwidth_estimator_half_life:6,bandwidth_estimator_outlier_exclusion_factor:50,bandwidth_estimator_std_dev_penalty_factor:0,bandwidth_estimator_variance_penalty_down_factor:0,bandwidth_estimator_variance_penalty_half_life:0,bandwidth_estimator_variance_penalty_up_factor:0,bandwidth_penalty_additional_video_start:0,bandwidth_penalty_per_additional_video:0,bandwidth_response_time_handicap:0,buffer_ahead_target:19,byte_count_per_sample:6e4,default_bandwidth_estimate:5e5,download_time_buffer_delta_penalty_factor:0,initial_manifest_request_retry_count:0,initial_switch_interval:0,in_play_buffer_overflow_target:1,in_play_buffer_underflow_target:.1,live_audio_ibr_bandwidth_percentage:.05,live_catch_up_fall_behind_threshold:20,live_catch_up_live_head_delta:6,live_max_try_attempts_on_404:1,live_numerical_error_epsilon:0,low_buffer_bandwidth_target_increase_factor:0,low_buffer_bandwidth_target_threshold:10,low_segment_stream_playhead_threshold:0,max_bandwidth_sample_count:30,max_start_eme_attempts:-1,maximum_bandwidth_sample_bandwidth:2e6,min_block_time_range_interval_ms:0,min_eval_interval:1e3,minimum_bandwidth_sample_duration:30,minimum_bytes_to_sample_on_close:25e3,minimum_download_additional_buffer_ms:0,min_switch_interval:5e3,network_seg_timeout_ms:0,paused_stream_segments_count:2,per_stream_duration_target:0,playhead_nudge_slack:0,playhead_manager_timeupdate_throttle_ms:1e3,pixels_below_viewport_to_observe:0,pixels_above_viewport_to_observe:0,pre_start_buffer_ahead_target:10,resolution_constraint_factor:2,sbm_read_timeout_ms:0,seconds_to_stream:0,seconds_to_stream_near_bandwidth_boundary:0,seek_ahead_epsilon:0,segments_to_stream:5,segments_to_stream_near_bandwidth_boundary:5,segments_to_stream_under_playhead_threshold:0,skip_videobuffer_gaps_max_gap_size_sec:0,start_buffer_underflow_target:.1,stream_interrupt_check_mpd_stale_count_threshold:0,tagged_time_range_per_append_throttle:0,timeline_offset_threshold:0,time_to_first_byte_estimate_half_life_ms:500,prioritize_by_viewport_static_penalty:0,partial_playback_buffer_overflow:0};c={bandwidth_cache_key:"bandwidthEstimate",block_representation_status_codes_json:"[500]",network_end_broadcasts_json:"[]",network_reload_mpd_json:"[]",network_retry_intervals_json:'{"0": 1000, "404": 2000, "502": 1000, "503": 1000, "504": 1000}',network_skip_json:"[]",stream_types_eligible_for_partial_playback:""};f.defaultBools=a;f.defaultNumbers=b;f.defaultStrings=c}),66);
__d("MOzConfig",["MOzConfigDefaults","MOzExperiments"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}var b=a.prototype;b.getBool=function(a){return typeof c("MOzExperiments")[a]==="boolean"?c("MOzExperiments")[a]:d("MOzConfigDefaults").defaultBools[a]};b.getNumber=function(a){return typeof c("MOzExperiments")[a]==="number"?c("MOzExperiments")[a]:d("MOzConfigDefaults").defaultNumbers[a]};b.getString=function(a){return typeof c("MOzExperiments")[a]==="string"?c("MOzExperiments")[a]:d("MOzConfigDefaults").defaultStrings[a]};b.getLegacyConfig=function(){return{getBool:function(a,b){return typeof c("MOzExperiments")[a]==="boolean"?c("MOzExperiments")[a]:(a=d("MOzConfigDefaults").defaultBools[a])!=null?a:b},getNumber:function(a,b){return typeof c("MOzExperiments")[a]==="number"?c("MOzExperiments")[a]:(a=d("MOzConfigDefaults").defaultNumbers[a])!=null?a:b},getString:function(a,b){return typeof c("MOzExperiments")[a]==="string"?c("MOzExperiments")[a]:(a=d("MOzConfigDefaults").defaultStrings[a])!=null?a:b}}};return a}();g["default"]=a}),98);
__d("MOzDashPrefetchCache",["MVideoDashPrefetchCache"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}var b=a.prototype;b.hasCacheValue=function(a){return c("MVideoDashPrefetchCache").hasCacheValue(a)};b.getCacheValue=function(a){return c("MVideoDashPrefetchCache").getCacheValue(a)};b.getCachedRepresentations=function(a){return null};return a}();g["default"]=a}),98);
__d("OzMinimumSmallestDimensionRestriction",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.applyRestriction=function(a,b){var c=this;if(a.length===0)return[];b=a.filter(function(a){var b=a.getWidth();a=a.getHeight();b=b<a?b:a;return b>=c.$1});return b.length>0?b:[a[a.length-1]]};return a}();f["default"]=a}),66);
__d("handleManifestFetchErrorEvent",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=a.getNumber("initial_manifest_request_retry_count",0),d=JSON.parse(a.getString("network_retry_intervals_json","{}")),e=a.getNumber("live_max_try_attempts_on_404",1),f=["404","503"];a.getBool("live_gracefully_handle_no_network",!1)&&f.push("0");a.getBool("live_gracefully_handle_410",!1)&&f.push("410");var g=b.error.getExtra().code;a.getBool("handle_mpd_null_error_codes",!1)&&(g=g!=null?g:null);d=d[g];if(b.isInitialMpdRequest)typeof d==="number"&&d>0&&b.retryAttemptCount<c&&(b.preventDefault(),b.retry(d));else if(g!=null&&f.indexOf(g)>-1)switch(g){case"410":b.preventDefault();b.cancelMpdUpdates();break;case"404":e<b.consecutiveFailuresForErrorCode&&(b.preventDefault(),b.retry());break;case"503":case"0":b.preventDefault();b.retry();break;default:break}else g===null&&a.getBool("handle_mpd_null_error_codes",!1)&&(b.preventDefault(),b.retry())}f["default"]=a}),66);
__d("handleStreamErrorEvent",[],(function(a,b,c,d,e,f){"use strict";var g=[0,1,1,2,3,5,8,13,21,34];function a(a,b){var c=b.code,d=JSON.parse(a.getString("network_end_broadcasts_json","[]"));if(d.includes(c)){b.endStream();return}d=JSON.parse(a.getString("network_skip_json","[]"));if(d.includes(c)){b.retry();return}d=a.getBool("back_off_pdash_504_retry",!0)?g[b.retryAttemptCount]:0;var e=JSON.parse(a.getString("network_reload_mpd_json","[]"));if(a.getBool("back_off_pdash_504_retry",!0)&&d==null){b.failPlayback();return}if(d!=null&&e.includes(c)){b.retryWithTimeout(d*1e3);return}e=JSON.parse(a.getString("network_retry_intervals_json",'{"0": 1000, "404": 2000, "502": 1000, "503": 1000, "504": 1000}'));d=e[c];if(d){b.retryWithTimeout(d);return}b.failPlayback()}f["default"]=a}),66);
__d("moz-player/drm/OzDrmUtils",[],(function(a,b,c,d,e,f){"use strict";a=function(a){return Uint8Array.from(window.atob(a),function(a){return a.charCodeAt(0)})};b=function(a){return window.btoa(String.fromCharCode.apply(null,new Uint8Array(a)))};f.base64ToUint8Array=a;f.arrayBufferToBase64=b}),66);
__d("moz-player/drm/OzDrmManager",["moz-player/drm/OzDrmUtils","moz-player/loggings/OzLoggingUtils","moz-player/loggings/OzOperationLoggerBase","moz-player/shims/OzDOMEventListener","moz-player/shims/OzMaybeNativePromise","moz-player/shims/OzSubscriptionsHandler","moz-player/utils/OzError","moz-player/utils/OzErrorEmitter"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,e){var f=this;e===void 0&&(e=null);this.$1=null;this.$2=new Map();this.$4=!1;this.$6=new(c("moz-player/shims/OzSubscriptionsHandler"))();this.$7=new(c("moz-player/utils/OzErrorEmitter"))();this.$8=!1;this.$9=null;this.$10=0;this.$11=null;this.$12=[];this.$13=null;this.$14=[];this.$17=function(a){var b;b=(b=(b=f.$1)==null?void 0:b.maxStartEMEAttempts)!=null?b:-1;f.$10<b?f.$18():f.$16(f.$15(a))};this.addProvider=function(a){f.$2.set(a.getSchemeId(),a)};this.parseContentProtectionForRepresentation=function(a){if(!a.ContentProtection)return null;var b=[];for(var c=0;c<a.ContentProtection.length;c++){var e=a.ContentProtection[c],g=e.$.schemeIdUri;g=f.getProviderForSchemeId(g);if(g){var h=g.getInitDatas();if(h.length==0&&e["cenc:pssh"]&&e["cenc:pssh"].length===1){e=e["cenc:pssh"][0]._;e=d("moz-player/drm/OzDrmUtils").base64ToUint8Array(e.replace(/-/g,"+").replace(/_/g,"/"));h=[{data:e,type:"cenc"}];g.setInitDatas(h)}b.push({provider:g,initDatas:h})}}return b};this.$24=function(a){a instanceof c("moz-player/loggings/OzOperationLoggerBase")&&a.getError()&&a.setResult("failed")};this.$21=function(a){if(f.$4)return c("moz-player/shims/OzMaybeNativePromise").reject();var b=f.$5.mediaKeys!=null?c("moz-player/shims/OzMaybeNativePromise").resolve(f.$5.mediaKeys):a.createMediaKeys();return d("moz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(b.then(function(b){return{mediaKeySystemAccess:a,mediaKeys:b}}),f.$3,"drm_create_media_keys",function(){},f.$24)};this.$22=function(a){if(f.$4)return c("moz-player/shims/OzMaybeNativePromise").reject();var b=a.mediaKeySystemAccess,e=a.mediaKeys;if(!e)throw new(c("moz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:"No mediaKeys for mediaKeySystemAccess"});a=f.$5.setMediaKeys(e).then(function(){if(f.$4)return c("moz-player/shims/OzMaybeNativePromise").reject();var a=Array.from(f.$2.values()).find(function(a){return a.getKeySystem()===b.keySystem});if(!a)throw new(c("moz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:"Can't find OzDrmProvider for keySystem "+b.keySystem});var d=a.getServerCertificate();return d?e.setServerCertificate(d).then(function(){return{mediaKeySystemAccess:b,mediaKeys:e,provider:a}}):{mediaKeys:e,provider:a}});return d("moz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a,f.$3,"drm_set_media_keys",function(){},f.$24)};this.$23=function(a){var b=a.mediaKeys,e=a.provider;a=e.getInitDatas();if(a.length===0){f.$6.addSubscriptions(c("moz-player/shims/OzDOMEventListener").listenDOMEvent(f.$5,"encrypted",function(a){f.$25(b,e,a)["catch"](f.$17)}));return c("moz-player/shims/OzMaybeNativePromise").resolve([])}a=a.map(function(a){return f.$25(b,e,{initData:a.data,initDataType:a.type})});return d("moz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(c("moz-player/shims/OzMaybeNativePromise").all(a),f.$3,"drm_request_license",function(){},f.$24)};this.$5=b;this.$1=e;this.$3=a.cloneContext().setType("drm_manager")}var b=a.prototype;b.hasContentProtections=function(){return this.$9};b.onError=function(a){return this.$7.onError(a)};b.$15=function(a){var b;a instanceof c("moz-player/utils/OzError")?b=a:a instanceof Error?b=new(c("moz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:a.message,extra:{originalError:a}}):a!=null&&typeof a.message==="string"?b=new(c("moz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:a.message,extra:{}}):b=new(c("moz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:"Unknown DRM error",extra:{}});return b};b.$16=function(a){this.$7.emitError(a)};b.getProviderForSchemeId=function(a){return this.$2.get(a)};b.$18=function(){try{this.$8=!1,this.startEME(this.$11,this.$12,this.$13,this.$14)}catch(a){this.$16(new(c("moz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:"Restart EME failed with: "+(a?a.toString():"null"),extra:{}}))}};b.startEME=function(a,b,d,e){var f=this;if(this.$8)return;this.$8=!0;this.$10+=1;this.$11=a;this.$12=b;this.$13=d;this.$14=e;var g=new Map();this.$19(d,e,g,"audio");this.$19(a,b,g,"video");var h;g.forEach(function(a,b){!h?h=f.$20(b,a):h=h["catch"](function(){return f.$20(b,a)})});if(!h){this.$9=!1;return}this.$9=!0;var i=this.$3.getOperationLogger("drm_setup").start();h.then(this.$21.bind(this)).then(this.$22.bind(this)).then(this.$23.bind(this)).then(function(){return i.log()},function(a){a=a!=null?f.$15(a):new(c("moz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:"Unknown DRM setup error",extra:{}});f.$16(a);i.setResult("failed").setError(a).log()})};b.$19=function(a,b,c,d){var e=this;b.forEach(function(b){var f;a&&a.ContentProtection?f=e.parseContentProtectionForRepresentation(a):f=b.getCustomField("drmProtections");var g=b.getMimeCodecs();f!=null&&f.forEach(function(a){a=a.provider;c.has(a.getKeySystem())||c.set(a.getKeySystem(),{audioCapabilities:new Map(),videoCapabilities:new Map(),distinctiveIdentifier:a.getRequireDistinctiveIdentifier(),persistentState:a.getRequirePersistentState(),sessionTypes:a.getDrmSessionTypes(),initDataTypes:a.getInitDataTypes()});var b=c.get(a.getKeySystem());d==="audio"&&!b.audioCapabilities.has(g)&&b.audioCapabilities.set(g,{contentType:g,robustness:a.getAudioRobustness()});d==="video"&&!b.videoCapabilities.has(g)&&b.videoCapabilities.set(g,{contentType:g,robustness:a.getVideoRobustness()})})})};b.destroy=function(){this.$6.release(),this.$4=!0};b.$20=function(a,b){b={audioCapabilities:Array.from(b.audioCapabilities.values()),videoCapabilities:Array.from(b.videoCapabilities.values()),distinctiveIdentifier:b.distinctiveIdentifier,persistentState:b.persistentState,sessionTypes:b.sessionTypes,initDataTypes:b.initDataTypes};return d("moz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(window.navigator.requestMediaKeySystemAccess(a,[b]),this.$3,"drm_request_media_key_system_access",function(){},this.$24)};b.$25=function(a,b,d){var e=this,f=a.createSession();this.$6.addSubscriptions(c("moz-player/shims/OzDOMEventListener").listenDOMEvent(f,"message",function(a){e.$26(f,b,a)["catch"](e.$17)}),c("moz-player/shims/OzDOMEventListener").listenDOMEvent(f,"keystatuseschange",function(a){e.$27(f)["catch"](e.$17)}));return f.generateRequest(d.initDataType,d.initData)};b.$26=function(a,b,d){var e=this;d=b.getLicenseRequestInfo(d.message.slice(0));return window.fetch(d.url,d).then(function(a){return a.arrayBuffer()}).then(function(d){d=new Uint8Array(d);d=b.parseLicenseResponse(d);d==null||d.byteLength===0?e.$16(new(c("moz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:"No license for "+b.getKeySystem(),extra:{}})):a.update(d)})};b.$27=function(a){return a.expiration<Date.now()?a.close():c("moz-player/shims/OzMaybeNativePromise").resolve()};return a}();g.OzDrmManager=a}),98);
__d("moz-player/loggings/OzDevConsolePerfLogger",["moz-player/loggings/OzOperationLoggerBase","moz-player/loggings/OzPerfLoggerProviderBase"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a;for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];(a=console).debug.apply(a,["[oz]"].concat(c))}function i(){var a;for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];(a=console).error.apply(a,["[oz]"].concat(c))}function j(a,b){return Math.floor(a).toString().padStart(b,"0")}function k(a,b){b===void 0&&(b=null);var c=function(a){return j(a.getHours(),2)+":"+j(a.getMinutes(),2)+":"+j(a.getSeconds(),2)+" "+j(a.getMilliseconds(),3)},d=b?b-a:0;return"["+c(a)+(b?" - "+c(b):"")+" ("+d+" ms)]"}function l(a){return a==="failed"?i:h}function m(a){return!a?null:a.toFixed(2)}a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.createOperationLogger=function(a){return new n(a)};c.createLoggerProvider=function(){return new b()};return b}(c("moz-player/loggings/OzPerfLoggerProviderBase"));var n=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.log=function(){b.prototype.log.call(this);var a=this.getClientTimeBegin()||0,c=this.getClientTimeEnd();c=c?new Date(c):null;var d=this.getResult()||"success",e=this.getType(),f=this.getInitiator(),g=this.getResource(),h=m(this.getSegmentStartTime()),i=m(this.getSegmentEndTime());l(d)("["+d+"]",this.getOperationName()+": "+k(new Date(a),c),e?"["+e+"]":"",h&&i?"[segment time range: "+h+" - "+i+"]":"",f||"",g||"")};return a}(c("moz-player/loggings/OzOperationLoggerBase"));g.OzDevConsolePerfLoggerProvider=a;g.OzDevConsoleOperationLogger=n}),98);
__d("moz-player/loggings/OzOperationLoggerObserver",["moz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$1=new(c("moz-player/shims/OzSubscriptionsHandler"))()}var b=a.prototype;b.observe=function(a,b){var c;a=a.map(function(a){var c=a.setOperationLoggedListener(function(a){var c=a.getClientTimeBegin()||0,d=a.getClientTimeEnd()||0;b.getOperationLogger(a.getOperationName()).setClientTimeBegin(c).setClientTimeDuration(d-c).setClientTimeEnd(d).setLength(a.getLength()).setResult(a.getResult()||"success").setInitiator(a.getInitiator()).setType(a.getType()).log()});a.activate();return c});(c=this.$1).addSubscriptions.apply(c,a)};b.destroy=function(){this.$1.release()};return a}();g["default"]=a}),98);
__d("moz-player/manifests/OzRepresentation",["moz-player/shims/ozvariant","moz-player/utils/OzError"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,d,e,f,g,h){this.$1=a,this.$6=b,this.$2=c,this.$3=d,this.$4=e,this.$5=f,this.$7=g,this.$8=h}var b=a.prototype;b.getID=function(){return this.$6};b.getBandwidth=function(){return this.$5};b.getMimeCodecs=function(){return this.$2};b.getQualityLabel=function(){return this.$6};b.getInitSegment=function(){return this.$3};b.getCustomFieldFirstSegment=function(){return this.$7};b.getCustomField=function(a){if(this.$8==null||!this.$8[a])throw new(c("moz-player/utils/OzError"))({type:"OZ_REPRESENTATION_PARSER",description:"Custom field "+a+" is not specified by caller",extra:{code:"OZ_RP-8"}});a=this.$8[a];try{return a(this.$1)}catch(a){return null}};b.updateWith=function(b){b instanceof a||c("moz-player/shims/ozvariant")(0,229),this.$4.updateWith(b.$4)};b.getSegmentByTime=function(a){return this.$4.getSegmentByTime(a)};b.getSegment=function(a){return this.$4.getSegment(a)};b.getPredictedSegmentAfter=function(a){return this.$4.getPredictedSegmentAfter(a)};b.canPredict=function(){return this.$4.canPredict()};b.getSegmentAfter=function(a){return this.$4.getSegmentAfter(a)};b.isEndingSegment=function(a){return this.$4.isEndingSegment(a)};b.addUpdateListener=function(a){return this.$4.addUpdateListener(a)};b.getTimeRanges=function(){return this.$4.getTimeRanges()};b.blockTimeRange=function(a){this.$4.blockTimeRange(a)};b.getEndingSegment=function(){return this.$4.getEndingSegment()};b.forceParseIfNotParsed=function(){return this.$4.forceParseIfNotParsed()};return a}();g["default"]=a}),98);
__d("moz-player/manifests/OzVideoRepresentation",["moz-player/manifests/OzRepresentation"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j,k){c=a.call(this,b,c,d,e,f,g,h,i)||this;c.$OzVideoRepresentation5=null;c.$OzVideoRepresentation1=j;c.$OzVideoRepresentation2=k;c.$OzVideoRepresentation4=i;c.$OzVideoRepresentation3=b;return c}var c=b.prototype;c.getWidth=function(){return this.$OzVideoRepresentation1};c.getHeight=function(){return this.$OzVideoRepresentation2};c.getQualityLabel=function(){if(this.$OzVideoRepresentation5!=null)return this.$OzVideoRepresentation5;var a=this.$OzVideoRepresentation4?this.$OzVideoRepresentation4.qualityLabel:null;a&&(this.$OzVideoRepresentation5=a(this.$OzVideoRepresentation3));(this.$OzVideoRepresentation5==null||this.$OzVideoRepresentation5=="")&&(this.$OzVideoRepresentation5=this.getHeight().toString()+"p");return this.$OzVideoRepresentation5||""};return b}(c("moz-player/manifests/OzRepresentation"));g["default"]=a}),98);
__d("moz-player/media_source/OzMediaSeekableRangeManager",["moz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){var d=this;this.$5=function(){var a=d.$2;if(!a)return;a=a.getTimeRanges();if(!a.length)return;a=a[a.length-1];var b=d.$1.getMediaSource();d.$4.getBool("update_media_source_duration")&&(b.duration===Infinity||b.duration<a.endTime||isNaN(b.duration))&&d.$1.updateDuration(a.endTime)};this.$1=a;this.$3=new(c("moz-player/shims/OzSubscriptionsHandler"))();this.$4=b;this.$5()}var b=a.prototype;b.setTimeRangeProvider=function(a){this.$3.release(),this.$3.engage(),this.$3.addSubscriptions(a.addUpdateListener(this.$5)),this.$2=a};b.listenToMediaStreamInitAppended=function(a){var b=this;return a.addListener("initAppended",function(){if(b.$4.getBool("update_duration_when_init_appended")){var a=b.$1.getMediaSource();(a.duration===Infinity||isNaN(a.duration))&&b.$5()}})};b.destroy=function(){this.$3.release()};return a}();g["default"]=a}),98);
__d("moz-player/networks/OzCreateErrorStream",["moz-player/shims/OzReadableStream"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return new(c("moz-player/shims/OzReadableStream"))({pull:function(b){b.error(a)}})}g["default"]=a}),98);
__d("moz-player/utils/arrayBuffer2OzReadableStream",["moz-player/shims/OzReadableStream"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return new(c("moz-player/shims/OzReadableStream"))({start:function(b){var c=new Uint8Array(a);b.enqueue(c);b.close()}})}g["default"]=a}),98);
__d("moz-player/utils/processFetchResponse",["moz-player/utils/arrayBuffer2OzReadableStream","moz-player/utils/maybeConvertReadableStreamToOzReadableStream"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.body,d=a.ok,e=a.status,f=a.headers;return b!=null?{ok:d,status:e,headers:f,body:c("moz-player/utils/maybeConvertReadableStreamToOzReadableStream")(b)}:a.arrayBuffer().then(function(a){return{ok:d,status:e,headers:f,body:c("moz-player/utils/arrayBuffer2OzReadableStream")(a)}})}g["default"]=a}),98);
__d("moz-player/networks/OzFetch",["moz-player/shims/ozClearTimeout","moz-player/shims/ozSetTimeoutAcrossTransitions","moz-player/utils/processFetchResponse"],(function(a,b,c,d,e,f,g){"use strict";var h=window.fetch;function a(a,b,d){if(!h)throw new Error("fetch api is missing");var e=null;if("AbortController"in window&&d&&d.networkTimeoutMs!=null&&d.networkTimeoutMs!=0){var f=new AbortController();e=c("moz-player/shims/ozSetTimeoutAcrossTransitions")(function(){return f.abort()},d.networkTimeoutMs);b.signal=f.signal}d=h(a,b).then(function(a){c("moz-player/shims/ozClearTimeout")(e);return c("moz-player/utils/processFetchResponse")(a)});return d}g["default"]=a}),98);
__d("moz-player/networks/OzFetchWithCache",["moz-player/networks/OzFetch","moz-player/utils/OzError","moz-player/utils/arrayBuffer2OzReadableStream","moz-player/utils/processFetchResponse"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d,e,f,g,h,i){e===void 0&&(e=null);g===void 0&&(g=null);i===void 0&&(i="DISABLE_CACHE");if(!window||!window.fetch)throw new(c("moz-player/utils/OzError"))({type:"OZ_FETCH",description:"fetch api is missing"});var j=e!=null?e:c("moz-player/networks/OzFetch");e=a.getBool("use_segment_request_cache")&&i==="ENABLE_CACHE"?h.get(b):null;g=g?g.getCacheValue(b):null;e=e!=null?e:g;var k=!1;e?(i==="ENABLE_CACHE"&&h.set(b,e),k=!0,g=e.then(function(a){if(a.initiator==="FETCH")return c("moz-player/utils/processFetchResponse")(a.response);else if(a.initiator==="XHR_REQUEST"){var b=c("moz-player/utils/arrayBuffer2OzReadableStream")(a.response);return{body:b,status:200,headers:null,ok:!0}}else throw new(c("moz-player/utils/OzError"))({type:"OZ_UNEXPECTED_CACHE_INITIATOR",description:"Unable to handle request initiator: "+a.initiator})})["catch"](function(c){if(a.getBool("retry_fetch_on_prefetch_error"))return j(b,d);else{if(a.getBool("fix_prefetch_xhr_http_status")&&k&&typeof c.status==="number"&&c.status>=400&&c.status<600)return{body:null,status:c.status,headers:null,ok:!1};throw new TypeError()}})):g=j(b,d,f);return{promise:g,retrievedFromCache:k}}g["default"]=a}),98);
__d("moz-player/shims/OzWritableStream",["cr:927623"],(function(a,b,c,d,e,f,g){"use strict";b("cr:927623")&&(b("cr:927623").WritableStream.isPolyfilled=!0);a=b("cr:927623")?b("cr:927623").WritableStream:window.WritableStream;c=a;g["default"]=c}),98);
__d("moz-player/networks/OzTransformStream",["moz-player/shims/OzEventEmitter","moz-player/shims/OzReadableStream","moz-player/shims/OzWritableStream","moz-player/utils/OzError"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var d;d=a.call(this)||this;d.$OzTransformStream3=function(a){return a};b=b||{};b=b.errorTransform;b==null&&(b=d.$OzTransformStream3);var e=b||d.$OzTransformStream3;d.writable=new(c("moz-player/shims/OzWritableStream"))({start:function(a){d.$OzTransformStream2=a},write:function(a){d.emit("writableWrite",a);try{d.onDataWritten(a)}catch(a){d.$OzTransformStream1.error(new(c("moz-player/utils/OzError"))({type:"OZ_STREAM",description:"Error from write handler: "+d.constructor.name,extra:{code:"OZ_S-0",originalError:a}}))}d.$OzTransformStream1.enqueue(a)},close:function(){d.emit("writableClose");try{d.onClose()}catch(a){d.$OzTransformStream1.error(new(c("moz-player/utils/OzError"))({type:"OZ_STREAM",description:"Error from close handler: "+d.constructor.name,extra:{code:"OZ_S-1",originalError:a}}))}d.$OzTransformStream1.close()},abort:function(a){a=e(a);d.$OzTransformStream1.error(a)}});d.readable=new(c("moz-player/shims/OzReadableStream"))({start:function(a){d.$OzTransformStream1=a},cancel:function(a){d.emit("readableCancel",a),d.$OzTransformStream2.error(a)}});return d}var d=b.prototype;d.onDataWritten=function(a){};d.onClose=function(){};return b}(c("moz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("moz-player/networks/createNetworkError",["moz-player/utils/OzError"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d,e,f){return new(c("moz-player/utils/OzError"))({type:"OZ_NETWORK",description:f,extra:{originalError:a,code:b.toString(),headers:d,url:e}})}g["default"]=a}),98);
__d("moz-player/networks/OzNetworkRequestStream",["moz-player/networks/OzCreateErrorStream","moz-player/networks/OzFetchWithCache","moz-player/networks/OzTransformStream","moz-player/networks/createNetworkError","moz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,d,e,f,g,h,i){e===void 0&&(e=null),f===void 0&&(f=null),g===void 0&&(g=null),i===void 0&&(i="DISABLE_CACHE"),this.$6=!1,this.$1=b,this.$2=c,this.$3=d,this.$8=e||[],this.$7=f,this.$9=g,this.$11=a,this.$10=h,this.$12=i}var b=a.prototype;b.startStream=function(a){var b=this;a=this.$3.createRequestParam(this.$1,a);var d=a.uri;a=a.http;var e=d.toString();this.$4=e;d=c("moz-player/networks/OzFetchWithCache")(this.$11,e,a,this.$7,this.$2,this.$9,this.$10,this.$12);a=d.promise;d=d.retrievedFromCache;this.$6=d;return a.then(function(a){var d=[];for(var f=0;f<b.$8.length;f++)try{var g=b.$8[f].onResponse(a,e);g&&d.push(g)}catch(a){return c("moz-player/networks/OzCreateErrorStream")(a)}g=a.body;f=a.headers;var h=a.ok,i=a.status;if(!h)return c("moz-player/networks/OzCreateErrorStream")(c("moz-player/networks/createNetworkError")(new Error("HTTP status not OK"),i,f,e,"HTTP error."));g.getReader||c("moz-player/shims/ozvariant")(0,3287);h=g;b.$5=a;for(var i=0;i<d.length;i++)h=h.pipeThrough(d[i]);if(!b.$11.getBool("throw_network_error_during_stream"))return h;f=new(c("moz-player/networks/OzTransformStream"))({errorTransform:function(a){return a instanceof TypeError?c("moz-player/networks/createNetworkError")(a,0,null,e,"Network failure."):a}});return h.pipeThrough(f)},function(a){var d=[];for(var f=0;f<b.$8.length;f++)try{var g=b.$8[f].onError(a,e);g&&d.push(g)}catch(a){return c("moz-player/networks/OzCreateErrorStream")(a)}if(a instanceof TypeError){g=c("moz-player/networks/OzCreateErrorStream")(c("moz-player/networks/createNetworkError")(a,0,null,e,"Network failure."));for(var f=0;f<d.length;f++)g=g.pipeThrough(d[f]);return g}throw a})["catch"](function(a){return a.name==="AbortError"?c("moz-player/networks/OzCreateErrorStream")({type:a.name,status:a.code,url:e,message:a}):c("moz-player/networks/OzCreateErrorStream")({type:"stream_processing",status:0,url:e,message:"Stream processing error. "+a})})};b.getLastRequestUrl=function(){return this.$4};b.getLastResponse=function(){return this.$5};b.retrievedFromCache=function(){return this.$6};return a}();g["default"]=a}),98);
__d("moz-player/manifests/OzByteRange",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return a.startByte===b.startByte}function b(a,b){return b.endByte===null?!1:a.startByte===b.endByte+1}function c(a,b){return a.startByte<b.startByte?!1:b.endByte==null||b.endByte>=a.startByte}function d(a,b){a=a;b=b;if(b.startByte<a.startByte){var c=a;a=b;b=c}if(a.endByte==null)return{startByte:a.startByte,endByte:null};if(b.startByte>a.endByte+1)return null;c=b.endByte==null||b.endByte>a.endByte?b.endByte:a.endByte;return{startByte:a.startByte,endByte:c}}function e(a,b){if(b.endByte==null)return null;if(a.startByte>b.endByte)return{startByte:a.startByte,endByte:a.endByte};return a.endByte!=null&&a.endByte<=b.endByte?null:{startByte:b.endByte+1,endByte:a.endByte}}function g(a){return a.endByte==null?null:a.endByte-a.startByte+1}f.startsAtSame=a;f.startsImmediateAfter=b;f.startsDuring=c;f.union=d;f.disjoinAfter=e;f.getLength=g}),66);
__d("moz-player/networks/OzProducerInterruptedError",[],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(babelHelpers.wrapNativeSuper(Error));f["default"]=a}),66);
__d("moz-player/networks/OzDeferredBuffer",["moz-player/networks/OzProducerInterruptedError","moz-player/shims/OzDeferred","moz-player/shims/OzMaybeNativePromise"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){a===void 0&&(a={});this.$2=[];this.$3=!1;this.$5=0;a=a;a=a.disableArrayShift;this.$1=!!a}var b=a.prototype;b.produce=function(a){this.$6(a)};b.signalProducerInterruption=function(){this.$6(new(c("moz-player/networks/OzProducerInterruptedError"))("producer interrupted"))};b.consume=function(a){var b=this;if(this.$3)throw new Error("A buffer can only be consumed by one client at a time");this.$3=!0;var d=c("moz-player/shims/OzMaybeNativePromise").resolve();this.isEmpty()&&(this.$4=new(c("moz-player/shims/OzDeferred"))(c("moz-player/shims/OzMaybeNativePromise")),d=this.$4.getPromise());return d.then(function(){if(b.$1){if(b.$2[b.$5]===void 0)throw new Error("buffer has no value at position "+b.$5)}else if(b.$2.length===0)throw new Error("buffer length must not be 0");b.$4=null;b.$3=!1;var c=b.$1?b.$7(a):b.$8(a);if(c instanceof Uint8Array)return c;throw c})};b.$6=function(a){this.$2.push(a),this.$4&&this.$4.resolve()};b.$7=function(a){var b=this.$2[this.$5];if(b===void 0)return new Uint8Array([]);b=b;if(!(b instanceof Uint8Array)){this.$2[this.$5]=void 0;this.$5++;return b}if(a!==void 0&&b.length>a){var c=b.slice(a);b=b.slice(0,a);this.$2[this.$5]=c}else this.$2[this.$5]=void 0,this.$5++;return b};b.$8=function(a){if(this.$2.length===0)return new Uint8Array([]);var b=this.$2[0];if(!(b instanceof Uint8Array)){this.$2.shift();return b}if(a!==void 0&&b.length>a){var c=b.slice(a);b=b.slice(0,a);this.$2[0]=c}else this.$2.shift();return b};b.isEmpty=function(){return this.$1?this.$2[this.$5]===void 0:this.$2.length===0};return a}();g["default"]=a}),98);
__d("moz-player/utils/ozPipeErrorTo",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){try{a.error(b)}catch(a){}}f["default"]=a}),66);
__d("moz-player/networks/OzPausableRangeStream",["moz-player/manifests/OzByteRange","moz-player/networks/OzDeferredBuffer","moz-player/shims/OzDeferred","moz-player/shims/OzMaybeNativePromise","moz-player/utils/ozPipeErrorTo"],(function(a,b,c,d,e,f,g){"use strict";function h(){return new Error("Upstream has an inconsistent range")}var i=function(){function a(){this.$1=0}var b=a.prototype;b.setBytesToSkip=function(a){this.$1=a};b.setBytesSkipped=function(a){this.$1-=a};b.getBytesToSkip=function(){return this.$1};b.hasMoreBytesToSkip=function(){return this.$1>0};return a}();a=function(){function a(a,b,d,e,f){var g=this;this.$5=!1;this.$7=0;this.$8=0;this.$13=!1;this.$14=0;this.$15=new i();this.$16=!1;this.$17=!1;this.$18=!1;this.$19=a;this.$20=b;this.$1=d;this.$2=e;a=f||{};b=a.fixStreamingUndefinedEndByte;d=a.disableDeferredBufferArrayShift;e=a.enablePausableStreamResumeFromStartDangerously;f=a.fixPausePreReadableStream;a=a.throwErrorWhenAborted;this.$11=!!b;this.$16=!!e;this.$17=!!f;this.$18=!!a;this.$3=new(c("moz-player/networks/OzDeferredBuffer"))({disableArrayShift:!!d});this.$6=new this.$19({start:function(a){g.$10=a},pull:function(a){if((g.$11&&g.$1.endByte===null&&g.$5||g.$7===g.$21())&&g.$3.isEmpty()){a.close();return c("moz-player/shims/OzMaybeNativePromise").resolve()}var b=function b(){var d=g.$15.hasMoreBytesToSkip()?g.$15.getBytesToSkip():void 0;return g.$3.consume(d).then(function(d){if(g.$15.hasMoreBytesToSkip()){g.$15.setBytesSkipped(d.length);return b()}g.$7+=d.length;var e=g.$21();e!==null&&g.$7>(e||0)&&c("moz-player/utils/ozPipeErrorTo")(g.$10,h());a.enqueue(d)})["catch"](function(a){if(a==="skip_buffered_bytes"){g.$15.setBytesToSkip(g.$7);return b()}throw a})};return b()},cancel:function(a){g.$12&&g.$12.resolve("stream_cancelled"),c("moz-player/utils/ozPipeErrorTo")(g.$9,a)}});this.$22()}var b=a.prototype;b.$21=function(){var a=this.$1,b=a.startByte;a=a.endByte;return a!=null?a-b+1:null};b.$22=function(){var a=this;this.$4=new this.$20({start:function(b){a.$9=b},write:function(b){a.$3.produce(b),a.$8+=b.length},close:function(){a.$5=!0;var b=a.$1,d=b.endByte;b=b.startByte;a.$11&&d===null&&a.$3.produce(new Uint8Array([]));d!==null&&a.$8!==(d||0)-b+1&&c("moz-player/utils/ozPipeErrorTo")(a.$10,h())},abort:function(b){a.$12&&(a.$18?a.$12.reject(b):a.$12.resolve("stream_aborted")),c("moz-player/utils/ozPipeErrorTo")(a.$10,b)}})};b.getStream=function(){return this.$6};b.startStream=function(){var b=this;this.$13=!0;var d={startByte:this.$1.startByte,endByte:this.$1.endByte};!this.$16?d.startByte+=this.$8:this.$8&&(this.$3.produce("skip_buffered_bytes"),this.$8=0);var e=this.$4;return this.$2.startStream(d).then(function(d){d.pipeTo(b.$17?e:b.$4).then(function(){b.$12&&b.$12.resolve("stream_done")})["catch"](function(c){b.$12&&!b.$12.isSettled()&&(b.$17&&c===a.STREAM_PAUSED?b.$12.resolve("stream_paused"):b.$12.reject(c))});b.$12=new(c("moz-player/shims/OzDeferred"))(c("moz-player/shims/OzMaybeNativePromise"));return{statusPromise:b.$12.getPromise()}})};b.pauseStream=function(){c("moz-player/utils/ozPipeErrorTo")(this.$9,a.STREAM_PAUSED),this.$12&&this.$12.resolve("stream_paused"),this.$22()};b.getByteRange=function(){return this.$1};b.getBytesStreamed=function(){return this.$7};b.tryConcatByteRange=function(a){if(this.$13||!d("moz-player/manifests/OzByteRange").startsImmediateAfter(a,this.$1))return!1;this.$1.endByte=a.endByte;return!0};return a}();a.STREAM_PAUSED="streamPaused";g["default"]=a}),98);
__d("moz-player/shims/OzURI",["URI"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=new(c("URI"))(a)}var b=a.prototype;b.addQueryData=function(a,b){this.$1.addQueryData(a,b);return this};b.getQueryData=function(){return this.$1.getQueryData()};b.getDomain=function(){return this.$1.getDomain()};b.toString=function(){return this.$1.toString()};return a}();g["default"]=a}),98);
__d("moz-player/networks/RequestParamCreator",["moz-player/shims/OzURI"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.createRequestParam=function(a,b){var d=new(c("moz-player/shims/OzURI"))(a.toString());if(b){a=b.startByte;var e=b.endByte;a===0&&e==null||(d=d.addQueryData({bytestart:b.startByte}),e!=null&&(d=d.addQueryData({byteend:e})))}if(this.$2){var f=this.$2(d);f&&Object.keys(f).every(function(a){var b=f[a];d=d.addQueryData(a,b)})}a=this.$1&&this.$1(d)?"include":"same-origin";return{uri:d,http:{credentials:a}}};return a}();g["default"]=a}),98);
__d("moz-player/networks/getOzSegmentStreamableRange",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(!a.length)return null;var b=a[0].getURI().toString(),c=a[0].getByteRange();if(!c)return null;var d=c;for(var e=1;e<a.length;e++){var f=a[e];if(f.getURI().toString()!==b)return null;f=f.getByteRange();if(!d||!f)return null;if(d.endByte===null||f.startByte!==d.endByte+1)return null;d=f}return{startByte:c.startByte,endByte:d.endByte}}f["default"]=a}),66);
__d("moz-player/shims/OzNetworkDiagnostics",[],(function(a,b,c,d,e,f){"use strict";a={getResponseTimeMs:function(a){return a?parseInt(a.get("x-fb-response-time-ms"),10):null}};b=a;f["default"]=b}),66);
__d("moz-player/utils/OzResourceTimingUtils",[],(function(a,b,c,d,e,f){"use strict";a=function(a){if(!performance.getEntriesByName)return null;a=performance.getEntriesByName(a,"resource");return a.reduce(function(a,b){if(a==null)return b;return typeof b.responseEnd==="number"&&typeof b.responseStart==="number"&&typeof b.startTime==="number"&&typeof a.responseEnd==="number"&&typeof a.responseStart==="number"&&typeof a.requestStart==="number"&&typeof a.startTime==="number"?b.responseEnd<a.responseEnd?a:b:null},null)};f.getLatestResourceTimingEntry=a}),66);
__d("moz-player/utils/OzNetworkRequestLoggingUtils",["moz-player/shims/OzNetworkDiagnostics","moz-player/utils/OzResourceTimingUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){return a?parseInt(a.get("content-length"),10):null},i=function(a){return a?a.get("x-fb-edge-hit"):null},j=function(a){return a?a.get("x-fb-origin-hit"):null},k=function(a){return a?parseInt(a.get("x-fb-dynamic-latest-segment-id"),10):null},l=function(a,b){b=d("moz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry(b);b&&a.setTimeToFirstByte(Math.round(b.responseStart-b.startTime)).setTimeToLastByte(Math.round(b.responseEnd-b.startTime)).setTimeToRequestStart(Math.round(b.requestStart-b.startTime))};a=function(a,b,d,e,f,g,m){e.length&&a.setSegmentCount(e.length),b&&l(a,b),a.setResource(b||null).setInitiator(d?"prefetch":"fetch").setTimeToRequestSent(Math.round(Math.floor(f))).setLiveheadSeqNumHeader(k(m==null?void 0:m.headers)).setContentLengthHeader(h(m==null?void 0:m.headers)).setEdgeHitHeader(i(m==null?void 0:m.headers)).setOriginHitHeader(j(m==null?void 0:m.headers)).setResponseTimeMsHeader(c("moz-player/shims/OzNetworkDiagnostics").getResponseTimeMs(m==null?void 0:m.headers)).setCode(m==null?void 0:m.status).setLength(g)};g.setPerformanceLoggingAttributes=l;g.setFetchStreamLoggingAttributes=a}),98);
__d("moz-player/networks/OzNetworkManager",["moz-player/loggings/OzLoggingUtils","moz-player/networks/OzNetworkRequestStream","moz-player/networks/OzPausableRangeStream","moz-player/networks/RequestParamCreator","moz-player/networks/getOzSegmentStreamableRange","moz-player/shims/OzReadableStream","moz-player/shims/OzURI","moz-player/shims/OzWritableStream","moz-player/shims/ozvariant","moz-player/utils/OzError","moz-player/utils/OzNetworkRequestLoggingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e,f,g){b===void 0&&(b=null),d===void 0&&(d=null),e===void 0&&(e=null),this.$2=a,this.$6=f,this.$7=g,this.$1=new(c("moz-player/networks/RequestParamCreator"))(this.$6,this.$7),this.$3=b,this.$4=d,this.$5=e,this.$8=new Map()}var b=a.prototype;b.destroy=function(){this.$8&&this.$8.clear()};b.request=function(a,b,d,e){d===void 0&&(d=null);e===void 0&&(e="DISABLE_CACHE");a.length>0||c("moz-player/shims/ozvariant")(0,212);var f=c("moz-player/networks/getOzSegmentStreamableRange")(a)||{startByte:0,endByte:null};e=new(c("moz-player/networks/OzNetworkRequestStream"))(this.$2,a[0].getURI(),null,this.$1,this.$4,this.$5,this.$3,this.$8,e);return this.$9(f,e,b,d,a)};b.createPausableStream=function(a,b,d){a.length>0||c("moz-player/shims/ozvariant")(0,212);var e=c("moz-player/networks/getOzSegmentStreamableRange")(a)||{startByte:0,endByte:null},f=null,g=this.$2.getNumber("network_seg_timeout_ms");g>0&&(f={networkTimeoutMs:g});var h=new(c("moz-player/networks/OzNetworkRequestStream"))(this.$2,a[0].getURI(),f,this.$1,this.$4,this.$5,this.$3,this.$8);return{pausableStream:this.$10(e,h,b||null,d),loggingPayloads:{getRequestUrl:function(){return h.getLastRequestUrl()||null},isPrefetch:function(){return h.retrievedFromCache()},segments:a,getResponse:function(){return h.getLastResponse()}}}};b.requestRawUrl=function(a,b,d,e){e===void 0&&(e=null);b=new(c("moz-player/networks/OzNetworkRequestStream"))(this.$2,new(c("moz-player/shims/OzURI"))(a),d,this.$1,this.$4,this.$5,this.$3,this.$8);a={startByte:0,endByte:null};return this.$9(a,b,[],e)};b.$10=function(a,b,d,e){b=b;if(d!=null)for(var f=0;f<d.length;f++){var g=d[f];b=g(this.$2,b,e)}return new(c("moz-player/networks/OzPausableRangeStream"))(c("moz-player/shims/OzReadableStream"),c("moz-player/shims/OzWritableStream"),a,b,{fixStreamingUndefinedEndByte:!0,enablePausableStreamResumeFromStartDangerously:!0,fixPausePreReadableStream:!0,throwErrorWhenAborted:this.$2.getBool("pausable_stream_throws_error_when_aborted")})};b.$9=function(a,b,c,e,f){f===void 0&&(f=[]);var g=this.$10(a,b,c,e);a=g.startStream();var h=this.$11(a);e&&d("moz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(h,e,"fetch_stream",function(){},function(a){d("moz-player/utils/OzNetworkRequestLoggingUtils").setFetchStreamLoggingAttributes(a,b.getLastRequestUrl(),b.retrievedFromCache(),f,0,g.getBytesStreamed(),b.getLastResponse())});return{getStream:function(){return g.getStream()},cancel:function(){return g.pauseStream()},getStatusChangePromise:function(){return h}}};b.$11=function(a){var b=this;return a.then(function(a){a=a.statusPromise;return a.then(function(a){if(a==="stream_done"||!b.$2.getBool("enable_network_manager_error"))return"done";throw new(c("moz-player/utils/OzError"))({description:a,type:"OZ_NETWORK"})})})};a.getStreamableSegmentsRange=function(a){if(!a.length)return[];return!c("moz-player/networks/getOzSegmentStreamableRange")(a)?[a[0]]:a.slice(0)};return a}();g["default"]=a}),98);
__d("moz-player/manifests/Mpd",["moz-player/shims/OzEventEmitter"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h){var i;i=a.call(this)||this;i.$Mpd8=!1;i.$Mpd1=b;i.$Mpd4=f;i.$Mpd2=c;i.$Mpd3=d;i.$Mpd5=e;i.$Mpd6=g;i.$Mpd7=h;return i}var c=b.prototype;c.updateLocation=function(a){this.$Mpd5=a,this.$Mpd8=!0,this.emit("locationUpdated")};c.getLocation=function(){return this.$Mpd5};c.getMinimumUpdatePeriod=function(){return this.$Mpd4};c.getVideoRepresentations=function(){return this.$Mpd2};c.getAudioRepresentations=function(){return this.$Mpd3};c.getCustomField=function(a){var b=this.$Mpd6.get(a);if(!b)throw new Error("Custom parser not specified for field "+a);try{return b(this.$Mpd1)}catch(a){return null}};c.isStaticMpd=function(){return this.$Mpd7};c.updateWith=function(a){this.$Mpd8&&(this.$Mpd8=!1,this.$Mpd2.splice(0,this.$Mpd2.length),this.$Mpd3.splice(0,this.$Mpd3.length)),this.$Mpd1=a.$Mpd1,this.$Mpd9(this.$Mpd2,a.getVideoRepresentations()),this.$Mpd9(this.$Mpd3,a.getAudioRepresentations()),this.$Mpd7=a.isStaticMpd(),this.$Mpd4=a.getMinimumUpdatePeriod(),this.emit("updated")};c.blockTimeRange=function(a){this.$Mpd2.forEach(function(b){return b.blockTimeRange(a)}),this.$Mpd3.forEach(function(b){return b.blockTimeRange(a)})};c.unblockTimeRange=function(){this.blockTimeRange({startTime:0,endTime:0})};c.$Mpd9=function(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=!1;for(var f=0;f<a.length;f++){var g=a[f];if(d.getID()===g.getID()){g.updateWith(d);e=!0;break}}e||a.push(d)}};return b}(c("moz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("moz-player/manifests/OzAudioRepresentation",["moz-player/manifests/OzRepresentation"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i){d=a.call(this,b,c,d,e,f,g,h,i)||this;d.$OzAudioRepresentation1=b;d.$OzAudioRepresentation2=c;d.$OzAudioRepresentation3=g;return d}var c=b.prototype;c.getBitrateKbps=function(){var a=1024;return(this.$OzAudioRepresentation3/a).toFixed(1)+"Kbps"};c.getQualityLabel=function(){return this.$OzAudioRepresentation2};return b}(c("moz-player/manifests/OzRepresentation"));g["default"]=a}),98);
__d("moz-player/manifests/SegmentTemplateSegmentsContainer",["moz-player/shims/OzEventEmitter","moz-player/shims/OzURI","moz-player/shims/ozvariant","moz-player/utils/OzError","moz-player/utils/OzNumericalHelper","moz-player/utils/OzNumericalRangeUtil"],(function(a,b,c,d,e,f,g){"use strict";var h=1e-4;a=function(){function a(a,b,d,e,f){f===void 0&&(f=!1),this.$6=new(c("moz-player/shims/OzEventEmitter"))(),this.$9=null,this.$7=a,this.$1=b,this.$2=d,this.$3=e,this.$4=this.$10(this.$3),this.$5=f,this.$8=this.$7.getNumber("live_numerical_error_epsilon")}var b=a.prototype;b.getSegmentByTime=function(a){a=this.$7.getBool("live_query_time_in_range")?this.$11(a):a;a=a*this.$2;var b=null;for(var c=this.$3.length-1;c>=0;c--){var e=this.$3[c];if(d("moz-player/utils/OzNumericalHelper").lessThanOrEqual(e.t+e.d*(e.r+1),a,this.$8))break;b=e}if(b===null)return null;if(this.$7.getBool("live_no_segment_when_playhead_is_before_first_segment")&&d("moz-player/utils/OzNumericalHelper").greaterThan(b.t,a,this.$8))return null;e=Math.max(0,Math.floor((a-b.t+this.$8)/b.d));return this.$12(b,e)};b.getSegment=function(a){var b=0;a=a;while(a>=0&&b<this.$3.length){var c=this.$3[b];c=c.r;c=c+1;if(a>=c){a-=c;b++;continue}break}c=this.$3[b];return!c?null:this.$12(c,a)};b.getSegmentAfter=function(a){a=a.getTimeRange().endTime;return this.getSegmentByTime(a)};b.getPredictedSegmentAfter=function(a){return null};b.canPredict=function(){return!1};b.isEndingSegment=function(a){if(!this.$3||!this.$3.length||!this.$5)return!1;var b=this.$3[this.$3.length-1],c=b.r;b=this.$12(b,c);return Math.abs(b.getTimeRange().startTime-a.getTimeRange().startTime)+Math.abs(b.getTimeRange().endTime-a.getTimeRange().endTime)<h};b.updateWith=function(b){b instanceof a||c("moz-player/shims/ozvariant")(0,646),this.$5=b.$5,this.$13(b.$3),this.$14(b.$3),this.$6.emit("segment_updated")};b.getTimeRanges=function(){return this.$9?this.$15(this.$4,this.$9):this.$4};b.blockTimeRange=function(a){this.$9=a};b.$15=function(a,b){return new(c("moz-player/utils/OzNumericalRangeUtil"))().diffSortedRanges(a.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}),{rangeStart:b.startTime,rangeEnd:b.endTime}).map(function(a){return{startTime:a.rangeStart,endTime:a.rangeEnd==null?Infinity:a.rangeEnd}})};b.addUpdateListener=function(a){return this.$6.addListener("segment_updated",a)};b.$11=function(a){var b=a,d=new(c("moz-player/utils/OzNumericalRangeUtil"))().findCurrentRangeIndex(a,this.getTimeRanges().map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}));if(d===-1){d=new(c("moz-player/utils/OzNumericalRangeUtil"))().findNextRangeIndex(a,this.getTimeRanges().map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}));d!==-1&&(b=this.getTimeRanges()[d].startTime)}return b};b.$16=function(a,b){if(a.d!==b.d)return!1;var c=a.t+a.d*a.r,e=b.t+b.d*b.r;return d("moz-player/utils/OzNumericalHelper").greaterThanOrEqual(a.t,e,this.$8)||d("moz-player/utils/OzNumericalHelper").greaterThanOrEqual(b.t,c,this.$8)?!1:Number.isInteger((a.t-b.t)/a.d)};b.$13=function(a){if(this.$7.getBool("copy_new_manifest")){var b;(b=this.$3).splice.apply(b,[0,this.$3.length].concat(a));return}if(this.$7.getBool("use_loose_manifest_updates")){(b=this.$3).splice.apply(b,[this.$3.length,0].concat(a));this.$3.sort(function(a,b){if(a.t<b.t)return-1;else if(a.t>b.t)return 1;return a.d===b.d?a.r-b.r:0});b=[];for(var e=0,f=e+1;f<this.$3.length;){var g=this.$3[e],h=this.$3[f];if(g.t===h.t){if(g.d>h.d)throw new(c("moz-player/utils/OzError"))({type:"OZ_REPRESENTATION_PARSER",description:"Previous segment group duration greater than new.",extra:{code:"OZ_RP-1"}});g.d=h.d;g.r=Math.max(g.r,h.r);f++;continue}else b.push(this.$3[e]),e=f,f++}this.$3.length>0&&b.push(this.$3[this.$3.length-1]);(g=this.$3).splice.apply(g,[0,this.$3.length].concat(b));return}h=this.$3.length-1;e=a.length-1;f=h;g=e;b=JSON.stringify(this.$3);while(h>=0&&e>=0){var i=this.$3[h],j=a[e];if(d("moz-player/utils/OzNumericalHelper").equalTo(i.t,j.t,this.$8)){var k=h===f||e===g,l=k&&(h!==f&&j.r>i.r||e!==g&&i.r>j.r);k=!k&&i.r!==j.r||l;if(k)throw new(c("moz-player/utils/OzError"))({type:"OZ_REPRESENTATION_PARSER",description:'Segment group "R" field mismatch. Old groups: '+b+"\n            , new groups: "+JSON.stringify(a),extra:{code:"OZ_RP-2"}});if(this.$7.getBool("throw_on_non_zero_r_d_mismatch")&&i.r>0&&i.d!==j.d)throw new(c("moz-player/utils/OzError"))({type:"OZ_REPRESENTATION_PARSER",description:"Duration mismatch between non-zero repeat tag and new.",extra:{code:"OZ_RP-3"}});i.r=Math.max(i.r,j.r);if(this.$7.getBool("fix_template_duration_artifact_in_manifest")){if(i.d>j.d)throw new(c("moz-player/utils/OzError"))({type:"OZ_REPRESENTATION_PARSER",description:"Previous segment group duration greater than new.",extra:{code:"OZ_RP-4"}});i.d=j.d}h--;e--}else if(d("moz-player/utils/OzNumericalHelper").greaterThan(j.t,i.t,this.$8))this.$3.splice(h+1,0,j),e--;else{if(this.$16(i,j))throw new(c("moz-player/utils/OzError"))({type:"OZ_REPRESENTATION_PARSER",description:"Segment group misalinged",extra:{code:"OZ_RP-5"}});h--}}if(e>=0){(l=this.$3).unshift.apply(l,a.slice(0,e+1))}};b.$14=function(a){a=this.$10(a);a=new(c("moz-player/utils/OzNumericalRangeUtil"))().mergeSortedRanges(this.$4.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}).concat(a.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}})));this.$4=a.map(function(a){return{startTime:a.rangeStart,endTime:a.rangeEnd==null?Infinity:a.rangeEnd}})};b.$10=function(a){var b=this;a=new(c("moz-player/utils/OzNumericalRangeUtil"))();a=a.mergeSortedRanges(this.$3.map(function(a){var c=b.$12(a,0).getTimeRange().startTime;a=b.$12(a,a.r).getTimeRange().endTime;return{rangeStart:c,rangeEnd:a}}));return a.map(function(a){var b=a.rangeStart;a=a.rangeEnd;a=a==null?Infinity:a;return{startTime:b,endTime:a}})};b.$12=function(a,b){var d=this;b===void 0&&(b=0);var e=a.t,f=a.d,g=e+f*b,h=this.$7.getBool("use_sc_timebased_segments"),i=this.$7.getBool("use_scf_timebased_segments"),j=this.$7.getBool("touch_cb_key");return{getURI:function(){var a=d.$1.replace("$Time$",g.toString());a=new(c("moz-player/shims/OzURI"))(a);h&&a.addQueryData("_nc_sc",1);i&&a.addQueryData("_nc_scf",1);var b=a.getQueryData().cb;j&&b!=null&&a.addQueryData("cb",b+"_oz");return a},getTimeRange:function(){return{startTime:g/d.$2,endTime:(g+f)/d.$2}},getByteRange:function(){return null},getSequenceNumber:function(){return null}}};b.getSegmentGroups=function(){return this.$3};b.getEndingSegment=function(){if(this.$3.length==0)return null;var a=this.$3[this.$3.length-1],b=a.r;return this.$12(a,b)};b.forceParseIfNotParsed=function(){};return a}();g["default"]=a}),98);
__d("moz-player/utils/OzUrlHelper",[],(function(a,b,c,d,e,f){"use strict";function g(a){var b=a.lastIndexOf("/"),c=a.lastIndexOf("://");b>c+2&&(a=a.substring(0,b+1));return a}function h(a){a=g(a);return a.endsWith("/")?g(a.substring(0,a.length-1)):a}function i(a,b){a=g(a);while(b.length)if(b.startsWith("./"))b=b.substring(2);else if(b.startsWith("../"))b=b.substring(3),a=h(a),a.endsWith("/")&&(a=a.substring(0,a.length-1));else if(b.startsWith(".."))b=b.substring(2),a=h(a);else if(b.startsWith("."))b=b.substring(1);else break;b&&b.length&&(a.endsWith("/")||(a+="/"),a+=b);return a}function j(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];if(!b||!b.length)return"";if(b.length===1)return b[0];var d=b.shift();while(b.length>0)d=i(d,b.shift());return d}function a(a,b){return k(b)?b:j(a,b)}function k(a){var b=/^https?:\/\//i;return b.test(a)}f.joinRelativeUrlPaths=j;f.joinUrlPaths=a}),66);
__d("moz-player/parsers/OzDefaultSegmentTimelineParser",["moz-player/manifests/SegmentTemplateSegmentsContainer","moz-player/utils/OzUrlHelper"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){}a.parseSegments=function(a,b){a=[];b.SegmentTimeline[0].S&&(a=b.SegmentTimeline[0].S.map(function(a){return{t:Number.parseInt(a.$.t,10),d:Number.parseInt(a.$.d,10),r:Number.parseInt(a.$.r||"0",10)}}));return a};var b=a.prototype;b.parseSegmentsContainer=function(b,e,f){return new(c("moz-player/manifests/SegmentTemplateSegmentsContainer"))(b,d("moz-player/utils/OzUrlHelper").joinUrlPaths(e.baseUrl,f.$.media),Number.parseInt(f.$.timescale,10),a.parseSegments(b,f),e.isStaticMpd)};return a}();g["default"]=a}),98);
__d("moz-player/parsers/OzSegmentTemplateParser",["moz-player/parsers/OzDefaultSegmentTimelineParser","moz-player/shims/OzURI","moz-player/utils/OzUrlHelper"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a,b){b===void 0&&(b=null),this.$1=a,this.$2=b}var b=a.prototype;b.getTimeRange=function(){return{startTime:0,endTime:0}};b.getByteRange=function(){return this.$2};b.getURI=function(){return this.$1};b.getSequenceNumber=function(){return null};return a}();a=function(){function a(a,b,d,e){this.$2=d,this.$1=b,this.$3=a,e?this.$4=e:this.$4=new(c("moz-player/parsers/OzDefaultSegmentTimelineParser"))()}var b=a.prototype;b.parseInitializationSegment=function(){var a=d("moz-player/utils/OzUrlHelper").joinUrlPaths(this.$2.baseUrl,this.$1.$.initialization);return new h(new(c("moz-player/shims/OzURI"))(a))};b.parseSegmentsContainer=function(){return this.$4.parseSegmentsContainer(this.$3,this.$2,this.$1)};return a}();g["default"]=a}),98);
__d("moz-player/manifests/OzZeroTimeRangeSegment",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c){this.$1=a,this.$2=b,this.$3=c}var b=a.prototype;b.getURI=function(){return this.$1};b.getTimeRange=function(){return{startTime:0,endTime:0}};b.getByteRange=function(){return{startByte:this.$2,endByte:this.$3}};b.getSequenceNumber=function(){return null};return a}();f["default"]=a}),66);
__d("moz-player/configs/OzGlobalConfig",[],(function(a,b,c,d,e,f){"use strict";var g=null;a=function(a,b){return g?g.getBool(a,b):b};b=function(a,b){return g?g.getNumber(a,b):b};c=function(a,b){return g?g.getString(a,b):b};d=function(a){g=a};f.getBool=a;f.getNumber=b;f.getString=c;f.setGlobalConfig=d}),66);
__d("moz-player/shims/OzCacheStorage",["CacheStorage","gkx"],(function(a,b,c,d,e,f,g){a="localstorage";b=c("gkx")("1621546")?"_oz_":"_video_";var h=new(c("CacheStorage"))(a,b);d={get:function(a){return h.get(a)},set:function(a,b){h.set(a,b)}};e=d;g["default"]=e}),98);
__d("moz-player/shims/OzWindowEvents",["Run"],(function(a,b,c,d,e,f,g){"use strict";a={onUnload:function(a){d("Run").onUnload(a)}};b=a;g["default"]=b}),98);
__d("moz-player/networks/OzBandwidthCache",["moz-player/shims/OzCacheStorage","moz-player/shims/OzWindowEvents"],(function(a,b,c,d,e,f,g){a=function(){function a(a,b){var d=this;this.$1=a;this.$2=b;c("moz-player/shims/OzWindowEvents").onUnload(function(){d.updateCachedBandwidth()})}var b=a.prototype;b.getCachedBandwidth=function(){var a=c("moz-player/shims/OzCacheStorage").get(this.$1);if(a==null)return null;a=Number(a);return isNaN(a)?null:a};b.updateCachedBandwidth=function(){c("moz-player/shims/OzCacheStorage").set(this.$1,String(this.$2()))};return a}();g["default"]=a}),98);
__d("moz-player/networks/OzBandwidthUtils",[],(function(a,b,c,d,e,f){"use strict";function g(a){var b=0;for(var c=0;c<a.length;c++)b+=a[c].bytes*8e3/a[c].timeInMs;return b/a.length}function h(a){var b=g(a),c=0;for(var d=0;d<a.length;d++)c+=Math.pow(a[d].bytes*8e3/a[d].timeInMs-b,2);return Math.round(Math.sqrt(c/a.length))}function i(a,b){b=Math.exp(Math.log(.5)/b);var c=0,d=0;for(var e=0;e<a.length;e++){var f=Math.pow(b,a[e].weight);c=a[e].value*(1-f)+c*f;d+=a[e].weight}return Math.round(c/(1-Math.pow(b,d)))}function j(a,b){return i(a.map(function(a){return{value:a.bytes*8e3/a.timeInMs,weight:a.timeInMs/1e3}}),b)}function k(a,b){var c=g(a),d=[];for(var e=0;e<a.length;e++)Math.abs(c-a[e].bytes*8e3/a[e].timeInMs)<b&&d.push(a[e]);return d}function a(a,b,c,d){var e=h(a);a=k(a,e*c);c=j(a,b);return c-e*d}f.getMeanBandwidth=g;f.getStandardDeviationOfBandwidth=h;f.getExponentiallyWeightedMovingAverage=i;f.getExponentiallyWeightedMovingAverageOfBandwidth=j;f.getBandwidthSamplesWithinRangeOfMean=k;f.getBandwidthEstimate=a}),66);
__d("moz-player/networks/OzNetworkRequestStreamBandwidthReporter",["moz-player/networks/OzTransformStream","moz-player/shims/OzNetworkDiagnostics","moz-player/utils/OzResourceTimingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$10=Date.now();this.$11=0;this.$12=0;this.$13=function(){};this.$14=function(){};this.$15=new(c("moz-player/networks/OzTransformStream"))();this.$18=function(a){a.length!=null&&(b.$12+=a.length);if(b.$17)return;b.$21()};this.$19=function(){var a=Date.now()-b.$10,e=b.$1.getLastRequestUrl();e=e!=null?d("moz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry(e):null;e&&b.$14(e.responseStart-e.requestStart);if(b.$3>0&&a>0&&b.$11===0&&b.$12>=b.$3){if(b.$6&&e&&e.responseEnd&&e.startTime){e=b.$9?e.responseEnd-e.responseStart:e.responseEnd-e.startTime;a=e>0?e:a}e=b.$1.getLastResponse();e=b.$7?c("moz-player/shims/OzNetworkDiagnostics").getResponseTimeMs(e==null?void 0:e.headers)||0:0;b.$22(a,e)||b.$20(b.$12,a,Math.max(e-b.$8,0))}};var e=a.stream,f=a.loggerProvider,g=a.byteCountPerSample,h=a.minimumBytesToSampleOnClose,i=a.minimumSampleDuration,j=a.maximumSampleBandwidth,k=a.usePerformanceEntryOnClose,l=a.useResponseTimeMs,m=a.responseTimeHandicapMs,n=a.ignoreTimeToResponseStart;a=a.ignoreOnStreamWriteSamples;this.$1=e;this.$16=f;this.$2=g;this.$3=h;this.$4=i;this.$5=j;this.$6=k;this.$7=l;this.$8=m;this.$9=n;this.$17=a;this.$15.addListener("writableWrite",this.$18.bind(this));this.$15.addListener("writableClose",this.$19.bind(this))}var b=a.prototype;b.getTransformStream=function(){return this.$15};b.onBandwidthSample=function(a){this.$13=a};b.onTimeToFirstByteMsSample=function(a){this.$14=a};b.$20=function(a,b,c){b=b-c;if(this.$16){c=Date.now();var d=c-b;this.$16&&this.$16.getOperationLogger("bandwidth_sampled").setLength(a).setClientTimeBegin(d).setClientTimeDuration(c-d).setClientTimeEnd(c).log()}this.$13(a,b)};b.$22=function(a,b){if(a-b<=0)return!0;b=this.$12*8/(a/1e3);return a<this.$4&&b>this.$5};b.$21=function(){var a=Date.now(),b=a-this.$10;this.$2>0&&this.$12>=this.$11+this.$2&&!this.$22(b,0)&&(this.$20(this.$12-this.$11,b,0),this.$10=a,this.$11=this.$12)};return a}();g["default"]=a}),98);
__d("moz-player/scheduling/OzRoundRobinPriorityTaskQueue",["moz-player/shims/OzDeferred","moz-player/shims/OzMaybeNativePromise"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){b===void 0&&(b=-1),this.$3=function(){},this.$4=[],this.$5=new Map(),this.$6=new Map(),this.$1=a,this.$2=b}var b=a.prototype;b.getHighestPriority=function(){return Math.max.apply(Math,this.$4.map(function(a){return a.queue.length?a.priority:-Infinity}))};b.enqueue=function(a,b){b=this.$7(b);var c=this.$5.get(a),d=this.$8(a);if(c===b)return d;this.$5.has(a)&&this.remove(a);c=this.$9(b);var e=this.$4[c];e&&e.priority===b||(e={priority:b,queue:[]},this.$4.splice(c,0,e));this.$5.set(a,b);e.queue.push(a);this.$3(a,b>=this.$1?"immediate":"normal");return d};b.updatePriority=function(a,b){if(!this.$5.has(a))return;this.enqueue(a,b)};b.dequeue=function(){for(var a=0;a<this.$4.length;a++){var b=this.$4[a];if(b.queue.length){b=b.queue.shift();this.$6["delete"](b);this.$5["delete"](b);return b}}return null};b.remove=function(a){this.$6["delete"](a);var b=this.$5.get(a);if(b!==void 0){b=this.$9(b);b=this.$4[b];if(b&&b.queue){var c=b.queue.findIndex(function(b){return b===a});c>-1&&b.queue.splice(c,1)}this.$5["delete"](a)}};b.setOnTaskUpdated=function(a){this.$3=a};b.clearOnTaskUpdated=function(){this.setOnTaskUpdated(function(){})};b.getLength=function(){return this.$5.size};b.test_isEmpty=function(){return this.$5.size===0&&this.$6.size===0&&this.$4.every(function(a){return a.queue.length===0})};b.$8=function(a){var b=this,d=this.$6.get(a);if(!d){var e=new(c("moz-player/shims/OzDeferred"))(c("moz-player/shims/OzMaybeNativePromise"));d=e.getPromise();this.$6.set(a,d);var f=a.run;a.run=function(){return f.call(a).then(function(c){b.remove(a);e.resolve(c);return c})["catch"](function(c){b.remove(a);e.reject(c);throw c})}}return d};b.$9=function(a){a=this.$7(a);var b;for(b=0;b<this.$4.length;b++)if(a>=this.$4[b].priority)return b;return b};b.$7=function(a){this.$2>=0&&(a=Number.parseFloat(a.toFixed(this.$2)));return a};return a}();g["default"]=a}),98);
__d("moz-player/scheduling/OzSequentialTaskScheduler",["moz-player/shims/OzMaybeNativePromise","moz-player/shims/ozSetTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){var c=this;this.$3=0;this.$5=function(a,b){b=c.$6(a,b);b&&c.$1.remove(a)};this.$1=a;a=b||{};b=a.taskTimeout;this.$4=b||0}var b=a.prototype;b.start=function(){this.$1.setOnTaskUpdated(this.$5.bind(this));var a=this.$1.dequeue();a&&this.$6(a,"immediate")};b.destroy=function(){this.$2&&this.$2.cancel(),this.$1.clearOnTaskUpdated()};b.$6=function(a,b){var d=this;if(this.$2&&b!=="immediate")return!1;this.$2&&this.$2.cancel();b=a.run()["catch"](function(a){});this.$4>0&&(b=c("moz-player/shims/OzMaybeNativePromise").race([b,new(c("moz-player/shims/OzMaybeNativePromise"))(function(a,b){c("moz-player/shims/ozSetTimeoutAcrossTransitions")(a,d.$4)})]));this.$3++;this.$2=a;b=b.then(function(){d.$3--;d.$2===a&&(d.$2=null);if(d.$3===0){var b=d.$1.dequeue();b&&d.$6(b,"immediate")}});return!0};return a}();g["default"]=a}),98);
__d("moz-player/networks/OzStreamingTaskQueueProvider",["moz-player/scheduling/OzRoundRobinPriorityTaskQueue","moz-player/scheduling/OzSequentialTaskScheduler"],(function(a,b,c,d,e,f,g){"use strict";var h=new Map(),i=new Map(),j=2,k=2,l=6e4;function a(a){var b=h.get(a);if(!b){b=new(c("moz-player/scheduling/OzRoundRobinPriorityTaskQueue"))(j,k);var d=new(c("moz-player/scheduling/OzSequentialTaskScheduler"))(b,{taskTimeout:l});h.set(a,b);i.set(a,d);d.start()}return b}g.OZ_QUEUE_MAX_PRIORITY=j;g.getQueue=a}),98);
__d("moz-player/networks/OzBandwidthEstimator",["moz-player/configs/OzGlobalConfig","moz-player/networks/OzBandwidthCache","moz-player/networks/OzBandwidthUtils","moz-player/networks/OzNetworkRequestStreamBandwidthReporter","moz-player/networks/OzStreamingTaskQueueProvider","moz-player/shims/OzEventEmitter"],(function(a,b,c,d,e,f){"use strict";var g=(a=b("moz-player/networks/OzBandwidthUtils")).getBandwidthEstimate,h=a.getExponentiallyWeightedMovingAverage,i=a.getExponentiallyWeightedMovingAverageOfBandwidth,j=a.getStandardDeviationOfBandwidth,k=.9,l=5e5,m=2e4;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this)||this;c.$OzBandwidthEstimator1=[];c.$OzBandwidthEstimator2=[];c.$OzBandwidthEstimator9=function(a){c.$OzBandwidthEstimator2.push(a),c.$OzBandwidthEstimator2.length>b("moz-player/configs/OzGlobalConfig").getNumber("max_bandwidth_sample_count",15)&&c.$OzBandwidthEstimator2.splice(0,1)};c.$OzBandwidthEstimator3=new(b("moz-player/networks/OzBandwidthCache"))(b("moz-player/configs/OzGlobalConfig").getString("bandwidth_cache_key","bandwidthEstimate"),function(){return c.getAdjustedBandwidth(b("moz-player/configs/OzGlobalConfig"))});return c}var d=c.prototype;d.getBandwidth=function(a){var b=g(this.$OzBandwidthEstimator1,a.getNumber("bandwidth_estimator_half_life",6),a.getNumber("bandwidth_estimator_outlier_exclusion_factor",2),a.getNumber("bandwidth_estimator_std_dev_penalty_factor",.1));return b>0?b:this.$OzBandwidthEstimator4(a)};d.getEstimatedTimeToFirstByteMs=function(a){return this.$OzBandwidthEstimator2.length>0?h(this.$OzBandwidthEstimator2.map(function(a){return{value:a,weight:1}}),a.getNumber("time_to_first_byte_estimate_half_life_ms",500)):null};d.$OzBandwidthEstimator4=function(a){var b=this.$OzBandwidthEstimator3.getCachedBandwidth();return typeof b==="number"&&b>0?b:a.getNumber("default_bandwidth_estimate",l)};d.getStandardDeviationOfBandwidth=function(){return j(this.$OzBandwidthEstimator1)};d.getSampleCount=function(){return this.$OzBandwidthEstimator1.length};d.getAdjustedBandwidth=function(a){if(this.$OzBandwidthEstimator1.length===0)return this.$OzBandwidthEstimator4(a);var b=a.getNumber("bandwidth_estimator_variance_penalty_half_life",0)>0?this.$OzBandwidthEstimator5(a):this.$OzBandwidthEstimator6(a);return this.$OzBandwidthEstimator7(a,b)};d.$OzBandwidthEstimator7=function(a,c){var d=Math.max(0,b("moz-player/networks/OzStreamingTaskQueueProvider").getQueue("video").getLength()-a.getNumber("bandwidth_penalty_additional_video_start",0));a=a.getNumber("bandwidth_penalty_per_additional_video",0);d=Math.min(k,d*a);return c*(1-d)};d.$OzBandwidthEstimator5=function(a){var b=i(this.$OzBandwidthEstimator1,a.getNumber("bandwidth_estimator_half_life",6)),c=i(this.$OzBandwidthEstimator1,a.getNumber("bandwidth_estimator_variance_penalty_half_life",0));a=c<b?a.getNumber("bandwidth_estimator_variance_penalty_down_factor",0):a.getNumber("bandwidth_estimator_variance_penalty_up_factor",0);c=Math.abs(b-c)*a;return b-c};d.$OzBandwidthEstimator6=function(a){return this.getBandwidth(a)};d.pipeThroughReporter=function(a,c,d){var e=this;return{startStream:function(f){var g=new(b("moz-player/networks/OzNetworkRequestStreamBandwidthReporter"))({stream:c,loggerProvider:d,byteCountPerSample:a.getNumber("byte_count_per_sample",m),minimumBytesToSampleOnClose:a.getNumber("minimum_bytes_to_sample_on_close",0),minimumSampleDuration:a.getNumber("minimum_bandwidth_sample_duration",0),maximumSampleBandwidth:a.getNumber("maximum_bandwidth_sample_bandwidth",999999999),usePerformanceEntryOnClose:a.getBool("use_performance_entry_on_stream_close",!1),useResponseTimeMs:a.getBool("bandwidth_use_response_time_adjustment",!1),responseTimeHandicapMs:a.getNumber("bandwidth_response_time_handicap",0),ignoreTimeToResponseStart:a.getBool("ignore_time_to_response_start",!1),ignoreOnStreamWriteSamples:a.getBool("bandwidth_ignore_on_stream_write_samples",!1)});g.onBandwidthSample(function(b,c){e.$OzBandwidthEstimator8(b,c),a.getBool("update_bandwidth_cache_on_sample",!1)&&e.$OzBandwidthEstimator3.updateCachedBandwidth()});g.onTimeToFirstByteMsSample(e.$OzBandwidthEstimator9.bind(e));return c.startStream(f).then(function(b){return c.retrievedFromCache()&&a.getBool("exclude_prefetch_bandwidth_samples",!1)?b:b.pipeThrough(g.getTransformStream())})}}};d.$OzBandwidthEstimator8=function(a,c){this.$OzBandwidthEstimator1.push({bytes:a,timeInMs:c}),this.$OzBandwidthEstimator1.length>b("moz-player/configs/OzGlobalConfig").getNumber("max_bandwidth_sample_count",15)&&this.$OzBandwidthEstimator1.shift(),this.emit("bandwidth_sampled")};return c}(b("moz-player/shims/OzEventEmitter"));e.exports=new c()}),null);
__d("moz-player/networks/getOzBandwidthEstimatorPipeThroughReporter",["moz-player/networks/OzBandwidthEstimator","moz-player/networks/OzNetworkRequestStream"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return function(b,d,e){var f=b.getBool("estimate_video_bandwidth_only")?a==="video":!0;return d instanceof c("moz-player/networks/OzNetworkRequestStream")&&f?c("moz-player/networks/OzBandwidthEstimator").pipeThroughReporter(b.getLegacyConfig(),d,e):d}}g["default"]=a}),98);
__d("DataViewReader",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=0,this.$2=a}var b=a.prototype;b.seek=function(a){this.$1=a};b.skip=function(a){var b=this.$1;this.$1+=a;return b};b.readUint8=function(){return this.$2.getUint8(this.skip(8/8))};b.readUint16=function(a){a===void 0&&(a=!1);return this.$2.getUint16(this.skip(16/8),a)};b.readUint32=function(a){a===void 0&&(a=!1);return this.$2.getUint32(this.skip(32/8),a)};b.readUint64=function(a){a===void 0&&(a=!1);var b;a?(a=this.$2.getUint32(this.skip(32/8),!0),b=this.$2.getUint32(this.skip(32/8),!0)):(b=this.$2.getUint32(this.skip(32/8)),a=this.$2.getUint32(this.skip(32/8)));if(b>2097151)throw new RangeError("Overflow reading 64-bit value.");return Math.pow(2,32)*b+a};b.readInt64=function(a){a===void 0&&(a=!1);var b;a?(a=this.$2.getInt32(this.skip(32/8),!0),b=this.$2.getInt32(this.skip(32/8),!0)):(b=this.$2.getInt32(this.skip(32/8)),a=this.$2.getInt32(this.skip(32/8)));if(b>2097151)throw new RangeError("Overflow reading 64-bit value.");return Math.pow(2,32)*(b|0)+a};b.readInt16=function(a){a===void 0&&(a=!1);return this.$2.getInt16(this.skip(16/8),a)};b.readInt32=function(a){a===void 0&&(a=!1);return this.$2.getInt32(this.skip(32/8),a)};b.readZeroTerminatedString=function(a){var b="",c=0,d;while(c++<a&&(d=this.readUint8()))b+=String.fromCharCode(d);return b};b.readChars=function(a){var b="";while(a-->0)b+=String.fromCharCode(this.$2.getUint8(this.skip(8/8)));return b};b.readBytes=function(a){var b=[];while(a-->0)b.push(this.$2.getUint8(this.skip(8/8)));return b};b.getDataView=function(){return this.$2};b.getCursor=function(){return this.$1};b.hasMoreData=function(){return this.$2.byteLength-this.getCursor()>0};return a}();f["default"]=a}),66);
__d("moz-player/shims/OzDataViewReader",["DataViewReader"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("DataViewReader")}),98);
/**
 * License: https://www.facebook.com/legal/license/yWz46xmco3f/
 */
__d("moz-player/parsers/OzMp4SidxParser",["moz-player/shims/OzDataViewReader","moz-player/shims/OzURI"],(function(a,b,c,d,e,f,g){"use strict";var h=1936286840;function a(a,b,d){var e=new(c("moz-player/shims/OzDataViewReader"))(new DataView(d.buffer));d=e.readUint32();var f=e.readUint32();if(f!==h)throw new Error('Invalid box type, expected "sidx".');d==1&&(d=e.readUint64());f=e.readUint8();e.skip(3);e.skip(4);var g=e.readUint32();if(!g)throw new Error("Invalid timescale.");var i;f==0?(f=e.readUint32(),i=e.readUint32()):(f=e.readUint64(),i=e.readUint64());e.skip(2);var j=e.readUint16(),k=f,l=b+d+i,m=0,n=[];f=function(b){var d=e.readUint32(),f=(d&2147483648)>>>31;d=d&2147483647;var h=e.readUint32();e.readUint32();if(f==1)throw new Error("Heirarchical SIDXs are not supported.");var i=k/g,j=(k+h)/g;b===0&&(m=i);var o=l,p=o+d-1;n.push({getURI:function(){return new(c("moz-player/shims/OzURI"))(a)},getTimeRange:function(){return{startTime:i-m,endTime:j-m}},getByteRange:function(){return{startByte:o,endByte:p}},getSequenceNumber:function(){return null}});k+=h;l+=d};for(var b=0;b<j;b++)f(b);return n}g.parse=a}),98);
__d("moz-player/parsers/OzSidxSegmentsContainer",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c){c===void 0&&(c=null),this.$1=a,this.$2=b,this.$3=c}var b=a.prototype;b.getSegmentByTime=function(a){var b=this.$1();for(var c=0;c<b.length;c++){var d=b[c],e=d.getTimeRange();if(e.startTime<=a&&e.endTime>a)return d}return null};b.getSegmentAfter=function(a){var b=this.$1(),c=b.findIndex(function(b){return b.getTimeRange().startTime===a.getTimeRange().startTime&&b.getTimeRange().endTime===a.getTimeRange().endTime});return c>=0&&c+1<b.length?b[c+1]:null};b.getPredictedSegmentAfter=function(a){return null};b.canPredict=function(){return!1};b.isEndingSegment=function(a){var b=this.$1();if(!b||!b.length)return!1;b=b[b.length-1].getTimeRange();a=a.getTimeRange();return b.startTime===a.startTime&&b.endTime===a.endTime};b.getSegment=function(a){return this.$1()[a]||null};b.updateWith=function(a){throw new Error("Not implemented: updatedWith")};b.addUpdateListener=function(a){return this.$2.addListener("segment_updated",a)};b.forceParseIfNotParsed=function(){this.$3&&(this.$3(),this.$3=null)};b.getTimeRanges=function(){var a=this.$1();if(a.length===0)return[];else{var b=a[0];a=a[a.length-1];return[{startTime:b.getTimeRange().startTime,endTime:a.getTimeRange().endTime}]}};b.blockTimeRange=function(){};b.getEndingSegment=function(){var a=this.$1();a=a.length>0?a[a.length-1]:null;return a};return a}();f["default"]=a}),66);
__d("moz-player/manifests/OzDataSegment",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b,c,d,e){this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$5=e}var b=a.prototype;b.getURI=function(){return this.$1};b.getTimeRange=function(){return{startTime:this.$2,endTime:this.$3}};b.getByteRange=function(){return{startByte:this.$4,endByte:this.$5}};b.getSequenceNumber=function(){return null};return a}();f["default"]=a}),66);
/**
 * License: https://www.facebook.com/legal/license/yWz46xmco3f/
 */
__d("moz-player/parsers/OzWebmSidxParser",["moz-player/manifests/OzDataSegment","moz-player/shims/OzDataViewReader","moz-player/shims/OzURI","moz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";var h=440786851,i=408125543,j=357149030,k=2807729,l=17545,m=475249515,n=187,o=179,p=183,q=241,r=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])];function s(a,b){if(!a&&!b)return!0;if(!a||!b)return!1;if(a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0}var t=function(){function a(a,b){this.id=a,this.$1=b}var b=a.prototype;b.getOffset=function(){return this.$1.byteOffset};b.createParser=function(){return new u(this.$1)};b.getUint=function(){if(this.$1.byteLength>8)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(this.$1.byteLength==8&&this.$1.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");var a=0;for(var b=0;b<this.$1.byteLength;b++){var c=this.$1.getUint8(b);a=256*a+c}return a};b.getFloat=function(){if(this.$1.byteLength==4)return this.$1.getFloat32(0);else if(this.$1.byteLength==8)return this.$1.getFloat64(0);else throw new RangeError("EbmlElement: floating point numbers must be 4 or 8 bytes.")};return a}(),u=function(){function a(a){this.$1=a,this.$2=new(c("moz-player/shims/OzDataViewReader"))(this.$1)}var b=a.prototype;b.hasMoreData=function(){return this.$2.hasMoreData()};b.parseElement=function(){var b=this.$3(),c=this.$4(),d;a.$5(c)?d=this.$1.byteLength-this.$2.getCursor():d=a.$6(c);c=this.$2.getCursor()+d<=this.$1.byteLength?d:this.$1.byteLength-this.$2.getCursor();d=new DataView(this.$1.buffer,this.$1.byteOffset+this.$2.getCursor(),c);this.$2.skip(c);return new t(b,d)};b.$3=function(){var a=this.$4();if(a.length>7)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");var b=0;for(var c=0;c<a.length;c++)b=256*b+a[c];return b};b.$4=function(){var a=this.$2.readUint8(),b;for(b=1;b<=8;b++){var c=1<<8-b;if(a&c)break}if(b>8)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");c=new Uint8Array(b);c[0]=a;for(var a=1;a<b;a++)c[a]=this.$2.readUint8();return c};a.$6=function(a){if(a.length==8&&a[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");var b=1<<8-a.length;b=a[0]&b-1;for(var c=1;c<a.length;c++)b=256*b+a[c];return b};a.$5=function(a){for(var b=0;b<r.length;b++)if(s(a,r[b]))return!0;return!1};return a}();function v(a){a=a.createParser();var b=1e6,c=null;while(a.hasMoreData()){var d=a.parseElement();d.id==k?b=d.getUint():d.id==l&&(c=d.getFloat())}if(c==null)return null;d=b/1e9;a=c*d;return{timecodeScale:d,duration:a}}function w(a,b,d,e,f){var g=[];a=a.createParser();var h=-1,i=-1;while(a.hasMoreData()){var j=a.parseElement();if(j.id!=n)continue;j=x(j);if(!j)continue;var k=d*j.unscaledTime;j=b+j.relativeOffset;h>=0&&(i>=0||c("moz-player/shims/ozvariant")(0,4010),g.push(new(c("moz-player/manifests/OzDataSegment"))(f,h,k,i,j-1)));h=k;i=j}h>=0&&(i>=0||c("moz-player/shims/ozvariant")(0,4010),g.push(new(c("moz-player/manifests/OzDataSegment"))(f,h,e,i,null)));return g}function x(a){a=a.createParser();var b=a.parseElement();if(b.id!=o)return null;b=b.getUint();a=a.parseElement();if(a.id!=p)return null;a=a.createParser();var c=0;while(a.hasMoreData()){var d=a.parseElement();if(d.id!=q)continue;c=d.getUint();break}return{unscaledTime:b,relativeOffset:c}}function y(a){a=a.createParser();var b=null;while(a.hasMoreData()){var c=a.parseElement();if(c.id!=j)continue;b=c;break}return!b?null:v(b)}function z(a){a=new u(a);var b=a.parseElement();if(b.id!=h)return null;b=a.parseElement();if(b.id!=i)return null;a=b.getOffset();b=y(b);return!b?null:{segmentOffset:a,timecodeScale:b.timecodeScale,duration:b.duration}}function a(a,b,d){d=new DataView(d.buffer);b=new DataView(b.buffer);d=z(d);if(!d)return[];b=new u(b);b=b.parseElement();return b.id!=m?[]:w(b,d.segmentOffset,d.timecodeScale,d.duration,new(c("moz-player/shims/OzURI"))(a))}g.parse=a}),98);
__d("moz-player/utils/OzReadableStreamUtils",["moz-player/utils/ozConcatArrayBuffer"],(function(a,b,c,d,e,f,g){"use strict";var h=typeof TextDecoder!=="undefined"?function(a){return new TextDecoder("utf-8").decode(new Uint8Array(a))}:function(a){return String.fromCharCode.apply(null,a)};function i(a){var b=new ArrayBuffer(0),d=function d(){return a.read().then(function(a){var e=a.value;a=a.done;if(a)return null;if(!e)return null;b=c("moz-player/utils/ozConcatArrayBuffer")(b,e);return d()})};return d().then(function(){return new Uint8Array(b)})}function a(a){return i(a).then(function(a){return h(a)})}g.pumpAllData=i;g.pumpString=a}),98);
__d("moz-player/parsers/OzSidxSegmentsParser",["moz-player/loggings/OzLoggingUtils","moz-player/manifests/OzZeroTimeRangeSegment","moz-player/networks/getOzBandwidthEstimatorPipeThroughReporter","moz-player/parsers/OzMp4SidxParser","moz-player/parsers/OzSidxSegmentsContainer","moz-player/parsers/OzWebmSidxParser","moz-player/shims/OzEventEmitter","moz-player/shims/OzMaybeNativePromise","moz-player/shims/OzURI","moz-player/utils/OzErrorEmitter","moz-player/utils/OzReadableStreamUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=a.split("-");return{startByte:Number.parseInt(a[0],10),endByte:Number.parseInt(a[1],10)}}a=function(){function a(a,b,d,e,f,g,h){this.$6=new(c("moz-player/utils/OzErrorEmitter"))(),this.$7=[],this.$9=new(c("moz-player/shims/OzEventEmitter"))(),this.$1=b,this.$2=d,this.$3=e,this.$5=f,this.$4=g,this.$8=h.cloneContext().setType("sidx"),this.$10=a}var b=a.prototype;b.onError=function(a){return this.$6.onError(a)};b.parseInitializationSegment=function(){var a=this,b=this.$1.Initialization[0].$.range,d=h(b);b={getURI:function(){return new(c("moz-player/shims/OzURI"))(a.$2)},getTimeRange:function(){return{startTime:0,endTime:0}},getByteRange:function(){return d},getSequenceNumber:function(){return null}};return b};b.parseSegmentsContainer=function(){var a=this,b=function(){d("moz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a.$11(),a.$8,"process_sidx")["catch"](a.$6.emitError)},e=this.$10.getBool("lazy_parse_sidx");e||b();e=new(c("moz-player/parsers/OzSidxSegmentsContainer"))(function(){return a.$7},this.$9,e?b:null);return e};b.$12=function(a,b,e){e===void 0&&(e="DISABLE_CACHE");a=new(c("moz-player/manifests/OzZeroTimeRangeSegment"))(new(c("moz-player/shims/OzURI"))(a),b.startByte,b.endByte);b=this.$5+";sidx";a=this.$4.request([a],[c("moz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(b)],this.$8,e);b=a.getStream().getReader();return d("moz-player/utils/OzReadableStreamUtils").pumpAllData(b)};b.$11=function(){var a=this,b=this.$1.$.indexRange,e=h(b);b=[this.$12(this.$2,e)];if(this.$3==="webm"){var f=h(this.$1.Initialization[0].$.range);b.push(this.$12(this.$2,f,"ENABLE_CACHE"));f=c("moz-player/shims/OzMaybeNativePromise").all(b).then(function(b){var c=b[0];b=b[1];a.$7=d("moz-player/parsers/OzWebmSidxParser").parse(a.$2,c,b)})}else f=b[0].then(function(b){a.$7=d("moz-player/parsers/OzMp4SidxParser").parse(a.$2,e.startByte,b)});return f.then(function(){a.$9.emit("segment_updated")})};return a}();g["default"]=a}),98);
__d("moz-player/parsers/OzVideoContainerType",[],(function(a,b,c,d,e,f){"use strict";function a(a){return(a.split("/")[1]||"").trim()}f.parse=a}),66);
__d("moz-player/utils/OzMimeUtil",[],(function(a,b,c,d,e,f){"use strict";function a(a){return(a.split("/")[0]||"").trim()}f.getMimeType=a}),66);
__d("moz-player/parsers/OzRepresentationParser",["moz-player/manifests/OzRepresentation","moz-player/parsers/OzSegmentTemplateParser","moz-player/parsers/OzSidxSegmentsParser","moz-player/parsers/OzVideoContainerType","moz-player/shims/ozvariant","moz-player/utils/OzError","moz-player/utils/OzErrorEmitter","moz-player/utils/OzMimeUtil"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e,f,g,h,i,j,k){this.$5=new(c("moz-player/utils/OzErrorEmitter"))(),this.$1=b,this.$6=e,this.$7=f,this.$9=d,this.$10=a,this.$11=g,this.$2=h,this.$3=i,this.$4=j,this.$12=k}var b=a.prototype;b.$13=function(){var a=this;if(this.$8)return this.$8;if(this.$1.SegmentBase){var b=this.$1.SegmentBase[0],e=this.$1.BaseURL[0]._;typeof e==="string"||c("moz-player/shims/ozvariant")(0,29051);this.$8=new(c("moz-player/parsers/OzSidxSegmentsParser"))(this.$10,b,e,d("moz-player/parsers/OzVideoContainerType").parse(this.$1.$.mimeType),d("moz-player/utils/OzMimeUtil").getMimeType(this.$1.$.mimeType),this.$6,this.$7);this.$8.onError(function(b){var c;if((c=a.$12)==null?void 0:c.handleError(a.parseID(),b))return;return a.$5.emitError(b)})}else if(this.$1.SegmentTemplate)this.$8=this.$14(this.$1.SegmentTemplate[0],{isShared:!1});else if(this.$2)this.$8=this.$14(this.$2[0],{isShared:!0});else{b=new(c("moz-player/utils/OzError"))({type:"OZ_REPRESENTATION_PARSER",description:"Unrecognized representation type",extra:{code:"OZ_RP-7"}});throw b}return this.$8};b.$14=function(a,b){if(b.isShared){b=babelHelpers["extends"]({},a);b.$=babelHelpers["extends"]({},a.$);b.$.initialization=b.$.initialization.replace("$RepresentationID$",this.$1.$.id);b.$.media=b.$.media.replace("$RepresentationID$",this.$1.$.id);a=b}b=this.$9.mpdUrl;var d=this.$1.BaseURL&&this.$1.BaseURL[0]?this.$1.BaseURL[0]._:null;d=d!=null&&this.$10.getBool("enable_quickdashv2")?d:b;if(d==null){b=new(c("moz-player/utils/OzError"))({type:"OZ_REPRESENTATION_PARSER",description:"Missing mpd url for template manifest",extra:{code:"OZ_RP-6"}});throw b}b=this.$9.customSegmentTimelineParser;return new(c("moz-player/parsers/OzSegmentTemplateParser"))(this.$10,a,{baseUrl:d,isStaticMpd:this.$11.manifestType==="static",isTemplatedMpd:this.$11.manifestIsTemplated},b)};b.onError=function(a){return this.$5.onError(a)};b.parseInitSegment=function(){return this.$13().parseInitializationSegment()};b.parseBandwidth=function(){return Number(this.$1.$.bandwidth)};b.parseMimeCodecs=function(){var a,b;a=(a=(a=this.$1.$.mimeType)!=null?a:this.$3)!=null?a:"";b=(b=(b=this.$1.$.codecs)!=null?b:this.$4)!=null?b:"";return a+'; codecs="'+b+'"'};b.parseSegmentsContainer=function(){return this.$13().parseSegmentsContainer()};b.parseID=function(){return""+this.$1.$.id};b.parseCustomFieldFirstSegment=function(){var a=this.$9.customRepresentationParsers?this.$9.customRepresentationParsers.firstSegmentParser:null;return a?a(this.$1):null};b.parse=function(){return new(c("moz-player/manifests/OzRepresentation"))(this.$1,this.parseID(),this.parseMimeCodecs(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),this.$9.customRepresentationParsers)};return a}();g["default"]=a}),98);
__d("moz-player/parsers/OzAudioRepresentationParser",["moz-player/manifests/OzAudioRepresentation","moz-player/parsers/OzRepresentationParser"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j){b=a.call(this,b,c,d,e,f,g,h,i,j)||this;b.$OzAudioRepresentationParser1=c;b.$OzAudioRepresentationParser2=d;return b}var d=b.prototype;d.parse=function(){var a=this.$OzAudioRepresentationParser2.customRepresentationParsers;return new(c("moz-player/manifests/OzAudioRepresentation"))(this.$OzAudioRepresentationParser1,this.parseID(),this.parseMimeCodecs(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),a)};return b}(c("moz-player/parsers/OzRepresentationParser"));g["default"]=a}),98);
__d("moz-player/parsers/OzVideoRepresentationParser",["moz-player/manifests/OzVideoRepresentation","moz-player/parsers/OzRepresentationParser"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j,k){b=a.call(this,b,c,d,e,f,g,h,i,j,k)||this;b.$OzVideoRepresentationParser1=c;b.$OzVideoRepresentationParser2=d;return b}var d=b.prototype;d.parse=function(){var a=Number.parseInt(this.$OzVideoRepresentationParser1.$.height,10),b=Number.parseInt(this.$OzVideoRepresentationParser1.$.width,10),d=this.$OzVideoRepresentationParser2.customRepresentationParsers;return new(c("moz-player/manifests/OzVideoRepresentation"))(this.$OzVideoRepresentationParser1,this.parseID(),this.parseMimeCodecs(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),d,b,a)};return b}(c("moz-player/parsers/OzRepresentationParser"));g["default"]=a}),98);
__d("moz-player/parsers/OzMpdParser",["moz-player/manifests/Mpd","moz-player/parsers/OzAudioRepresentationParser","moz-player/parsers/OzVideoRepresentationParser","moz-player/shims/ozvariant","moz-player/utils/OzErrorEmitter"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e,f,g){this.$2=new(c("moz-player/utils/OzErrorEmitter"))(),this.$5=a,this.$1=d,this.$3=e,this.$4=b,this.$6=f,this.$7=g}var b=a.prototype;b.onError=function(a){return this.$2.onError(a)};b.parse=function(a){var b=null;a=this.$4.createXmlParser().parse(a);b=a.MPD[0];b||c("moz-player/shims/ozvariant")(0,3628);b.Period.length>0||c("moz-player/shims/ozvariant")(0,3629);a=b.Period[0].AdaptationSet||[];var d=this.$8(b),e=this.$9(b),f=this.$10(a,"video"),g=this.$11(f,c("moz-player/parsers/OzVideoRepresentationParser"),{manifestType:d,manifestIsTemplated:e});g.sort(function(a,b){return a.getHeight()-b.getHeight()});a=this.$10(a,"audio");e=this.$11(a,c("moz-player/parsers/OzAudioRepresentationParser"),{manifestType:d,manifestIsTemplated:e});e.sort(function(a,b){return a.getBandwidth()-b.getBandwidth()});var h=this.$4.mpdUrl;h=new(c("moz-player/manifests/Mpd"))(b,g,e,h,this.$12(b),this.$4.customParsers||new Map(),d==="static");if(this.$6){b=this.$6;b.startEME(f,g,a,e)}return h};b.$12=function(a){a=a.$.minimumUpdatePeriod||"";a=/\d+/g.exec(a);if(a&&a.length){a=a[0];return a?Number.parseInt(a,10):null}return null};b.$8=function(a){return a.$.type||"static"};b.$9=function(a){var b;b=(b=this.$4.customParsers)==null?void 0:b.get("isLiveTemplated");if(!b)return!1;b=b(a);return typeof b==="boolean"&&b};b.$10=function(a,b){return a.find(function(a){if(a.$.mimeType!=null)return a.$.mimeType.indexOf(b)!==-1;a=a.Representation;return a&&a.length&&a[0].$.mimeType.indexOf(b)!==-1})};b.$11=function(a,b,c){var d=this;return!a?[]:a.Representation.map(function(e){e=new b(d.$5,e,d.$4,d.$1,d.$3,c,a.SegmentTemplate,a.$.mimeType,a.$.codecs,d.$7);e.onError(d.$2.emitError);return e.parse()})};return a}();g["default"]=a}),98);
__d("moz-player/utils/OzMpdUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=[];b.push.apply(b,a.getVideoRepresentations().concat(a.getAudioRepresentations()));if(b.length){a=b[0].getEndingSegment();if(a)return a.getTimeRange()}return null}function b(a){var b=[];b.push.apply(b,a.getVideoRepresentations().concat(a.getAudioRepresentations()));if(b.length){a=b[0].getEndingSegment();if(a)return a.getSequenceNumber()}return null}f.getMpdLastTimeRange=a;f.getMpdLastSequenceNumber=b}),66);
__d("moz-player/utils/OzStreamInterruptChecker",["moz-player/shims/OzEventEmitter","moz-player/utils/OzMpdUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this)||this;d.$OzStreamInterruptChecker3=0;d.$OzStreamInterruptChecker4=null;d.$OzStreamInterruptChecker5=!1;d.$OzStreamInterruptChecker1=b;d.$OzStreamInterruptChecker2=c;return d}var c=b.prototype;c.notifyMpdUpdated=function(){var a=d("moz-player/utils/OzMpdUtils").getMpdLastTimeRange(this.$OzStreamInterruptChecker1),b=a?a.endTime:null;b!==null&&b===this.$OzStreamInterruptChecker4?this.$OzStreamInterruptChecker3++:(this.$OzStreamInterruptChecker3=0,this.$OzStreamInterruptChecker5&&this.$OzStreamInterruptChecker4!==null&&this.$OzStreamInterruptChecker4!==void 0&&a!==null&&a!==void 0&&this.emit("streamResumedAt",a.startTime),this.$OzStreamInterruptChecker5=!1);a=this.$OzStreamInterruptChecker2.getNumber("stream_interrupt_check_mpd_stale_count_threshold");!this.$OzStreamInterruptChecker5&&a>0&&this.$OzStreamInterruptChecker3>=a&&b!==null&&b!==void 0&&(this.emit("streamInterruptAt",b),this.$OzStreamInterruptChecker5=!0);this.$OzStreamInterruptChecker4=b};return b}(c("moz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("moz-player/parsers/OzMpdUpdater",["moz-player/parsers/OzMpdParser","moz-player/shims/OzEventEmitter","moz-player/shims/OzSubscriptionsHandler","moz-player/shims/ozClearTimeout","moz-player/shims/ozSetTimeoutAcrossTransitions","moz-player/utils/OzError","moz-player/utils/OzErrorEmitter","moz-player/utils/OzMpdUtils","moz-player/utils/OzReadableStreamUtils","moz-player/utils/OzStreamInterruptChecker"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e,f,g,h,i,j){var k;k=a.call(this)||this;k.$OzMpdUpdater8=new(c("moz-player/utils/OzErrorEmitter"))();k.$OzMpdUpdater10=new(c("moz-player/shims/OzSubscriptionsHandler"))();k.$OzMpdUpdater11=!1;k.$OzMpdUpdater15=0;k.$OzMpdUpdater16=0;k.$OzMpdUpdater17=null;k.$OzMpdUpdater19=!0;k.$OzMpdUpdater22=function(){var a=k.$OzMpdUpdater2.getLocation();k.$OzMpdUpdater19=!1;if(!a)return;if(k.$OzMpdUpdater6.getBool("live_disable_mpd_updates_when_paused")&&!k.$OzMpdUpdater12.isPlaying()){k.setupUpdateLoop();return}var b=k.$OzMpdUpdater5.getOperationLogger("update_manifest").start();k.$OzMpdUpdater25(a).then(function(e){k.$OzMpdUpdater16=0;k.$OzMpdUpdater26();k.$OzMpdUpdater7=0;if(k.$OzMpdUpdater19)return;var f=babelHelpers["extends"]({},k.$OzMpdUpdater13,{mpdUrl:a});f=new(c("moz-player/parsers/OzMpdParser"))(k.$OzMpdUpdater6,f,k.$OzMpdUpdater1,k.$OzMpdUpdater5,k.$OzMpdUpdater14);f.onError(function(a){k.$OzMpdUpdater8.emitError(a),b.setError(a).log()});f=f.parse(e);e=k.$OzMpdUpdater2.isStaticMpd();k.$OzMpdUpdater2.updateWith(f);f.isStaticMpd()&&!e&&k.emit("streamTransitionToStatic");f=d("moz-player/utils/OzMpdUtils").getMpdLastTimeRange(k.$OzMpdUpdater2);e=f&&f.endTime!=0?f.endTime:null;b.setLiveheadPosition(e).setLiveheadSeqNumMpd(d("moz-player/utils/OzMpdUtils").getMpdLastSequenceNumber(k.$OzMpdUpdater2)).setManifestType(k.$OzMpdUpdater2.isStaticMpd()?"static":"dynamic").log();k.$OzMpdUpdater9.notifyMpdUpdated();k.setupUpdateLoop()})["catch"](function(d){k.$OzMpdUpdater26();b.setError(d).log();if(k.$OzMpdUpdater6.getBool("handle_mpd_retries_outside_oz_mpd_updater")){var e;if(k.$OzMpdUpdater6.getBool("convert_dom_exception_to_oz_error"))if(d instanceof c("moz-player/utils/OzError"))e=d;else{var f=d.code!=null?String(d.code):null,g={originalError:d,url:a};f!==null&&(g.code=f);e=new(c("moz-player/utils/OzError"))({type:"OZ_NETWORK",description:d.name+"; "+d.message+"; "+d.description+";",extra:g})}else{e=d instanceof c("moz-player/utils/OzError")?d:new(c("moz-player/utils/OzError"))({type:"OZ_NETWORK",description:"Unknown mpd url load failure: "+a+("; errorMessage: "+d.message+"; errorDescription: "+((f=d.description)!=null?f:"")+";")})}k.$OzMpdUpdater24(e,a)}else k.$OzMpdUpdater23(d)})};var l=e.getMinimumUpdatePeriod();k.$OzMpdUpdater7=0;k.$OzMpdUpdater1=f;k.$OzMpdUpdater2=e;k.$OzMpdUpdater12=g;k.$OzMpdUpdater3=l;k.$OzMpdUpdater5=h.cloneContext().setType("manifest");k.$OzMpdUpdater6=b;k.$OzMpdUpdater13=i;k.$OzMpdUpdater14=j;k.$OzMpdUpdater2.addListener("locationUpdated",function(){k.$OzMpdUpdater20(),k.setupUpdateLoop()});k.$OzMpdUpdater9=new(c("moz-player/utils/OzStreamInterruptChecker"))(k.$OzMpdUpdater2,k.$OzMpdUpdater6);k.$OzMpdUpdater10.addSubscriptions(k.$OzMpdUpdater9.addListener("streamResumedAt",function(a){k.emit("streamResumedAt",a)}),k.$OzMpdUpdater9.addListener("streamInterruptAt",function(a){k.emit("streamInterruptAt",a)}));return k}var e=b.prototype;e.$OzMpdUpdater20=function(){c("moz-player/shims/ozClearTimeout")(this.$OzMpdUpdater4),this.$OzMpdUpdater4=null,this.$OzMpdUpdater21(),this.$OzMpdUpdater19=!0};e.setupUpdateLoop=function(){var a=!this.$OzMpdUpdater11;a&&this.$OzMpdUpdater6.getBool("stop_manifest_update_when_static")&&(a=!this.$OzMpdUpdater2.isStaticMpd(),this.$OzMpdUpdater3=this.$OzMpdUpdater2.getMinimumUpdatePeriod());a&&this.$OzMpdUpdater3&&this.$OzMpdUpdater2.getLocation()&&(this.$OzMpdUpdater4=c("moz-player/shims/ozSetTimeoutAcrossTransitions")(this.$OzMpdUpdater22,this.$OzMpdUpdater3*1e3))};e.onError=function(a){return this.$OzMpdUpdater8.onError(a)};e.$OzMpdUpdater23=function(a){if(this.$OzMpdUpdater6.getBool("live_gracefully_handle_mpd_errors")){var b;a instanceof c("moz-player/utils/OzError")&&(b=a.getExtra().code||"");var d=["404","503"];this.$OzMpdUpdater6.getBool("live_gracefully_handle_no_network")&&d.push("0");var e=this.$OzMpdUpdater6.getNumber("live_max_try_attempts_on_404"),f=!1;if(b&&d.indexOf(b)>-1)switch(b){case"410":this.$OzMpdUpdater11=!0;f=!0;break;case"404":this.$OzMpdUpdater7++;if(this.$OzMpdUpdater7>=e)break;case"503":case"0":f=!0;break}if(f){this.setupUpdateLoop();return}}this.$OzMpdUpdater8.emitError(a)};e.$OzMpdUpdater24=function(a,b){var c=this;b=!0;var d=this.$OzMpdUpdater16-1,e=a.getExtra().code;this.$OzMpdUpdater17!==e?(this.$OzMpdUpdater17=e,this.$OzMpdUpdater15=1):this.$OzMpdUpdater15++;e={cancelMpdUpdates:function(){c.$OzMpdUpdater11=!0,c.$OzMpdUpdater6.getBool("live_gracefully_handle_410")&&c.emit("streamGone")},consecutiveFailuresForErrorCode:this.$OzMpdUpdater15,error:a,isInitialMpdRequest:!1,preventDefault:function(){b=!1},retry:function(a){c.setupUpdateLoop()},retryAttemptCount:d};this.emit("manifestFetchError",e);b&&this.$OzMpdUpdater8.emitError(a)};e.$OzMpdUpdater25=function(a){this.$OzMpdUpdater21();this.$OzMpdUpdater16++;a=this.$OzMpdUpdater1.requestRawUrl(a,{credentials:"same-origin"},null,this.$OzMpdUpdater5);this.$OzMpdUpdater18=a;a=a.getStream().getReader();return d("moz-player/utils/OzReadableStreamUtils").pumpString(a)};e.$OzMpdUpdater21=function(){this.$OzMpdUpdater18&&this.$OzMpdUpdater6.getBool("mpd_update_cancel_current_request_tracker")&&(this.$OzMpdUpdater18.cancel(),this.$OzMpdUpdater16=0),this.$OzMpdUpdater26()};e.$OzMpdUpdater26=function(){this.$OzMpdUpdater18=null};e.destroy=function(){this.$OzMpdUpdater4&&c("moz-player/shims/ozClearTimeout")(this.$OzMpdUpdater4),this.$OzMpdUpdater10.release()};return b}(c("moz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("moz-player/parsers/OzXmlParserImplDOMParser",["moz-player/utils/OzError"],(function(a,b,c,d,e,f,g){function h(){return{$:{}}}function i(a){var b=h();for(var c=a.attributes,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;b.$[f.name]=f.value}for(var f=a.childNodes,e=Array.isArray(f),d=0,f=e?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(e){if(d>=f.length)break;c=f[d++]}else{d=f.next();if(d.done)break;c=d.value}a=c;if(a instanceof Element){c=a.nodeName;Object.prototype.hasOwnProperty.call(b,c)||(b[c]=[]);b[c].push(i(a))}else{c=a.nodeValue.trim();c&&(b._=c)}}return b}a=function(){function a(){this.$1=new DOMParser()}var b=a.prototype;b.parse=function(a){var b=h(),d=this.$1.parseFromString(a,"application/xml"),e=d.querySelector("parsererror");if(e){e=e.innerHTML;var f=2e3;throw new(c("moz-player/utils/OzError"))({type:"OZ_XML_PARSER",description:e+"; truncated xml ("+f+"/"+a.length+"): "+a.substring(0,f),extra:{}})}e=d.documentElement;e!=null&&(b[e.nodeName]=[i(e)]);return b};return a}();f.exports=a}),34);
__d("moz-player/shims/OzSax",["sax"],(function(a,b,c,d,e,f,g){g["default"]=c("sax")}),98);
__d("moz-player/parsers/OzXmlParserImplSax",["moz-player/shims/OzSax","moz-player/shims/ozvariant","moz-player/utils/OzError"],(function(a,b,c,d,e,f,g){function h(){return{$:{}}}a=function(){function a(){var a=this;this.$4=[];this.$5=function(a){throw a};this.$6=function(b){b=b.name;var d=h(),e=a.$3||a.$2;e||c("moz-player/shims/ozvariant")(0,219);Object.prototype.hasOwnProperty.call(e,b)||(e[b]=[]);e[b].push(d);a.$4.push(e);a.$3=d};this.$8=function(){var b=a.$4.pop();a.$3=b};this.$9=function(b){b=b;b=b.trim();if(!b)return;var d=a.$3;d||c("moz-player/shims/ozvariant")(0,220);d._&&c("moz-player/shims/ozvariant")(0,221);d._=b};this.$7=function(b){var d=b.name;b=b.value;var e=a.$3;e||c("moz-player/shims/ozvariant")(0,222);e.$[d]=b};var b=!0;b=this.$1=c("moz-player/shims/OzSax").parser(b);b.onerror=this.$5;b.onopentagstart=this.$6;b.onattribute=this.$7;b.onclosetag=this.$8;b.ontext=this.$9}var b=a.prototype;b.parse=function(a){var b=h();this.$2=b;try{this.$1.write(a).close()}catch(b){var d=2e3;throw new(c("moz-player/utils/OzError"))({type:"OZ_XML_PARSER",description:b.message+"; truncated xml ("+d+"/"+a.length+"): "+a.substring(0,d),extra:{originalError:b}})}this.$3=null;this.$2=null;this.$4=[];return b};return a}();g["default"]=a}),98);
__d("moz-player/utils/OzBufferingUtils",[],(function(a,b,c,d,e,f){"use strict";e=.1;var g=1,h=.2;function a(a,b,c,d){if(i(a,c,d))return!0;c=a.currentTime;d=0;for(var e=0;e<a.buffered.length;e++){var f=a.buffered.start(e),g=a.buffered.end(e);if(f<=c&&g>=c){d=g;break}}return d-c>b}function i(a,b,c){var d=a.currentTime,e=0;for(var f=0;f<a.buffered.length;f++){var g=a.buffered.start(f),i=a.buffered.end(f);if(g<=d&&i>=d){e=i;break}}return(!c.getBool("reach_end_only_when_video_ended",!1)||a.ended)&&(Math.abs(e-b)<=h||Math.abs(d-b)<=h)}function b(a,b){a=a?a.getSourceBufferState():null;if(!a)return 0;b=b.getCurrentTime();return j(b,a.getBufferedRanges())}function j(a,b){var c=null;for(var d=0;d<b.length;d++){var e=b[d];e.startTime<=a&&e.endTime>a&&(c=e)}return!c?0:c.endTime-a}function c(a){var b=[];for(var c=0;c<a.buffered.length;c++)b.push({rangeStart:a.buffered.start(c),rangeEnd:a.buffered.end(c)});return b}function d(a,b,c,d){if(c.length===0||b.size===0)return!1;var e=null;for(var f=0;f<c.length;f++){var g=c[f],h=b.get(g);if(h!=null){h=h.getBufferedRanges();for(var i=0;i<h.length;i++)if(h[i].startTime<=a&&h[i].endTime>=a){e=g;break}}if(e!=null)break}if(e==null)return!1;h=!0;b.forEach(function(c,b){if(e===b)return;b=c.getBufferedRanges();for(var c=0;c<b.length;c++)a-b[c].endTime<d&&(c=!1)});return!h}f.BUFFER_UNDERFLOW_THRESHOLD=e;f.BUFFER_OVERFLOW_THRESHOLD=g;f.BUFFER_FUDGE_FACTOR=h;f.hasEnoughBuffer=a;f.hasBufferedToOrReachedEnd=i;f.getBufferAheadFromPlaybackStates=b;f.getBufferAheadFromCurrentTime=j;f.getNumericalRangesFromSourceBuffer=c;f.hasEnoughPartialBuffer=d}),66);
__d("moz-player/playback_controls/OzPlaybackTimeRangeManager",["moz-player/utils/OzBufferingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,c,d,e){this.$4=null,this.$5=0,this.$6=0,this.$7=!0,this.$8=0,this.$9=0,this.$10=0,this.$1=a,this.$2=b,this.$3=c,this.$8=d,this.$9=e}var b=a.prototype;b.setTimelineBlockingEnabled=function(a){this.$7=a,this.$7||this.$3.unblockTimeRange()};b.setTimeRangeProvider=function(a){var b=this;this.$4!=null&&this.$4.remove();this.$4=a.addUpdateListener(function(){var c=a.getTimeRanges(),d=0;if(c.length!==0){c=c[c.length-1];d=c.endTime}b.$11(d)})};b.$11=function(a){if(!this.$7)return;var b=this.$1.getNumber("min_block_time_range_interval_ms");if(b>0&&this.$10>0&&Date.now()-this.$10>b)return;if(this.$5===a)return;this.$5=a;if(this.$2.currentTime<=this.$6)return;if(this.$9!==0&&this.$8!==0&&this.$2.duration-this.$2.currentTime>this.$8){b=[];for(var a=0;a<this.$2.buffered.length;a++)b.push({startTime:this.$2.buffered.start(a),endTime:this.$2.buffered.end(a)});a=d("moz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(this.$2.currentTime,b);this.$6=this.$2.currentTime+Math.min(a,this.$9);b={startTime:this.$6,endTime:this.$2.duration-this.$9};this.$3.blockTimeRange(b);this.$10=Date.now()}};b.destroy=function(){this.$4!=null&&(this.$4.remove(),this.$4=null)};return a}();g["default"]=a}),98);
__d("moz-player/shims/ozThrottle",["throttle"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("throttle")}),98);
__d("moz-player/strategies/LiveheadSeekaheadStrategy",[],(function(a,b,c,d,e,f){"use strict";var g=.05;function a(a,b){b=Math.max.apply(Math,b.map(function(a){return a.startTime}));return b-a>0?b-a+g:0}f.computeSeekAhead=a}),66);
__d("moz-player/utils/OzTimelineGapUtil",["moz-player/utils/OzNumericalHelper","moz-player/utils/OzNumericalRangeUtil"],(function(a,b,c,d,e,f,g){"use strict";var h=1.5;function a(a,b){b=b.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});return new(c("moz-player/utils/OzNumericalRangeUtil"))().findCurrentRangeIndex(a,b)===-1}function b(a,b){var e=b.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});e=new(c("moz-player/utils/OzNumericalRangeUtil"))().findCurrentRangeIndex(a,e);if(e!==-1){b=b[e];return d("moz-player/utils/OzNumericalHelper").lessThanOrEqual(a,b.endTime)&&b.endTime-a<h}return!1}g.isInGap=a;g.isNearGap=b}),98);
__d("moz-player/playback_controls/OzPlayheadManager",["moz-player/shims/OzDOMEventListener","moz-player/shims/OzEventEmitter","moz-player/shims/OzSubscriptionsHandler","moz-player/shims/ozThrottle","moz-player/shims/ozvariant","moz-player/strategies/LiveheadSeekaheadStrategy","moz-player/utils/OzNumericalRangeUtil","moz-player/utils/OzTimelineGapUtil"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var e;e=a.call(this)||this;e.$OzPlayheadManager2=new(c("moz-player/shims/OzSubscriptionsHandler"))();e.$OzPlayheadManager3=new(c("moz-player/shims/OzSubscriptionsHandler"))();e.$OzPlayheadManager4=new Set();e.$OzPlayheadManager10=new Set();e.$OzPlayheadManager12=function(a){e.$OzPlayheadManager1.currentTime=a};e.$OzPlayheadManager14=!1;e.$OzPlayheadManager16=function(a,b){b===void 0&&(b=null);var f=e.$OzPlayheadManager9;if(f&&f.isEnabled(e.$OzPlayheadManager1,e.$OzPlayheadManager8)){f=f.computeNewPlayheadPosition(e.$OzPlayheadManager1,e.$OzPlayheadManager8);if(typeof f==="number"){e.$OzPlayheadManager19(f,"live_catch_up_strategy",a,b);return}}f=e.$OzPlayheadManager6.getNumber("auto_seek_playhead_slack");if(f===0)return;var g=e.$OzPlayheadManager5;if(!g)return;var h=e.$OzPlayheadManager7.getCurrentTime(),i=g.getTimeRanges().map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}),j=new(c("moz-player/utils/OzNumericalRangeUtil"))().findNextRangeIndex(h,i);if((d("moz-player/utils/OzTimelineGapUtil").isNearGap(h,g.getTimeRanges())||d("moz-player/utils/OzTimelineGapUtil").isInGap(h,g.getTimeRanges()))&&j!==-1){h=i[j];e.$OzPlayheadManager19(h.rangeStart+f,"jump_over_timeline_gap",a,b)}};var f=b.video,g=b.mpd,h=b.playheadCatchup,i=b.playbackState,j=b.config,k=b.perfLoggerProvider,l=b.seekHandler;b=b.initialPlaybackPosition;e.$OzPlayheadManager1=f;e.$OzPlayheadManager6=j;e.$OzPlayheadManager7=i;e.$OzPlayheadManager8=g;e.$OzPlayheadManager9=h;e.$OzPlayheadManager11=k;l&&(e.$OzPlayheadManager12=l);e.$OzPlayheadManager13=b;e.$OzPlayheadManager2.addSubscriptions(c("moz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager1,"durationchange",function(){e.$OzPlayheadManager15(),e.$OzPlayheadManager16("durationchange"),e.$OzPlayheadManager17("durationchange")}),c("moz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager1,"pause",e.$OzPlayheadManager16.bind(babelHelpers.assertThisInitialized(e),"pause")),c("moz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager1,"play",e.$OzPlayheadManager16.bind(babelHelpers.assertThisInitialized(e),"play")),c("moz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager1,"playing",e.$OzPlayheadManager16.bind(babelHelpers.assertThisInitialized(e),"playing")),c("moz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager1,"waiting",function(){e.$OzPlayheadManager16.bind(babelHelpers.assertThisInitialized(e),"waiting"),e.$OzPlayheadManager17("waiting")}),c("moz-player/shims/OzDOMEventListener").listenDOMEvent(e.$OzPlayheadManager1,"timeupdate",c("moz-player/shims/ozThrottle")(function(){e.$OzPlayheadManager6.getBool("playhead_manager_handle_timerange_update_on_timeupdate")&&e.$OzPlayheadManager16("timeupdate")},e.$OzPlayheadManager6.getNumber("playhead_manager_timeupdate_throttle_ms"))));return e}var e=b.prototype;e.observeSourceBufferState=function(a,b){var d=this;this.$OzPlayheadManager4.has(a)&&c("moz-player/shims/ozvariant")(0,4179);this.$OzPlayheadManager4.add(a);this.$OzPlayheadManager2.addSubscriptions(a.addEventListener("buffer_updated",function(){d.$OzPlayheadManager18(a,b),d.$OzPlayheadManager6.getBool("skip_videobuffer_gaps_on_buffer_updated")&&d.$OzPlayheadManager17("buffer_updated")}))};e.$OzPlayheadManager18=function(a,b){var c=[];if(this.$OzPlayheadManager6.getBool("check_buffer_range_once_for_playhead_update")&&this.$OzPlayheadManager10.has(a))return;this.$OzPlayheadManager4.forEach(function(a){a=a.getBufferedRanges();a.length&&c.push(a[0])});c.length>0&&this.$OzPlayheadManager10.add(a);a=this.$OzPlayheadManager6.getBool("seek_ahead_use_native_current_time")?this.$OzPlayheadManager1.currentTime:this.$OzPlayheadManager7.getCurrentTime();a=d("moz-player/strategies/LiveheadSeekaheadStrategy").computeSeekAhead(a,c);var e=this.$OzPlayheadManager6.getNumber("timeline_offset_threshold");a>0&&(e===0||a<e)&&this.$OzPlayheadManager19(this.$OzPlayheadManager1.currentTime+a,"first_available_buffer","source_buffer",b)};e.setTimeRangeProvider=function(a){this.$OzPlayheadManager3.release(),this.$OzPlayheadManager3.engage(),this.$OzPlayheadManager3.addSubscriptions(a.addUpdateListener(this.$OzPlayheadManager16.bind(this,"time_range_updated"))),this.$OzPlayheadManager5=a,this.$OzPlayheadManager16("time_range_set")};e.$OzPlayheadManager15=function(){var a=this.$OzPlayheadManager1.duration;if(this.$OzPlayheadManager13!==0&&!this.$OzPlayheadManager14&&!isNaN(a)&&a!==Infinity){a=this.$OzPlayheadManager13>0?this.$OzPlayheadManager13:a+this.$OzPlayheadManager13;this.$OzPlayheadManager14=!0;this.$OzPlayheadManager19(a,"initial_playback_position","");this.emit("initialPlaybackPositionSet",a)}};e.$OzPlayheadManager17=function(a){if(!this.$OzPlayheadManager6.getBool("skip_videobuffer_gaps"))return;var b=this.$OzPlayheadManager6.getNumber("auto_seek_playhead_slack");if(b===0)return;var e=this.$OzPlayheadManager7.getCurrentTime(),f=[];for(var g=0;g<this.$OzPlayheadManager1.buffered.length;g++)f.push({startTime:this.$OzPlayheadManager1.buffered.start(g),endTime:this.$OzPlayheadManager1.buffered.end(g)});g=f.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}});var h=new(c("moz-player/utils/OzNumericalRangeUtil"))().findNextRangeIndex(e,g),i=this.$OzPlayheadManager6.getNumber("skip_videobuffer_gaps_max_gap_size_sec");if((d("moz-player/utils/OzTimelineGapUtil").isNearGap(e,f)||d("moz-player/utils/OzTimelineGapUtil").isInGap(e,f))&&h!==-1&&(i===0||g[h].rangeStart-e<i)){f=g[h];this.$OzPlayheadManager19(f.rangeStart+b,"jump_over_buffer_gap",a,null);return}};e.destroy=function(){this.$OzPlayheadManager2.release(),this.$OzPlayheadManager3.release(),this.$OzPlayheadManager4.clear()};e.$OzPlayheadManager19=function(a,b,c,d){var e=a-this.$OzPlayheadManager1.currentTime,f=this.$OzPlayheadManager6.getNumber("seek_ahead_epsilon");if(f>0&&e<=f)return;this.$OzPlayheadManager11.getOperationLogger("playhead_adjustment").setLength(Math.round(e*1e3)).setReason(b).setInitiator(c).setType(d).log();this.$OzPlayheadManager12(a)};return b}(c("moz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("moz-player/playback_controls/OzPlayheadNudger",["moz-player/shims/OzDOMEventListener","moz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){var d=this;this.$2=new(c("moz-player/shims/OzSubscriptionsHandler"))();this.$3=null;this.$5=function(){var a=d.$4.getNumber("playhead_nudge_slack");if(a===0)return;var b=d.$3;b!=null&&!d.$1.paused&&d.$1.readyState===4&&(d.$1.currentTime===b&&(d.$1.currentTime+=a),d.$3=null)};this.$6=function(){d.$3=d.$1.currentTime};this.$7=function(){d.$3=null};this.$1=b;this.$4=a;this.$2.addSubscriptions(c("moz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"timeupdate",this.$5.bind(this)),c("moz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"playing",this.$6.bind(this)),c("moz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"pause",this.$7.bind(this)))}var b=a.prototype;b.destroy=function(){this.$2.release()};return a}();g["default"]=a}),98);
__d("moz-player/states/OzObservedPlaybackState",["moz-player/loggings/OzMultiDestinationPerfLogger","moz-player/shims/OzDOMEventListener","moz-player/shims/OzSubscriptionsHandler","moz-player/shims/ozThrottle"],(function(a,b,c,d,e,f,g){"use strict";var h=150;a=function(){function a(a,b){var e=this;b===void 0&&(b=new(d("moz-player/loggings/OzMultiDestinationPerfLogger").OzMultiDestinationPerfLoggerProvider)([]));this.$3=new(c("moz-player/shims/OzSubscriptionsHandler"))();this.$6=function(){e.$4.getOperationLogger("pause").setState("paused").log()};this.$7=function(){e.$5(),e.$4.getOperationLogger("playing").setState("playing").log()};this.$5=function(){e.$2=e.$1.currentTime};this.$1=a;this.$4=b;this.$2=this.$1.currentTime;this.$3.addSubscriptions(c("moz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"seeked",this.$5),c("moz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"seeking",this.$5),c("moz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"timeupdate",c("moz-player/shims/ozThrottle")(this.$5,h)),c("moz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"pause",this.$6),c("moz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"playing",this.$7))}var b=a.prototype;b.isPlaying=function(){return!this.$1.paused};b.getCurrentTime=function(){return this.$2};b.forceUpdateCurrentTime=function(){this.$5()};b.getDuration=function(){return this.$1.duration};b.addEventListener=function(a,b){return c("moz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,a,b)};b.destroy=function(){this.$3.release()};return a}();g["default"]=a}),98);
__d("moz-player/utils/OzPositionToViewportUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){b=b.filter(function(a){a=a.position;if(a==null)return!1;var b=a.y-window.scrollY;return b>=0||(a.height+b)/a.height>c}).sort(function(a,b){return a.position==null||b.position==null?0:a.position.y-b.position.y});return b.findIndex(function(b){return b.video===a})}f.determinePositionIndexOfVideoFromViewportVertically=a}),66);
__d("moz-player/states/OzPositionToViewportTracker",["moz-player/shims/OzEventEmitter","moz-player/utils/OzPositionToViewportUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=null,i=.5;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.$OzPositionToViewportTracker1=[];c.$OzPositionToViewportTracker5=function(a){a.forEach(function(a){var b=c.$OzPositionToViewportTracker1.find(function(b){return a.target===b.video});b!=null&&(a.isIntersecting?b.position=c.$OzPositionToViewportTracker7(a):c.$OzPositionToViewportTracker1.map(function(b){a.target===b.video&&(b.position=null)}));c.$OzPositionToViewportTracker1.forEach(function(a){a.positionIndexToViewportVertically=c.$OzPositionToViewportTracker6(a.video)})}),c.emit("state_changed")};c.$OzPositionToViewportTracker2=b;return c}var c=b.prototype;c.$OzPositionToViewportTracker4=function(){if(this.$OzPositionToViewportTracker3!=null)return;this.$OzPositionToViewportTracker3=new IntersectionObserver(this.$OzPositionToViewportTracker5,{rootMargin:this.$OzPositionToViewportTracker2.getNumber("pixels_above_viewport_to_observe")+"px 0px "+this.$OzPositionToViewportTracker2.getNumber("pixels_below_viewport_to_observe")+"px 0px",threshold:0})};c.registerVideo=function(a){this.$OzPositionToViewportTracker1.push({video:a,position:null,positionIndexToViewportVertically:-1}),this.$OzPositionToViewportTracker4(),this.$OzPositionToViewportTracker3!=null&&this.$OzPositionToViewportTracker3.observe(a)};c.getPositionIndexOfVideoFromViewportVertically=function(a){var b=this.$OzPositionToViewportTracker1.find(function(b){return b.video===a});return b!=null?b.positionIndexToViewportVertically:-1};c.$OzPositionToViewportTracker6=function(a){return d("moz-player/utils/OzPositionToViewportUtils").determinePositionIndexOfVideoFromViewportVertically(a,this.$OzPositionToViewportTracker1,i)};c.$OzPositionToViewportTracker7=function(a){a=a.boundingClientRect;return{x:a.x+window.scrollX,y:a.y+window.scrollY,width:a.width,height:a.height}};b.getInstance=function(a){h==null&&(h=new b(a));return h};c.unregisterVideo=function(a){var b=this,c=[];this.$OzPositionToViewportTracker1.forEach(function(d){d.video===a&&b.$OzPositionToViewportTracker3!=null?b.$OzPositionToViewportTracker3.unobserve(a):c.push(d)});this.$OzPositionToViewportTracker1=c;this.$OzPositionToViewportTracker1.length===0&&this.$OzPositionToViewportTracker3!=null&&(this.$OzPositionToViewportTracker3.disconnect(),this.$OzPositionToViewportTracker3=null)};return b}(c("moz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("moz-player/states/OzPositionToViewport",["moz-player/shims/OzEventEmitter","moz-player/shims/OzSubscriptionsHandler","moz-player/states/OzPositionToViewportTracker"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$OzPositionToViewport1=new(c("moz-player/shims/OzSubscriptionsHandler"))();e.$OzPositionToViewport3=b;e.$OzPositionToViewport2=c("moz-player/states/OzPositionToViewportTracker").getInstance(d);e.$OzPositionToViewport2.registerVideo(b);e.$OzPositionToViewport1.addSubscriptions(e.$OzPositionToViewport2.addListener("state_changed",function(){e.emit("state_changed")}));return e}var d=b.prototype;d.getPositionIndexOfVideoFromViewportVertically=function(){return this.$OzPositionToViewport3!=null?this.$OzPositionToViewport2.getPositionIndexOfVideoFromViewportVertically(this.$OzPositionToViewport3):-1};d.destroy=function(){this.$OzPositionToViewport3!=null&&this.$OzPositionToViewport2.unregisterVideo(this.$OzPositionToViewport3),this.$OzPositionToViewport3=null};return b}(c("moz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("moz-player/strategies/getSegmentsCount",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d){var e=0,f=a.getTimeRange().startTime,g=a.getTimeRange().startTime;a=a;while(a!=null&&g<c+f){var h=g;e++;a=b.getSegmentAfter(a);if(a)g=a.getTimeRange().startTime;else break;if(g<=h)return d}return Math.max(e,1)}f["default"]=a}),66);
__d("moz-player/strategies/OzStaticStreamSegmentsStrategy",["moz-player/strategies/getSegmentsCount"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.isActive=function(){return!0};b.getSegmentsCount=function(a,b,d){a=this.$1.getNumber("seconds_to_stream");var e=this.$1.getNumber("segments_to_stream");a>0&&(e=c("moz-player/strategies/getSegmentsCount")(b,d,a,e));return e};return a}();g["default"]=a}),98);
__d("moz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy",["moz-player/networks/OzBandwidthEstimator","moz-player/strategies/OzStaticStreamSegmentsStrategy","moz-player/strategies/getSegmentsCount"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b,this.$3=new(c("moz-player/strategies/OzStaticStreamSegmentsStrategy"))(a)}var b=a.prototype;b.isActive=function(a){return!0};b.getSegmentsCount=function(a,b,d){var e=c("moz-player/networks/OzBandwidthEstimator").getBandwidth(this.$1.getLegacyConfig()),f=c("moz-player/networks/OzBandwidthEstimator").getStandardDeviationOfBandwidth(),g=this.$1.getNumber("bandwidth_boundary_standard_deviation_factor"),h=this.$2.some(function(a){a=a.getBandwidth();return Math.abs(a-e)<f*g});h=h?this.$4(a,b,d):this.$3.getSegmentsCount(a,b,d);a=this.$5(b,e);return Math.min(h,a)};b.$4=function(a,b,d){a=this.$1.getNumber("seconds_to_stream_near_bandwidth_boundary");var e=this.$1.getNumber("segments_to_stream_near_bandwidth_boundary");a>0&&(e=c("moz-player/strategies/getSegmentsCount")(b,d,a,e));return e};b.$5=function(a,b){var c=Infinity;a=a.getByteRange();if(a){var d=a.endByte;if(d!=null){var e=this.$1.getNumber("per_stream_duration_target");d=d-a.startByte;e>1e-5&&d!==0&&(c=Math.ceil(e*b/(d*8)))}}return c};return a}();g["default"]=a}),98);
__d("moz-player/strategies/OzPlaybackConfidenceUtils",[],(function(a,b,c,d,e,f){"use strict";var g=.8;function a(a,b,c,d,e,f,i,j){c=Math.min(1,c/d);d=1+(1-c)*e;c=a.getBandwidth()*d;if(c>b)return g*(b/c);e=0;if(f!=null&&i!=null&&j>0){d=h(a,b,f,i);d!=null&&d>0&&(e=d/1e3*j)}return 1-(1-g)*c/b-e}function h(a,b,c,d){var e=a.getBandwidth();a=a.getSegment(0);if(a){a=a.getTimeRange();a=(a.endTime-a.startTime)*c;c=a*e/b*1e3+d;return c-a*1e3}}f.getPlaybackConfidence=a;f.getEstimatedDownloadTimeBufferDeltaMs=h}),66);
__d("moz-player/utils/OzAbrUtils",[],(function(a,b,c,d,e,f){"use strict";a=function(a,b,c,d){var e=a.getNumber("resolution_constraint_factor");if(e===0)return b;a=b.filter(function(a){return a.getWidth()<=c.width*d*e||a.getHeight()<=c.height*d*e});return!a.length?[b[0]]:a};b=function(a,b,c,d,e,f){b=b?a.getNumber("min_switch_interval"):a.getNumber("initial_switch_interval");d=d>=a.getNumber("abr_min_bandwidth_samples");var g=a.getNumber("abr_eval_buffer_threshold");c=!g||c>=g;g=null;e+a.getNumber("min_eval_interval")>Date.now()?g="min_eval_interval":f+b>Date.now()?g="min_switch_interval":!d?g="min_bandwidth_samples":c||(g="buffer_threshold_not_satisfied");return g};f.excludeLargeRepresentations=a;f.getReasonToPreventEvaluation=b}),66);
__d("moz-player/utils/OzPlaybackRestrictionsUtils",[],(function(a,b,c,d,e,f){"use strict";var g=function(a,b){return a.getBandwidth()-b.getBandwidth()};a=function(a,b,c,d){if(c.length===0)return[];c.sort(g);a=a.reduce(function(a,c){return c.applyRestriction(a,b)},c);if(d!=null&&d.length>0){c=c.filter(function(a){return d.indexOf(a.getID())>-1});a=a.concat(c).sort(g)}return a};f.applyVideoPlaybackRestrictions=a}),66);
__d("moz-player/strategies/OzAbrManager",["moz-player/networks/OzBandwidthEstimator","moz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy","moz-player/strategies/OzPlaybackConfidenceUtils","moz-player/utils/OzAbrUtils","moz-player/utils/OzBufferingUtils","moz-player/utils/OzPlaybackRestrictionsUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e,f,g,h){this.$2=0,this.$3=Date.now(),this.$4=!1,this.$10=null,this.$1=a,this.$5=b,this.$6=this.$14(b,d),this.$7=e,this.$8=f,this.$11=g,this.$12=new(c("moz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy"))(a,d),this.$13=h}var b=a.prototype;b.setSourceBuffer=function(a){this.$9=a};b.$14=function(a,b){var c=this.$1.getNumber("abr_restrict_from_index"),d=this.$1.getNumber("abr_restrict_to_index");if(d===0&&c===0)return b;var e=b.findIndex(function(b){return a.getID()===b.getID()});return e===-1?b:b.filter(function(a,b){return b-e>=c&&b-e<=d})};b.$15=function(a){a=a;a=d("moz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$7,this.$13(),a);a=d("moz-player/utils/OzAbrUtils").excludeLargeRepresentations(this.$1,a,this.$13(),this.$11);return a};b.getBestRepresentation=function(a){a===void 0&&(a={segmentCount:null,forceEvaluation:!1});a=a;var b=a.forceEvaluation;a=a.segmentCount;var e=d("moz-player/utils/OzBufferingUtils").getBufferAheadFromPlaybackStates(this.$9,this.$8),f=d("moz-player/utils/OzAbrUtils").getReasonToPreventEvaluation(this.$1,this.$4,e,c("moz-player/networks/OzBandwidthEstimator").getSampleCount(),this.$2,this.$3);if(b!==!0&&f!==null&&f!==void 0){this.$10=f;return this.$5}b=Date.now();this.$2=b;f=c("moz-player/networks/OzBandwidthEstimator").getAdjustedBandwidth(this.$1.getLegacyConfig());var g=this.$15(this.$6),h=null;this.$1.getBool("abr_use_download_time")&&a!=null?h=this.$16(g,f,a)||this.$17(g,f,e,a):h=this.$17(g,f,e,a);f=this.$1.getBool("fix_abr_default_representation")?g[0]:this.$6[0];h=h||f;if(this.$18(e,h)){this.$10="high_buffer";return this.$5}this.$5!==h&&(this.$4=!0,this.$3=b,this.$5=h);this.$10="bandwidth";return h};b.$17=function(a,b,e,f){f===void 0&&(f=null);var g=null;for(var h=0;h<a.length;h++){var i=d("moz-player/strategies/OzPlaybackConfidenceUtils").getPlaybackConfidence(a[h],b,e,this.$1.getNumber("low_buffer_bandwidth_target_threshold"),this.$1.getNumber("low_buffer_bandwidth_target_increase_factor"),f,c("moz-player/networks/OzBandwidthEstimator").getEstimatedTimeToFirstByteMs(this.$1.getLegacyConfig()),this.$1.getNumber("download_time_buffer_delta_penalty_factor"));i>this.$1.getNumber("abr_confidence_threshold")&&(!g||g.getBandwidth()<a[h].getBandwidth())&&(g=a[h])}return g};b.$16=function(a,b,e){for(var f=a.length-1;f>=0;f--){var g=d("moz-player/strategies/OzPlaybackConfidenceUtils").getEstimatedDownloadTimeBufferDeltaMs(a[f],b,e,c("moz-player/networks/OzBandwidthEstimator").getEstimatedTimeToFirstByteMs(this.$1.getLegacyConfig())||0);if(g!=null&&g+this.$1.getNumber("minimum_download_additional_buffer_ms")<0)return a[f]}return null};b.$18=function(a,b){var c=this.$1.getNumber("abr_prevent_down_switch_buffer_threshold");return c>0&&a>=c&&this.$5.getBandwidth()>b.getBandwidth()?!0:!1};b.getStreamSegmentsCountStrategy=function(){return this.$12};b.getLastEvaluationReason=function(){return this.$10};b.updateRepresentations=function(a){var b=this;this.$6=a;this.$5=(a=this.$6[0])!=null?a:this.$5;this.$6.forEach(function(a){b.$5.getQualityLabel()===a.getQualityLabel()&&(b.$5=a)})};return a}();g["default"]=a}),98);
__d("moz-player/strategies/OzAudioIBRManager",["moz-player/networks/OzBandwidthEstimator"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.getInitialAudioRepresentation=function(a){var b=c("moz-player/networks/OzBandwidthEstimator").getAdjustedBandwidth(this.$1.getLegacyConfig());a=a.slice(0);a.sort(function(a,b){return a.getBandwidth()-b.getBandwidth()});var d=this.$1.getNumber("live_audio_ibr_bandwidth_percentage");d=b*d;for(var e=a.length-1;e>=0;e--)if(a[e].getBandwidth()<=d){this.$2.getOperationLogger("audio_ibr_success").setRepresentationID(a[e].getID()).setReason(b.toString()).log();return a[e]}this.$2.getOperationLogger("audio_ibr_no_op").setReason(b.toString()).log();return null};return a}();g["default"]=a}),98);
__d("moz-player/strategies/OzBufferAheadPriorityStrategy",["moz-player/shims/OzEventEmitter","moz-player/shims/OzSubscriptionsHandler","moz-player/shims/ozThrottle","moz-player/utils/OzBufferingUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=6,i=1e3;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$OzBufferAheadPriorityStrategy3=new(c("moz-player/shims/OzSubscriptionsHandler"))();e.$OzBufferAheadPriorityStrategy5=function(){e.emit("state_changed")};e.$OzBufferAheadPriorityStrategy4=b;e.$OzBufferAheadPriorityStrategy1=d;e.$OzBufferAheadPriorityStrategy3.addSubscriptions(e.$OzBufferAheadPriorityStrategy1.addEventListener("progress",c("moz-player/shims/ozThrottle")(e.$OzBufferAheadPriorityStrategy5,i)),e.$OzBufferAheadPriorityStrategy1.addEventListener("timeupdate",c("moz-player/shims/ozThrottle")(e.$OzBufferAheadPriorityStrategy5,i)));return e}var e=b.prototype;e.getName=function(){return"buffer_ahead"};e.setSourceBufferState=function(a){if(this.$OzBufferAheadPriorityStrategy2)return;this.$OzBufferAheadPriorityStrategy4.getBool("fix_buffer_ahead_priority_strategy")&&(this.$OzBufferAheadPriorityStrategy2=a);this.$OzBufferAheadPriorityStrategy3.addSubscriptions(a.addEventListener("buffer_updated",c("moz-player/shims/ozThrottle")(this.$OzBufferAheadPriorityStrategy5,i)))};e.isActive=function(){return!0};e.getPriority=function(){var a=this.$OzBufferAheadPriorityStrategy2;if(!a)return 1;var b=this.$OzBufferAheadPriorityStrategy1.getCurrentTime();a=a.getBufferedRanges();b=d("moz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(b,a);return b>=h?0:1};e.destroy=function(){this.$OzBufferAheadPriorityStrategy3.release()};return b}(c("moz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("moz-player/strategies/OzBufferAheadTargetStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.isActive=function(){return!0};b.getBufferTarget=function(){return this.$1.getNumber("buffer_ahead_target")};return a}();f["default"]=a}),66);
__d("moz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.isActive=function(a){return!a.isPlaying()};b.getSegmentsCount=function(a,b,c){a=a.getCurrentTime();var d=this.$1.computeBufferTarget(),e=1,f=b;b=b.getTimeRange().startTime;while(f!=null&&b<d+a){f=c.getSegmentAfter(f);if(!f)break;b=f.getTimeRange().startTime;e++}return e};return a}();f["default"]=a}),66);
__d("moz-player/strategies/OzBufferTargetCalculator",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=0,this.$2=a}var b=a.prototype;b.computeBufferTarget=function(){for(var a=this.$2,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;if(d.isActive()){d=d.getBufferTarget();this.$1=d;return d}}return this.$1};return a}();f["default"]=a}),66);
__d("moz-player/strategies/OzBufferingDetectorStates",["moz-player/utils/OzBufferingUtils"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.handleEvent=function(a,b,c){if(a.type==="pause"||b.paused)return new i(this.$1);a=this.$2 instanceof j?this.$1.getNumber("in_play_buffer_overflow_target",d("moz-player/utils/OzBufferingUtils").BUFFER_OVERFLOW_THRESHOLD):this.$1.getNumber("start_buffer_underflow_target",d("moz-player/utils/OzBufferingUtils").BUFFER_OVERFLOW_THRESHOLD);return d("moz-player/utils/OzBufferingUtils").hasEnoughBuffer(b,a,c,this.$1)?new j(this.$1):this};return a}(),i=function(){function a(a){this.$1=a}var b=a.prototype;b.handleEvent=function(a,b,c){if(a.type==="play"||a.type==="playing"||!b.paused){a=this.$1.getNumber("start_buffer_underflow_target",d("moz-player/utils/OzBufferingUtils").BUFFER_UNDERFLOW_THRESHOLD);return d("moz-player/utils/OzBufferingUtils").hasEnoughBuffer(b,a,c,this.$1)?new j(this.$1):new h(this.$1,this)}return this};return a}(),j=function(){function a(a){this.$1=a,this.$2=a.getString("stream_types_eligible_for_partial_playback","").split(",")}var b=a.prototype;b.handleEvent=function(a,b,c,e){e===void 0&&(e=new Map());if(a.type==="pause"||b.paused)return new i(this.$1);var f=this.$1.getNumber("in_play_buffer_underflow_target",d("moz-player/utils/OzBufferingUtils").BUFFER_UNDERFLOW_THRESHOLD);return this.$1.getBool("buffer_when_waiting",!1)&&a.type==="waiting"||!d("moz-player/utils/OzBufferingUtils").hasEnoughBuffer(b,f,c,this.$1)&&!d("moz-player/utils/OzBufferingUtils").hasEnoughPartialBuffer(b.currentTime,e,this.$2,this.$1.getNumber("partial_playback_buffer_overflow",0))?new h(this.$1,this):this};return a}();g.OzVideoBufferingState=h;g.OzVideoPausedState=i;g.OzVideoPlayingState=j}),98);
__d("moz-player/utils/OzDomEventCapturer",["moz-player/shims/OzDOMEventListener"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$2=new Map(),this.$1=a}var b=a.prototype;b.capture=function(a,b){var d=this,e=this.$1.parentNode;return!e?{remove:function(){}}:c("moz-player/shims/OzDOMEventListener").captureDOMEvent(e,a,function(a){if(a.target!==d.$1)return;var c=b(a);c&&d.$3(a)})};b.dispatchIfSuppressed=function(a){var b=this.$2.get(a);b&&this.$1.dispatchEvent(b);this.$2["delete"](a)};b.$3=function(a){c("moz-player/shims/OzDOMEventListener").suppressDOMEvent(a),this.$2.set(a.type,a)};return a}();g["default"]=a}),98);
__d("moz-player/strategies/OzBufferingDetector",["moz-player/shims/OzDOMEventListener","moz-player/shims/OzEventEmitter","moz-player/shims/OzSubscriptionsHandler","moz-player/shims/ozThrottle","moz-player/strategies/OzBufferingDetectorStates","moz-player/utils/OzBufferingUtils","moz-player/utils/OzDomEventCapturer"],(function(a,b,c,d,e,f,g){"use strict";var h=150;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e,f){var g;g=a.call(this)||this;g.$OzBufferingDetector3=new(c("moz-player/shims/OzSubscriptionsHandler"))();g.$OzBufferingDetector7=new Map();g.$OzBufferingDetector8=function(a){g.$OzBufferingDetector10(a)};g.$OzBufferingDetector9=function(a){a=g.$OzBufferingDetector10(a)instanceof d("moz-player/strategies/OzBufferingDetectorStates").OzVideoBufferingState;return g.$OzBufferingDetector5.getBool("suppress_playing_event_while_buffering",!1)?a:!1};g.$OzBufferingDetector2=b;g.$OzBufferingDetector5=e;g.$OzBufferingDetector6=f;g.$OzBufferingDetector2.paused?g.$OzBufferingDetector1=new(d("moz-player/strategies/OzBufferingDetectorStates").OzVideoPausedState)(g.$OzBufferingDetector5):g.$OzBufferingDetector1=d("moz-player/utils/OzBufferingUtils").hasEnoughBuffer(g.$OzBufferingDetector2,g.$OzBufferingDetector5.getNumber("in_play_buffer_underflow_target",d("moz-player/utils/OzBufferingUtils").BUFFER_UNDERFLOW_THRESHOLD),g.$OzBufferingDetector6(),g.$OzBufferingDetector5)?new(d("moz-player/strategies/OzBufferingDetectorStates").OzVideoPlayingState)(g.$OzBufferingDetector5):new(d("moz-player/strategies/OzBufferingDetectorStates").OzVideoBufferingState)(g.$OzBufferingDetector5,null);g.$OzBufferingDetector4=new(c("moz-player/utils/OzDomEventCapturer"))(g.$OzBufferingDetector2);g.$OzBufferingDetector3.addSubscriptions(c("moz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector2,"pause",g.$OzBufferingDetector8),c("moz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector2,"play",g.$OzBufferingDetector8),g.$OzBufferingDetector4.capture("playing",g.$OzBufferingDetector9),c("moz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector2,"progress",c("moz-player/shims/ozThrottle")(g.$OzBufferingDetector8,h)),c("moz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector2,"timeupdate",c("moz-player/shims/ozThrottle")(g.$OzBufferingDetector8,h)),c("moz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector2,"seeked",g.$OzBufferingDetector8),c("moz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector2,"seeking",g.$OzBufferingDetector8),c("moz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector2,"waiting",g.$OzBufferingDetector8));g.$OzBufferingDetector5.getBool("listen_for_canplay_in_buffering_detector",!1)&&g.$OzBufferingDetector3.addSubscriptions(c("moz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector2,"canplay",g.$OzBufferingDetector8),c("moz-player/shims/OzDOMEventListener").listenDOMEvent(g.$OzBufferingDetector2,"canplaythrough",g.$OzBufferingDetector8));return g}var e=b.prototype;e.setSourceBufferState=function(a,b){this.$OzBufferingDetector7.set(a,b)};e.$OzBufferingDetector10=function(a){a=this.$OzBufferingDetector1.handleEvent(a,this.$OzBufferingDetector2,this.$OzBufferingDetector6(),this.$OzBufferingDetector7);var b=this.$OzBufferingDetector1;this.$OzBufferingDetector1=a;var c=a instanceof d("moz-player/strategies/OzBufferingDetectorStates").OzVideoBufferingState,e=b instanceof d("moz-player/strategies/OzBufferingDetectorStates").OzVideoBufferingState;if(a===b)return a;if(c){c=b instanceof d("moz-player/strategies/OzBufferingDetectorStates").OzVideoPlayingState?"in_play":"start/unpause";this.emit("enterBuffering",c)}else e&&this.emit("leaveBuffering");a instanceof d("moz-player/strategies/OzBufferingDetectorStates").OzVideoPlayingState&&this.$OzBufferingDetector4.dispatchIfSuppressed("playing");return a};e.destroy=function(){this.$OzBufferingDetector3.release()};return b}(c("moz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("moz-player/strategies/OzLiveheadDeltaCatchupStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.isEnabled=function(a,b){return(!this.$1.getBool("live_catch_up_only_when_paused")||a.paused)&&typeof b.getMinimumUpdatePeriod()==="number"};b.computeNewPlayheadPosition=function(a,b){a=a.currentTime;b=b.getVideoRepresentations()[0];if(!b)return null;b=b.getTimeRanges();if(b.length===0)return null;b=b[b.length-1].endTime;return b-a>this.$1.getNumber("live_catch_up_fall_behind_threshold")?b-this.$1.getNumber("live_catch_up_live_head_delta"):null};return a}();f["default"]=a}),66);
__d("moz-player/strategies/OzPausedStreamSegmentsCountStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.isActive=function(){return!this.$1.isPlaying()};b.getSegmentsCount=function(a,b,c){return this.$2.getNumber("paused_stream_segments_count")};return a}();f["default"]=a}),66);
__d("moz-player/strategies/OzPlayheadAtInterruptionDetector",["moz-player/shims/OzDOMEventListener","moz-player/shims/OzEventEmitter","moz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";var h=1;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var d;d=a.call(this)||this;d.$OzPlayheadAtInterruptionDetector2=null;d.$OzPlayheadAtInterruptionDetector3=new(c("moz-player/shims/OzSubscriptionsHandler"))();d.$OzPlayheadAtInterruptionDetector4=function(){if(d.$OzPlayheadAtInterruptionDetector2!=null){var a=d.$OzPlayheadAtInterruptionDetector2||0;Math.abs(d.$OzPlayheadAtInterruptionDetector1.currentTime-a)<h&&d.emit("playheadAtInterruption",a)}};d.$OzPlayheadAtInterruptionDetector1=b;d.$OzPlayheadAtInterruptionDetector3.addSubscriptions(c("moz-player/shims/OzDOMEventListener").listenDOMEvent(d.$OzPlayheadAtInterruptionDetector1,"waiting",d.$OzPlayheadAtInterruptionDetector4.bind(babelHelpers.assertThisInitialized(d))));return d}var d=b.prototype;d.notifyStreamInterrupted=function(a){this.$OzPlayheadAtInterruptionDetector2=a,this.$OzPlayheadAtInterruptionDetector4()};d.notifyStreamResumed=function(){this.$OzPlayheadAtInterruptionDetector2=null};d.destroy=function(){this.$OzPlayheadAtInterruptionDetector3.release()};return b}(c("moz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("moz-player/strategies/OzPlayingStatePriorityStrategy",["moz-player/shims/OzEventEmitter","moz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var d;d=a.call(this)||this;d.$OzPlayingStatePriorityStrategy1=new(c("moz-player/shims/OzSubscriptionsHandler"))();d.$OzPlayingStatePriorityStrategy3=function(){d.emit("state_changed")};d.$OzPlayingStatePriorityStrategy2=b;d.$OzPlayingStatePriorityStrategy1.addSubscriptions(d.$OzPlayingStatePriorityStrategy2.addEventListener("playing",d.$OzPlayingStatePriorityStrategy3),d.$OzPlayingStatePriorityStrategy2.addEventListener("play",d.$OzPlayingStatePriorityStrategy3),d.$OzPlayingStatePriorityStrategy2.addEventListener("pause",d.$OzPlayingStatePriorityStrategy3));return d}var d=b.prototype;d.isActive=function(){return!0};d.getName=function(){return"playing_state"};d.setSourceBufferState=function(a){};d.getPriority=function(){return this.$OzPlayingStatePriorityStrategy2.isPlaying()?1:0};d.destroy=function(){this.$OzPlayingStatePriorityStrategy1.release()};return b}(c("moz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("moz-player/strategies/OzPositionToViewportPriorityStrategy",["moz-player/shims/OzEventEmitter","moz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$OzPositionToViewportPriorityStrategy3=new(c("moz-player/shims/OzSubscriptionsHandler"))();e.$OzPositionToViewportPriorityStrategy4=function(){e.emit("state_changed")};e.$OzPositionToViewportPriorityStrategy2=b;e.$OzPositionToViewportPriorityStrategy1=d;e.$OzPositionToViewportPriorityStrategy3.addSubscriptions(b.addListener("state_changed",e.$OzPositionToViewportPriorityStrategy4));return e}var d=b.prototype;d.isActive=function(){return!0};d.getName=function(){return"position_to_viewport"};d.setSourceBufferState=function(a){};d.getPriority=function(){var a=this.$OzPositionToViewportPriorityStrategy1.getNumber("prioritize_by_viewport_static_penalty"),b=this.$OzPositionToViewportPriorityStrategy2.getPositionIndexOfVideoFromViewportVertically();return a>0?b===-1?a*-1:0:b===-1?-Infinity:-1*b};d.destroy=function(){this.$OzPositionToViewportPriorityStrategy3.release()};return b}(c("moz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("moz-player/strategies/OzPriorityCalculator",["moz-player/shims/OzEventEmitter","moz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var d;d=a.call(this)||this;d.$OzPriorityCalculator2=new(c("moz-player/shims/OzSubscriptionsHandler"))();d.$OzPriorityCalculator1=b;(b=d.$OzPriorityCalculator2).addSubscriptions.apply(b,d.$OzPriorityCalculator1.map(function(a){return a.addListener("state_changed",function(b){d.emit("state_changed",d.compute(),a.getName())})}));return d}var d=b.prototype;d.setSourceBufferState=function(a){this.$OzPriorityCalculator1.forEach(function(b){return b.setSourceBufferState(a)}),this.emit("state_changed",this.compute(),"source_buffer")};d.compute=function(){var a=this.$OzPriorityCalculator1.reduce(function(a,b){b=b.isActive()?b.getPriority():0;return a+b},0);return Math.max(a,0)};d.destroy=function(){this.$OzPriorityCalculator2.release()};return b}(c("moz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("moz-player/strategies/OzStartupBufferTargetStrategy",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,b){this.$1=a,this.$3=b}var b=a.prototype;b.isActive=function(){var a=this.$1.isPlaying();a&&(this.$2=!0);return!this.$2};b.getBufferTarget=function(){return this.$3.getNumber("pre_start_buffer_ahead_target")};return a}();f["default"]=a}),66);
__d("moz-player/strategies/OzStreamSegmentsCountCalculator",[],(function(a,b,c,d,e,f){"use strict";var g=1;a=function(){function a(a){this.$1=a}var b=a.prototype;b.computeMin=function(a,b,c){var d=Number.MAX_VALUE;for(var e=this.$1,f=Array.isArray(e),h=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(f){if(h>=e.length)break;i=e[h++]}else{h=e.next();if(h.done)break;i=h.value}i=i;i.isActive(a)&&(d=Math.min(d,i.getSegmentsCount(a,b,c)))}return d===Number.MAX_VALUE?g:Math.max(d,g)};return a}();f["default"]=a}),66);
__d("moz-player/streams/OzEndOfStreamWatcher",["moz-player/shims/OzEventEmitter","moz-player/shims/ozvariant"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this)||this;d.$OzEndOfStreamWatcher1=new Map();d.$OzEndOfStreamWatcher2=b;d.$OzEndOfStreamWatcher3=c;return d}var d=b.prototype;d.registerMediaStream=function(a){this.$OzEndOfStreamWatcher1.has(a)&&c("moz-player/shims/ozvariant")(0,5191),this.$OzEndOfStreamWatcher1.set(a,!1)};d.notifyRepresentationSwitched=function(a){this.$OzEndOfStreamWatcher1.has(a)||c("moz-player/shims/ozvariant")(0,5192),this.$OzEndOfStreamWatcher4()};d.notifyMediaStreamEnded=function(a){this.$OzEndOfStreamWatcher1.has(a)||c("moz-player/shims/ozvariant")(0,5192),this.$OzEndOfStreamWatcher1.set(a,!0),this.$OzEndOfStreamWatcher4()};d.$OzEndOfStreamWatcher4=function(){var a=this,b=this.$OzEndOfStreamWatcher2.getMediaSource();(this.$OzEndOfStreamWatcher3.getBool("allow_queueing_end_of_stream_when_update")||b.readyState==="open")&&this.$OzEndOfStreamWatcher5()&&(this.$OzEndOfStreamWatcher3.getBool("delay_stream_end_for_sourceended")?this.$OzEndOfStreamWatcher2.notifyEndOfStream().then(function(){a.emit("streamEnd")})["catch"](function(){a.emit("streamEnd")}):(this.$OzEndOfStreamWatcher2.notifyEndOfStream(),this.emit("streamEnd")))};d.$OzEndOfStreamWatcher5=function(){if(this.$OzEndOfStreamWatcher1.size===0)return!1;for(var a=this.$OzEndOfStreamWatcher1.values(),b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;if(!d)return!1}return!0};d.destroy=function(){this.$OzEndOfStreamWatcher1.clear()};return b}(c("moz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("moz-player/streams/OzHandleUserRepresentationSwitch",["moz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d,e,f){var g=this;this.$4=null;this.$5=new(c("moz-player/shims/OzSubscriptionsHandler"))();this.$7=function(a,b){if(a!=="user")return;a=g.$6.getRepresentationIDAtTime(g.$2.getCurrentTime());var c;if(g.$4){for(var d=0;d<g.$3.length;d++)g.$3[d].getID()===a&&(c=g.$3[d]);if(c&&b&&c.getBandwidth()<b.getBandwidth()){a=c.getSegmentByTime(g.$2.getCurrentTime());a&&(g.$4&&g.$4.clearRange(g.$2.getCurrentTime(),g.$2.getDuration()))}}};this.$1=a;this.$2=b;this.$3=d;this.$6=e;f.then(function(a){g.$4=a});this.$5.addSubscriptions(e.addListener("switchRepresentation",this.$7.bind(this)))}var b=a.prototype;b.cleanup=function(){this.$5.release(),this.$5.engage()};return a}();g["default"]=a}),98);
__d("moz-player/networks/OzReadableStreamDataReader",["moz-player/networks/OzTransformStream","moz-player/utils/ozConcatArrayBuffer"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.$OzReadableStreamDataReader1=new ArrayBuffer(0);c.$OzReadableStreamDataReader2=b;return c}var d=b.prototype;d.onDataWritten=function(a){this.$OzReadableStreamDataReader1=c("moz-player/utils/ozConcatArrayBuffer")(this.$OzReadableStreamDataReader1,a.buffer)};d.onClose=function(){this.$OzReadableStreamDataReader2(this.$OzReadableStreamDataReader1)};return b}(c("moz-player/networks/OzTransformStream"));g["default"]=a}),98);
__d("moz-player/shims/ozPerformanceNow",["performanceNow"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("performanceNow")}),98);
__d("moz-player/networks/OzStreamingTask",["Promise","moz-player/loggings/OzLoggingUtils","moz-player/shims/OzDeferred","moz-player/shims/OzMaybeNativePromise","moz-player/shims/ozPerformanceNow","moz-player/utils/OzError","moz-player/utils/OzNetworkRequestLoggingUtils"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b){this.$3=new(c("moz-player/shims/OzDeferred"))(c("moz-player/shims/OzMaybeNativePromise")),this.$5=!1,this.$1=this.$2=new(c("moz-player/shims/OzDeferred"))(c("moz-player/shims/OzMaybeNativePromise")),this.$6=c("moz-player/shims/ozPerformanceNow")(),this.$7=b,this.$8=a}var e=a.prototype;e.run=function(){var a=this.$3.getPromise(),b=this.$7;if(b){var e=c("moz-player/shims/ozPerformanceNow")()-this.$6;d("moz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a,b,"streaming_task",function(){},function(a){a.setTimeToRequestSent(Math.floor(e))})["catch"](function(){})}this.$2.resolve();return a};e.cancel=function(){this.$3.getPromise()["catch"](function(){}),this.$3.reject(new(c("moz-player/utils/OzError"))({type:"OZ_STREAMING_TASK",description:"task cancelled",extra:{code:"OZ_ST-1"}})),this.$5=!0};e.finish=function(){this.$3.resolve()};e.isCancelled=function(){return this.$5};e.addStream=function(a,d,e){var f=new(c("moz-player/shims/OzDeferred"))(c("moz-player/shims/OzMaybeNativePromise"));this.$9({pausableStreamPromise:b("Promise").resolve({pausableStream:a,loggingPayloads:e}),changeStatusDeferred:f,createStreamDeferred:new(c("moz-player/shims/OzDeferred"))(c("moz-player/shims/OzMaybeNativePromise")),loggerProviderWithStreamContext:d,loggingPayloads:e});return{getStream:function(){return a.getStream()},cancel:function(){return a.pauseStream()},getStatusChangePromise:function(){return f.getPromise()}}};e.addStreamDeferred=function(a,b){var d=this,e=new(c("moz-player/shims/OzDeferred"))(c("moz-player/shims/OzMaybeNativePromise")),f=new(c("moz-player/shims/OzDeferred"))(c("moz-player/shims/OzMaybeNativePromise"));this.$9({pausableStreamPromise:a,changeStatusDeferred:e,createStreamDeferred:f,loggerProviderWithStreamContext:b});var g=function(){return f.getPromise()};return{genStream:g,cancel:function(){d.$8.getBool("fix_stream_deferred_cancel")?a&&a.then(function(a){a=a.pausableStream;return a.pauseStream()}):g().then(function(a){return a.pauseStream()})},getStatusChangePromise:function(){return e.getPromise()}}};e.$9=function(a){var b=this,e=a.pausableStreamPromise,f=a.changeStatusDeferred,g=a.createStreamDeferred,h=a.loggerProviderWithStreamContext,i=a.loggingPayloads;a=this.$1.getPromise();var j=c("moz-player/shims/ozPerformanceNow")(),k=this.$1=new(c("moz-player/shims/OzDeferred"))(c("moz-player/shims/OzMaybeNativePromise"));a.then(function(){return e}).then(function(a){if(a){var e=a.pausableStream;a.loggingPayloads&&(i=a.loggingPayloads);g.resolve(e.getStream());b.$4=e;var f=c("moz-player/shims/ozPerformanceNow")();a=b.$10(e.startStream());h&&d("moz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(a,h,"fetch_stream",function(){},function(a){i&&d("moz-player/utils/OzNetworkRequestLoggingUtils").setFetchStreamLoggingAttributes(a,i.getRequestUrl(),i.isPrefetch(),i.segments,f-j,e.getBytesStreamed(),i.getResponse())});return a}return null}).then(function(a){b.$4=null,k.resolve(),f.resolve(a||"cancelled")})["catch"](function(a){b.$4=null,b.$3.reject(a),f.reject(a)})};e.$10=function(a){return a.then(function(a){a=a.statusPromise;return a.then(function(a){return a==="stream_done"?"done":"error"})})};return a}();g["default"]=a}),98);
__d("moz-player/networks/OzStreamingTaskStateManager",["Promise","moz-player/networks/OzStreamingTask","moz-player/networks/OzStreamingTaskQueueProvider","moz-player/networks/getOzBandwidthEstimatorPipeThroughReporter","moz-player/shims/OzMaybeNativePromise","moz-player/shims/OzSubscriptionsHandler"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,e,f){var g=this;this.$3=new(c("moz-player/shims/OzSubscriptionsHandler"))();this.$4=0;this.$9=!1;this.$5=a;this.$1=b;this.$6=d("moz-player/networks/OzStreamingTaskQueueProvider").getQueue(this.$5);this.$7=e;this.$8=f;this.$3.addSubscriptions(this.$1.addListener("state_changed",function(a,b){g.$10(a,b),g.$2&&g.$6.updatePriority(g.$2,g.$4)}))}var e=a.prototype;e.startStream=function(a){var b=a.streamableSegments,c=a.networkManager;a=a.segmentsLoggerProvider;var d=this.$11(a),e=this.$12();c=c.createPausableStream(b,e,a);b=c.pausableStream;e=c.loggingPayloads;this.$9=!0;c=d.addStream(b,a,e);d={getStream:c.getStream,cancel:c.cancel,getStatusChangePromise:this.$13(c.getStatusChangePromise)};return d};e.$12=function(){var a=[];a.push(c("moz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$5));return a};e.startStreamDeferred=function(a){var b=a.segmentsPromise,d=a.networkManager,e=a.segmentsLoggerProvider;a=this.$11(e);var f=this.$12(),g=new(c("moz-player/shims/OzMaybeNativePromise"))(function(a,c){b.then(function(b){b.length>0?a(d.createPausableStream(b,f,e)):a(null)})["catch"](function(a){return c(a)})});this.$9=!0;a=a.addStreamDeferred(g,e);g={genStream:a.genStream,cancel:a.cancel,getStatusChangePromise:this.$13(a.getStatusChangePromise)};return g};e.$11=function(a){a=this.$2;this.$10(this.$1.compute(),"start_stream");!a||a.isCancelled()?(a=this.$2=new(c("moz-player/networks/OzStreamingTask"))(this.$8,this.$7),this.$6.enqueue(a,this.$4)["catch"](function(){})):this.$6.updatePriority(a,this.$4);return a};e.$13=function(a){var c=this;return function(){return a().then(function(a){c.$14();return a})["catch"](function(a){c.$14();return b("Promise").reject(a)})}};e.finishTaskIfNoOngoingStream=function(){this.$9||this.$15()};e.destroy=function(){this.$3.release();var a=this.$2;this.$2=null;a&&this.$6.remove(a)};e.$14=function(){this.$9=!1,this.$10(this.$1.compute(),"end_stream"),this.$4<d("moz-player/networks/OzStreamingTaskQueueProvider").OZ_QUEUE_MAX_PRIORITY&&this.$15()};e.$15=function(){this.$2&&(this.$2.finish(),this.$2=null)};e.$10=function(a,b){if(a===this.$4)return;this.$4=a;this.$7&&this.$7.getOperationLogger("priority_changed").setPriorityFloat(this.$4).setInitiator(b).log()};return a}();g["default"]=a}),98);
__d("moz-player/strategies/OzStreamLengthStrategy",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c,d,e){var f=a.getNumber("segments_to_stream_under_playhead_threshold");a=a.getNumber("low_segment_stream_playhead_threshold");f>0&&d.getCurrentTime()<a&&(b=f);d=[];d.push(e);for(var a=1;a<b;a++){f=c.getSegmentAfter(e);if(!f)break;e=f;d.push(e)}return d}f.getStreamingSegments=a}),66);
__d("moz-player/streams/OzMediaStreamLoopDriver",["moz-player/shims/ozClearTimeout","moz-player/shims/ozSetTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$2=null;this.$3=!1;this.$4=function(){b.$5();if(b.$3)return;var a=b.$1.execute(),d=b.$1.getLoopInterval();d&&(b.$2=c("moz-player/shims/ozSetTimeoutAcrossTransitions")(function(){b.$4()},d));a&&a.then(b.$4)["catch"](function(a){b.$5();a=b.$1.handleError(a);a?b.$2=c("moz-player/shims/ozSetTimeoutAcrossTransitions")(b.$4,a):b.$3=!0})};this.$1=a}var b=a.prototype;b.start=function(){if(this.$3)throw new Error("restart is not implemented");this.$4()};b.stop=function(){this.$5(),this.$3=!0};b.$5=function(){this.$2&&(c("moz-player/shims/ozClearTimeout")(this.$2),this.$2=null)};return a}();g["default"]=a}),98);
__d("moz-player/utils/OzRangeUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){b=b.filter(function(b){return b.startTime<=a&&b.endTime>=a});return b!=null&&b.length>0?b[0]:null}f.getRangeForTime=a}),66);
__d("moz-player/streams/OzSegmentLocator",["moz-player/utils/OzNumericalRangeUtil","moz-player/utils/OzRangeUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=a.getEndingSegment();return a!=null&&a.getSequenceNumber()!=null?a.getSequenceNumber():0}a=function(a,b,d,e,f,g){b=b.getCurrentTime();e=e==null?void 0:e.getBufferedRanges();var i=e?new(c("moz-player/utils/OzNumericalRangeUtil"))().findCurrentRangeIndex(b,e.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}})):0;if(i>=0&&e&&e[i].endTime>b+d)return null;e=a.getPredictedSegmentAfter(f);e||(e=a.getSegmentByTime(b));i=g&&g.getSequenceNumber()||0;d=e&&e.getSequenceNumber()||0;if(e&&g&&i>=d){f=h(a);return(f||0)>=i?g:null}return e};var i=function(a,b){a=a.getCurrentTime();a=b?d("moz-player/utils/OzRangeUtils").getRangeForTime(a,b.getBufferedRanges()):null;return a},j=function(a,b,c){b=i(a,b);c=c?c.getTimeRange().endTime:0;a=a.getCurrentTime()||0;c?a=c:b&&(a=b.endTime);return a};b=function(a,b,d,e,f,g,h,k){var l=a.getPredictedSegmentAfter(g);if(l&&b.isPlaying())return l;l=i(b,e);if(h.getBool("use_stream_end_time_in_segment_locator")&&l&&l.endTime===k)return null;l=j(b,e,g);k=f.getTimeRanges();e=new(c("moz-player/utils/OzNumericalRangeUtil"))().findDiffCoveredByRanges(b.getCurrentTime(),l,k.map(function(a){return{rangeStart:a.startTime,rangeEnd:a.endTime}}));if(e>d)return null;g=a.getSegment(0);h.getNumber("auto_seek_playhead_slack")===0&&g&&g.getTimeRange().startTime>l&&(l=g.getTimeRange().startTime);return a.getSegmentByTime(l)};g.getEndingSequenceNumber=h;g.getPredictedSegment=a;g.getTimeToQuery=j;g.getSegment=b}),98);
__d("moz-player/utils/OzTaggedTimeRanges",[],(function(a,b,c,d,e,f){a=function(){function a(a){this.$1=[],this.$2=0,this.$3=0,this.$4=a?a:function(a,b){return a===b}}var b=a.prototype;b.add=function(a,b,c){if(b<a)return;if(b===a)return;if(this.$1.length===0){this.$1.push({startTime:a,endTime:b,tag:c});return}var d=0,e=0;for(var f=0;f<this.$1.length;f++){if(a===this.$1[f].startTime&&b===this.$1[f].endTime){d=f;e=f+1;break}a>=this.$1[f].startTime&&(d=f+1);b<=this.$1[f].endTime&&(e=f);if(b<this.$1[f].startTime)break}this.$1.splice(d,e-d,{startTime:a,endTime:b,tag:c});this.$5(d)};b.$5=function(a){var b=this.$1[a],c=null;a!==0&&(c=this.$1[a-1]);c!==null&&(this.$4(c.tag,b.tag)?c.endTime>=b.startTime&&(this.$1.splice(a-1,2,{startTime:c.startTime,endTime:Math.max(b.endTime,c.endTime),tag:b.tag}),a--):(c.endTime>b.startTime&&c.startTime===b.startTime?(this.$1.splice(a-1,1),a--):c.endTime>b.startTime&&this.$1.splice(a-1,1,{startTime:c.startTime,endTime:b.startTime,tag:c.tag}),c.endTime>b.endTime&&this.$1.splice(a+1,0,{startTime:b.endTime,endTime:c.endTime,tag:c.tag})));c=null;a!==this.$1.length-1&&(c=this.$1[a+1]);c&&(this.$4(c.tag,b.tag)?c.startTime<=b.endTime&&this.$1.splice(a,2,{startTime:b.startTime,endTime:Math.max(c.endTime,b.endTime),tag:b.tag}):c.startTime<=b.endTime&&(c.endTime<b.endTime?(this.$1.splice(a,1,{startTime:b.startTime,endTime:c.startTime,tag:b.tag}),this.$1.push({startTime:c.endTime,endTime:b.endTime,tag:b.tag})):this.$1.splice(a+1,1,{startTime:b.endTime,endTime:c.endTime,tag:c.tag})))};b.get=function(a){var b=a>=this.$3?this.$2:0,c=null;for(var b=b;b<this.$1.length;b++)if(this.$1[b].startTime<=a&&a<this.$1[b].endTime){c=b;break}this.$2=c===null?0:c;this.$3=a;return c===null?null:this.$1[c].tag};b.getLength=function(){return this.$1.length};return a}();f["default"]=a}),66);
__d("moz-player/streams/OzMediaStream",["moz-player/networks/OzNetworkManager","moz-player/networks/OzReadableStreamDataReader","moz-player/networks/OzStreamingTaskStateManager","moz-player/networks/getOzBandwidthEstimatorPipeThroughReporter","moz-player/shims/OzDeferred","moz-player/shims/OzEventEmitter","moz-player/shims/OzMaybeNativePromise","moz-player/shims/OzSubscriptionsHandler","moz-player/shims/ozSetTimeoutAcrossTransitions","moz-player/shims/ozThrottle","moz-player/shims/ozvariant","moz-player/strategies/OzStreamLengthStrategy","moz-player/streams/OzMediaStreamLoopDriver","moz-player/streams/OzSegmentLocator","moz-player/utils/OzError","moz-player/utils/OzErrorEmitter","moz-player/utils/OzMimeUtil","moz-player/utils/OzRangeUtils","moz-player/utils/OzTaggedTimeRanges"],(function(a,b,c,d,e,f,g){"use strict";var h=1e3,i=.2;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e,f,g,h,j,k,l,m,n,o,p,q,r,s){var t;t=a.call(this)||this;t.$OzMediaStream2=0;t.$OzMediaStream3=[0,1,1,2,3,5,8,13,21,34];t.$OzMediaStream11=null;t.$OzMediaStream13=!1;t.$OzMediaStream14=null;t.$OzMediaStream15=new(c("moz-player/shims/OzSubscriptionsHandler"))();t.$OzMediaStream17=[];t.$OzMediaStream21=0;t.$OzMediaStream28=!0;t.$OzMediaStream30=!1;t.$OzMediaStream31=null;t.$OzMediaStream32=new(c("moz-player/utils/OzErrorEmitter"))();t.$OzMediaStream34=null;t.$OzMediaStream57=function(a){if(t.$OzMediaStream5!=null&&a!=null){var b=t.$OzMediaStream5.getSourceBufferState().getBufferedRanges();b=d("moz-player/utils/OzRangeUtils").getRangeForTime(a.startTime+i,b);b!=null&&t.$OzMediaStream24.add(a.startTime,b.endTime,a.tag)}};t.$OzMediaStream1=b;t.$OzMediaStream4=e;t.$OzMediaStream4.then(function(a){t.$OzMediaStream5=a,t.$OzMediaStream14&&t.$OzMediaStream14.setSourceBuffer(a),t.$OzMediaStream26.setSourceBufferState(a.getSourceBufferState()),t.$OzMediaStream35()});t.$OzMediaStream19=f;t.$OzMediaStream10=g;t.$OzMediaStream6=h;t.$OzMediaStream12=j;t.$OzMediaStream12.registerMediaStream(babelHelpers.assertThisInitialized(t));t.$OzMediaStream25=k;t.$OzMediaStream26=l;t.$OzMediaStream27=m;t.$OzMediaStream14=n;t.$OzMediaStream16=q.cloneContext();t.$OzMediaStream24=new(c("moz-player/utils/OzTaggedTimeRanges"))(function(a,b){return a.id===b.id});t.$OzMediaStream34=s;t.$OzMediaStream15.addSubscriptions(t.$OzMediaStream6.addEventListener("seeking",function(){if(t.$OzMediaStream1.getBool("fix_seek_performance"))t.restartLoopBody();else{var a;a=(a=t.$OzMediaStream8)==null?void 0:a.getTimeRange();var b=h.getCurrentTime();(!t.$OzMediaStream1.getBool("prevent_unnecessary_seek_stream_anchor_reset")||a&&!(a.startTime<=b&&a.endTime>b))&&(t.$OzMediaStream8=null,t.$OzMediaStream30=!1);t.$OzMediaStream23&&t.$OzMediaStream23.resolve()}}));t.$OzMediaStream34!=null&&t.$OzMediaStream15.addSubscriptions(t.$OzMediaStream34.onRepresentationBlocked(function(a){return t.$OzMediaStream36(a)}));t.$OzMediaStream20=d("moz-player/utils/OzMimeUtil").getMimeType(p.getMimeCodecs());t.$OzMediaStream29=new(c("moz-player/networks/OzStreamingTaskStateManager"))(t.$OzMediaStream20,t.$OzMediaStream26,t.$OzMediaStream16,t.$OzMediaStream1);t.$OzMediaStream22=new(c("moz-player/streams/OzMediaStreamLoopDriver"))(babelHelpers.assertThisInitialized(t));o===p.getID()?(t.$OzMediaStream7=p,t.$OzMediaStream19>0&&t.$OzMediaStream1.getBool("fix_prepended_segments_tagging")&&t.$OzMediaStream37(f,p)):t.$OzMediaStream38(p);return t}var e=b.prototype;e.start=function(){this.$OzMediaStream22.start()};e.getCurrentRepresentation=function(){return this.$OzMediaStream7};e.switchRepresentation=function(a){this.$OzMediaStream38(a,"user")};e.onError=function(a){return this.$OzMediaStream32.onError(a)};e.updateRunTimeConfigs=function(a){a=a.videoStreamDataHandler;a!==void 0&&(this.$OzMediaStream33=a)};e.$OzMediaStream38=function(a,b){var d=this;b===void 0&&(b="internal");var e=function(){var a=d.$OzMediaStream1.getBool("clear_buffer_when_switch_representation_initiator_is_user");return a?b==="user":!0};e()&&(this.$OzMediaStream8=null);e=this.$OzMediaStream16.cloneContext().setType(this.$OzMediaStream20+";init");var f=this.$OzMediaStream10.request([a.getInitSegment()],[c("moz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$OzMediaStream20)],e,"ENABLE_CACHE"),g=e.getOperationLogger("stream_switch").setPreviousRepresentationID(this.$OzMediaStream7?this.$OzMediaStream7.getID():null).setRepresentationID(a.getID()).setReason(this.$OzMediaStream14&&this.$OzMediaStream14.getLastEvaluationReason()).start();this.$OzMediaStream7=a;this.emit("switchRepresentation",b,a);this.$OzMediaStream39(f.getStream(),function(){g.log(),d.emit("initAppended"),d.$OzMediaStream12.notifyRepresentationSwitched(d)},function(a){g.setError(a).log();d.$OzMediaStream1.getBool("fallback_on_append_error")&&a instanceof c("moz-player/utils/OzError")&&a.getType()!=="OZ_NETWORK"&&d.$OzMediaStream32.emitError(a);(a=d.$OzMediaStream23)==null?void 0:a.resolve()},e.cloneContext(),0)};e.getLoopInterval=function(){return this.$OzMediaStream21};e.execute=function(){var a=this.$OzMediaStream40();if(a){var b=this.$OzMediaStream23=new(c("moz-player/shims/OzDeferred"))(c("moz-player/shims/OzMaybeNativePromise"));a.then(function(){return b.resolve()})["catch"](function(a){return b.reject(a)});return b.getPromise()}return null};e.$OzMediaStream41=function(a){a===void 0&&(a=null);if(this.$OzMediaStream14&&this.$OzMediaStream28&&(this.$OzMediaStream1.getBool("enable_abr_for_first_request")||this.$OzMediaStream13||this.$OzMediaStream19>0)){a=this.$OzMediaStream14.getBestRepresentation({segmentCount:a});if(this.$OzMediaStream7!==a)return a}return null};e.$OzMediaStream42=function(a){var b=this.$OzMediaStream5?this.$OzMediaStream5.getSourceBufferState():null,c=this.$OzMediaStream19>0?this.$OzMediaStream7.getSegment(this.$OzMediaStream19-1):null,e=null;a&&(e=this.$OzMediaStream7.getCustomFieldFirstSegment());if(this.$OzMediaStream1.getBool("pdash_use_pdash_segmentlocator")&&!e&&this.$OzMediaStream7.canPredict())e=d("moz-player/streams/OzSegmentLocator").getPredictedSegment(this.$OzMediaStream7,this.$OzMediaStream6,this.$OzMediaStream25.computeBufferTarget(),b,this.$OzMediaStream8||c,this.$OzMediaStream9);else{e||(e=d("moz-player/streams/OzSegmentLocator").getSegment(this.$OzMediaStream7,this.$OzMediaStream6,this.$OzMediaStream25.computeBufferTarget(),b,this.$OzMediaStream7,this.$OzMediaStream8||c,this.$OzMediaStream1,this.$OzMediaStream31));if(this.$OzMediaStream7.canPredict()){a=this.$OzMediaStream9&&this.$OzMediaStream9.getSequenceNumber()||0;var f=e&&e.getSequenceNumber()||0;if(e&&this.$OzMediaStream9&&a>=f){f=d("moz-player/streams/OzSegmentLocator").getEndingSequenceNumber(this.$OzMediaStream7);return(f||0)>=a?this.$OzMediaStream9:null}}}if(!e&&!this.$OzMediaStream43()&&this.$OzMediaStream1.getBool("append_last_segment_if_beyond_end")){f=this.$OzMediaStream7.getEndingSegment();if(f&&this.$OzMediaStream7.isEndingSegment(f)){a=f.getTimeRange().endTime;b=d("moz-player/streams/OzSegmentLocator").getTimeToQuery(this.$OzMediaStream6,b,this.$OzMediaStream8||c);b>=a&&!this.$OzMediaStream43()&&(e=f)}}return e};e.$OzMediaStream44=function(){return!this.$OzMediaStream13&&this.$OzMediaStream19===0};e.$OzMediaStream45=function(a,b){if(b)b=[a];else{var e=this.$OzMediaStream27.computeMin(this.$OzMediaStream6,a,this.$OzMediaStream7),f=this.$OzMediaStream41(e);if(f){this.$OzMediaStream38(f);f=this.$OzMediaStream42(!1);if(!f&&this.$OzMediaStream1.getBool("handle_switch_to_unparsed_representation_sidx"))return[];else if(f)return this.$OzMediaStream45(f,!1)}f=d("moz-player/strategies/OzStreamLengthStrategy").getStreamingSegments(this.$OzMediaStream1,e,this.$OzMediaStream7,this.$OzMediaStream6,a);b=c("moz-player/networks/OzNetworkManager").getStreamableSegmentsRange(f)}return b};e.$OzMediaStream46=function(){var a=this;return new(c("moz-player/shims/OzMaybeNativePromise"))(function(b,c){a.getCurrentRepresentation().forceParseIfNotParsed();var d=a.getCurrentRepresentation().addUpdateListener(function(){b(),a.$OzMediaStream18=null,d.remove()});a.$OzMediaStream18=d})};e.$OzMediaStream37=function(a,b){var c=this,d=b.addUpdateListener(function(){var e=b.getSegment(a-1);e!=null&&c.$OzMediaStream24.add(0,e.getTimeRange().endTime,{id:b.getID()});d.remove()})};e.$OzMediaStream47=function(a,b){var d=this;return new(c("moz-player/shims/OzMaybeNativePromise"))(function(b,c){c=d.$OzMediaStream42(a);c==null?b([]):b(d.$OzMediaStream45(c,a))})};e.$OzMediaStream40=function(){var a,b=this,d=this.$OzMediaStream5?this.$OzMediaStream5.getSourceBufferState():null,e=this.$OzMediaStream7.getID();if((a=this.$OzMediaStream34)==null?void 0:a.isBlocked(e)){this.$OzMediaStream36(e);return}if(this.$OzMediaStream7.canPredict()&&this.$OzMediaStream9&&this.$OzMediaStream7.isEndingSegment(this.$OzMediaStream9)){this.endStream();return}if(this.$OzMediaStream7.canPredict()&&this.$OzMediaStream8&&this.$OzMediaStream7.isEndingSegment(this.$OzMediaStream8)){this.endStream();return}a=this.$OzMediaStream44();e=this.$OzMediaStream42(a);if(this.$OzMediaStream30&&this.$OzMediaStream1.getBool("no_new_loop_body_promise_when_stream_ongoing")){this.$OzMediaStream21=h;return null}this.$OzMediaStream19>0&&this.$OzMediaStream1.getBool("maybe_end_stream_if_prepended_segments")&&!this.$OzMediaStream43()&&this.endStreamIfBufferedToEndTime();if(!e||this.$OzMediaStream30){this.$OzMediaStream21=h;this.$OzMediaStream30||this.$OzMediaStream29.finishTaskIfNoOngoingStream();return this.$OzMediaStream46()}this.$OzMediaStream21=0;var f=this.$OzMediaStream45(e,a);if(this.$OzMediaStream1.getBool("handle_switch_to_unparsed_representation_sidx")&&f.length===0)return this.$OzMediaStream46();this.$OzMediaStream13=!0;var g=f[f.length-1]||null;g&&this.$OzMediaStream7.isEndingSegment(g);var i=this.$OzMediaStream7,j=function(){return i.isEndingSegment(g)};f.length!==0||c("moz-player/shims/ozvariant")(0,23148);e=f[0];var k=e.getTimeRange().startTime,l=g.getTimeRange().endTime,m=this.$OzMediaStream16.cloneContext();m.setRepresentationID(this.$OzMediaStream7.getID()).setSegmentStartTime(k).setSegmentEndTime(l);var n,o,p=null,q=this.$OzMediaStream1.getBool("disable_audio_scheduler")&&this.$OzMediaStream20.indexOf("audio")!==-1;this.$OzMediaStream1.getBool("use_scheduler")&&!q&&!a?this.$OzMediaStream1.getBool("use_deferred_streaming_task")?o=this.$OzMediaStream29.startStreamDeferred({segmentsPromise:this.$OzMediaStream47(a,f),networkManager:this.$OzMediaStream10,sourceBufferState:d,playbackState:this.$OzMediaStream6,segmentsLoggerProvider:m}):n=this.$OzMediaStream29.startStream({streamableSegments:f,networkManager:this.$OzMediaStream10,sourceBufferState:d,playbackState:this.$OzMediaStream6,segmentsLoggerProvider:m}):n=this.$OzMediaStream10.request(f,[c("moz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$OzMediaStream20)],m);this.$OzMediaStream11=n;this.$OzMediaStream30=!0;var r=this.$OzMediaStream48(e,g,f.length),s={startTime:k,endTime:l,tag:{id:this.$OzMediaStream7.getID()}},t=m.getOperationLogger("queued_append");t.start().setReason(this.$OzMediaStream14&&this.$OzMediaStream14.getLastEvaluationReason());var u=function(a){b.$OzMediaStream39(a,function(a){t.setAppendedBufferMs(Math.round(a*1e3)).log(),f.forEach(function(a){b.emit("SegmentAppended",b.$OzMediaStream49(a))}),j()&&b.endStream(),b.$OzMediaStream19=0},function(a){t.setError(a).log();var d=o||n;d&&b.$OzMediaStream1.getBool("cancel_tracker_on_append_error")&&d.cancel();b.$OzMediaStream1.getBool("fallback_on_append_error")&&a instanceof c("moz-player/utils/OzError")&&a.getType()!=="OZ_NETWORK"&&b.$OzMediaStream32.emitError(a)},m,r,s)},v;!!o||!!n||c("moz-player/shims/ozvariant")(0,23147);o?(o.genStream().then(function(a){return u(a)})["catch"](function(a){return b.$OzMediaStream32.emitError(a)}),v=o.getStatusChangePromise()):n&&(u(n.getStream()),v=n.getStatusChangePromise());q=v.then(function(a){b.$OzMediaStream50(a,g);return b.$OzMediaStream51(p)}).then(function(){b.$OzMediaStream2=0});return q["catch"](function(a){var c;(c=b.$OzMediaStream34)==null?void 0:c.handleError(i.getID(),a);return b.$OzMediaStream1.getBool("emit_stream_error_event")?b.$OzMediaStream52(p,g).then(function(){return b.$OzMediaStream53(a,g)}):b.$OzMediaStream54(a,p,g)})};e.handleError=function(a){return 0};e.$OzMediaStream53=function(a,b){var d=this;this.$OzMediaStream30=!1;var e=new(c("moz-player/shims/OzDeferred"))(c("moz-player/shims/OzMaybeNativePromise")),f=function(a){d.$OzMediaStream2++,c("moz-player/shims/ozSetTimeoutAcrossTransitions")(function(){return e.resolve()},a)};a=this.$OzMediaStream55(a);var g=a[0];a=a[1];a={code:a,endStream:function(){d.$OzMediaStream9=b,d.endStream(),e.resolve()},error:g,failPlayback:function(){d.$OzMediaStream32.emitError(g),d.$OzMediaStream2=0,e.resolve()},retry:function(){f(0)},retryAttemptCount:this.$OzMediaStream2,retryWithTimeout:function(a){f(a)}};this.emit("streamError",a);return e.getPromise()};e.$OzMediaStream52=function(a,b){a&&a.finish();this.$OzMediaStream8=null;this.$OzMediaStream9=b;this.$OzMediaStream29.finishTaskIfNoOngoingStream();return this.$OzMediaStream5?this.$OzMediaStream5.cancelOperationAndCleanQueue():c("moz-player/shims/OzMaybeNativePromise").resolve()};e.$OzMediaStream50=function(a,b){var c=["error","done"];this.$OzMediaStream1.getBool("set_stream_anchor_only_on_done_status")&&(c=["done"]);c.indexOf(a)>=0&&(this.$OzMediaStream8=b)};e.$OzMediaStream51=function(a){this.$OzMediaStream30=!1,a&&a.finish()};e.$OzMediaStream55=function(a){var b,d;a instanceof c("moz-player/utils/OzError")?(b=a.getExtra().code||"",d=a):(b=a.status?a.status.toString():"0",d=new(c("moz-player/utils/OzError"))({type:"OZ_NETWORK",description:a.message,extra:{originalError:a,code:b,url:a.url}}));return[d,b]};e.$OzMediaStream54=function(a,b,d){this.$OzMediaStream30=!1;var e=this.$OzMediaStream55(a),f=e[0];e=e[1];var g=JSON.parse(this.$OzMediaStream1.getString("network_end_broadcasts_json"));if(g.includes(e)){this.$OzMediaStream9=d;this.endStream();return c("moz-player/shims/OzMaybeNativePromise").resolve()}g=JSON.parse(this.$OzMediaStream1.getString("network_skip_json"));if(g.includes(e)){b&&b.finish();this.$OzMediaStream8=d;this.$OzMediaStream29.finishTaskIfNoOngoingStream();return new(c("moz-player/shims/OzMaybeNativePromise"))(function(a,b){c("moz-player/shims/ozSetTimeoutAcrossTransitions")(a,0)})}var h=this.$OzMediaStream1.getBool("back_off_pdash_504_retry")?this.$OzMediaStream3[this.$OzMediaStream2++]:0;g=JSON.parse(this.$OzMediaStream1.getString("network_reload_mpd_json"));var i=this.$OzMediaStream1.getBool("fix_reload_manifest_retry");if(this.$OzMediaStream1.getBool("back_off_pdash_504_retry")&&h==null&&(!i||g.includes(e)))return this.$OzMediaStream56(a,f);if(h!=null&&g.includes(e)){b&&b.finish();this.$OzMediaStream8=null;this.$OzMediaStream9=d;this.$OzMediaStream29.finishTaskIfNoOngoingStream();if(this.$OzMediaStream5!=null)return this.$OzMediaStream5.cancelOperationAndCleanQueue().then(function(){return new(c("moz-player/shims/OzMaybeNativePromise"))(function(a,b){c("moz-player/shims/ozSetTimeoutAcrossTransitions")(a,h*1e3)})})}i=JSON.parse(this.$OzMediaStream1.getString("network_retry_intervals_json"));var j=i[e];if(j){b&&b.finish();this.$OzMediaStream29.finishTaskIfNoOngoingStream();return new(c("moz-player/shims/OzMaybeNativePromise"))(function(a,b){c("moz-player/shims/ozSetTimeoutAcrossTransitions")(a,j)})}return this.$OzMediaStream56(a,f)};e.$OzMediaStream56=function(a,b){this.$OzMediaStream32.emitError(b);this.$OzMediaStream2=0;return a instanceof c("moz-player/utils/OzError")&&a.getType()==="OZ_NETWORK"&&this.$OzMediaStream5?this.$OzMediaStream5.cancelOperationAndCleanQueue():c("moz-player/shims/OzMaybeNativePromise").resolve()};e.$OzMediaStream39=function(a,b,c,d,e,f){f===void 0&&(f=null),this.$OzMediaStream17.push({stream:a,dataAppendedCallback:b,dataAppendedErrorCallback:c,loggerProvider:d,appendTarget:e,timeRange:f}),this.$OzMediaStream5&&this.$OzMediaStream35()};e.$OzMediaStream35=function(){var a=this;this.$OzMediaStream17.forEach(function(b){var d=b.stream,e=b.dataAppendedCallback,f=b.dataAppendedErrorCallback,g=b.loggerProvider,h=b.appendTarget,i=b.timeRange;b=a.$OzMediaStream33==null?d:d.pipeThrough(new(c("moz-player/networks/OzReadableStreamDataReader"))(a.$OzMediaStream33.bind(a,a.$OzMediaStream7)));d=null;var j=a.$OzMediaStream1.getNumber("tagged_time_range_per_append_throttle");j>0&&(d=c("moz-player/shims/ozThrottle")(a.$OzMediaStream57.bind(a,i),j));a.$OzMediaStream5&&a.$OzMediaStream5.queueData(b,g,h,d).then(function(b){e(b.appendedSec),i&&a.$OzMediaStream7.canPredict()&&b.startTime_UNSAFE&&b.endTime_UNSAFE?a.$OzMediaStream24.add(b.startTime_UNSAFE,b.endTime_UNSAFE,i.tag):i&&a.$OzMediaStream24.add(i.startTime,i.endTime,i.tag)})["catch"](function(a){f(a)})});this.$OzMediaStream17=[]};e.$OzMediaStream48=function(a,b,c){var d=0,e=this.$OzMediaStream1.getNumber("appends_per_segment");if(e>0){a=a.getByteRange();b=b.getByteRange();a&&b&&b.endByte!=null&&(d=Math.ceil((b.endByte-a.startByte+1)/(c*e)))}d===0&&(d=this.$OzMediaStream1.getNumber("append_byte_target_without_range"));return d};e.getIsAdaptationEnabled=function(){return this.$OzMediaStream28};e.enableAdaptation=function(){this.$OzMediaStream28=!0};e.disableAdaptation=function(){this.$OzMediaStream28=!1};e.cleanup=function(){this.$OzMediaStream4.then(function(a){a.destroy()}),this.$OzMediaStream29.destroy(),this.$OzMediaStream15.release(),this.$OzMediaStream15.engage(),this.removeAllListeners(),this.$OzMediaStream18&&this.$OzMediaStream18.remove(),this.$OzMediaStream22.stop()};e.getRepresentationIDAtTime=function(a){var b=this.$OzMediaStream24.get(a);if(!b){var c=this.$OzMediaStream7.getTimeRanges();c=c[c.length-1];var d=.001;c&&a>=c.endTime&&a<=this.$OzMediaStream6.getDuration()+d&&(b=this.$OzMediaStream24.get(c.endTime-d))}return b?b.id:null};e.endStream=function(){this.$OzMediaStream12.notifyMediaStreamEnded(this),this.$OzMediaStream58()};e.endStreamIfBufferedToEndTime=function(){var a=this.$OzMediaStream7.getTimeRanges();if(a.length>0){a=a[a.length-1].endTime;if(this.$OzMediaStream5){var b=this.$OzMediaStream5.getSourceBufferState().getBufferedRanges();b.length>0&&(Math.abs(b[b.length-1].endTime-a)<i&&this.endStream())}}};e.$OzMediaStream49=function(a){return{type:this.$OzMediaStream20.charAt(0),segment:a,sourceBuffer:this.$OzMediaStream5?this.$OzMediaStream5.getDebug().SourceBuffer:null}};e.restartLoopBody=function(){this.$OzMediaStream8=null,this.$OzMediaStream30=!1,this.$OzMediaStream11&&this.$OzMediaStream11.cancel(),this.$OzMediaStream21!==0&&this.$OzMediaStream23&&this.$OzMediaStream23.resolve()};e.$OzMediaStream58=function(){if(this.$OzMediaStream5){var a=this.$OzMediaStream5.getSourceBufferState().getBufferedRanges();a.length>0&&(this.$OzMediaStream31=a[a.length-1].endTime)}};e.$OzMediaStream43=function(){return this.$OzMediaStream31!==null};e.$OzMediaStream36=function(a){this.$OzMediaStream7.getID()===a&&this.$OzMediaStream14!=null&&this.$OzMediaStream38(this.$OzMediaStream14.getBestRepresentation({forceEvaluation:!0}))};e.getDebug=function(){return{SourceBufferManager:this.$OzMediaStream5,MediaStreamAbrManager:this.$OzMediaStream14}};return b}(c("moz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("moz-player/utils/getRepresentationInCache",["moz-player/networks/RequestParamCreator"],(function(a,b,c,d,e,f,g){"use strict";var h=new(c("moz-player/networks/RequestParamCreator"))();function a(a,b){b===void 0&&(b=null);return a.find(function(a){a=a.getInitSegment();var c=a&&a.getByteRange();return a&&c&&b?b.hasCacheValue(h.createRequestParam(a.getURI(),c).uri.toString()):!1})||null}g["default"]=a}),98);
__d("moz-player/Player",["Promise","moz-player/configs/OzPlayerConfig","moz-player/drm/OzDrmManager","moz-player/loggings/OzDevConsolePerfLogger","moz-player/loggings/OzLoggingUtils","moz-player/loggings/OzMultiDestinationPerfLogger","moz-player/loggings/OzOperationLoggerObserver","moz-player/manifests/OzVideoRepresentation","moz-player/media_source/MediaSourceManager","moz-player/media_source/OzMediaSeekableRangeManager","moz-player/networks/OzNetworkManager","moz-player/parsers/OzMpdParser","moz-player/parsers/OzMpdUpdater","moz-player/parsers/OzXmlParserImplDOMParser","moz-player/parsers/OzXmlParserImplSax","moz-player/playback_controls/OzPlaybackTimeRangeManager","moz-player/playback_controls/OzPlayheadManager","moz-player/playback_controls/OzPlayheadNudger","moz-player/shims/OzEventEmitter","moz-player/shims/OzMaybeNativePromise","moz-player/shims/OzSubscriptionsHandler","moz-player/shims/ozClearTimeout","moz-player/shims/ozSetTimeoutAcrossTransitions","moz-player/shims/ozvariant","moz-player/states/OzObservedPlaybackState","moz-player/states/OzPositionToViewport","moz-player/strategies/OzAbrManager","moz-player/strategies/OzAudioIBRManager","moz-player/strategies/OzBlockedRepresentationsManager","moz-player/strategies/OzBufferAheadPriorityStrategy","moz-player/strategies/OzBufferAheadTargetStrategy","moz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy","moz-player/strategies/OzBufferTargetCalculator","moz-player/strategies/OzBufferingDetector","moz-player/strategies/OzLiveheadDeltaCatchupStrategy","moz-player/strategies/OzPausedStreamSegmentsCountStrategy","moz-player/strategies/OzPlayheadAtInterruptionDetector","moz-player/strategies/OzPlayingStatePriorityStrategy","moz-player/strategies/OzPositionToViewportPriorityStrategy","moz-player/strategies/OzPriorityCalculator","moz-player/strategies/OzStartupBufferTargetStrategy","moz-player/strategies/OzStaticStreamSegmentsStrategy","moz-player/strategies/OzStreamSegmentsCountCalculator","moz-player/streams/OzEndOfStreamWatcher","moz-player/streams/OzHandleUserRepresentationSwitch","moz-player/streams/OzMediaStream","moz-player/utils/OzError","moz-player/utils/OzErrorEmitter","moz-player/utils/OzPlaybackRestrictionsUtils","moz-player/utils/OzReadableStreamUtils","moz-player/utils/getRepresentationInCache"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a||c("moz-player/shims/ozvariant")(0,21876);return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(b){var e;e=a.call(this)||this;e.$Player4=new Map();e.$Player5=new Map();e.$Player9=void 0;e.$Player10=new(c("moz-player/shims/OzSubscriptionsHandler"))();e.$Player11=new(c("moz-player/utils/OzErrorEmitter"))();e.$Player25=[];e.$Player31=null;e.$Player32=null;e.$Player39=null;e.$Player48=!1;e.$Player50=null;e.$Player51=0;e.$Player52=null;e.$Player53=null;e.$Player54=0;e.$Player55=null;e.$Player56=null;e.$Player57=!1;e.$Player68=function(){var a=e.$Player3.getBool("xmlparser_use_domparser")?new(c("moz-player/parsers/OzXmlParserImplDOMParser"))():new(c("moz-player/parsers/OzXmlParserImplSax"))();return a};e.$Player66=function(a){var b=new(c("moz-player/parsers/OzMpdParser"))(e.$Player3,{mpdUrl:e.$Player17,createXmlParser:e.$Player68,customParsers:e.$Player27,customRepresentationParsers:e.$Player28,customSegmentTimelineParser:e.$Player29},e.$Player12,e.$Player15,e.$Player45,e.$Player59);e.$Player10.addSubscriptions(b.onError(e.$Player11.emitError));return b.parse(a)};e.$Player70=function(){e.$Player4.forEach(function(a){return a.endStreamIfBufferedToEndTime()})};e.$Player71=function(){e.$Player4.forEach(function(a){return a.endStream()})};e.$Player80=function(){var a=e.$Player49?e.$Player49():{width:e.$Player2.offsetWidth,height:e.$Player2.offsetHeight};return a};var f=b.audioOnly;f=f===void 0?!1:f;var g=b.videoNodeOrQuickStarter,h=b.config,i=b.rawMpdXml,j=b.mpdUrl;j=j===void 0?null:j;var k=b.loggerConfig;k=k===void 0?{perfLoggerProviders:[],observedOperationLoggers:[],isOzDevConsoleEnabled:!1}:k;var l=b.prefetchCache;l=l===void 0?null:l;var m=b.overrideOzRequestImplementation;m=m===void 0?null:m;var n=b.networkRequestStreamHandlers,o=b.getShouldIncludeCredentials;o=o===void 0?null:o;var p=b.getCustomRequestParametersForURI;p=p===void 0?null:p;var q=b.initialRepresentationIDs;q=q===void 0?[]:q;var r=b.debugCreateInitiator;r=r===void 0?null:r;var s=b.customParsers;s=s===void 0?new Map():s;var t=b.entityKey;t=t===void 0?"":t;var u=b.videoPlaybackRestrictions;u=u===void 0?[]:u;var v=b.customSegmentTimelineParser;v=v===void 0?null:v;var w=b.customRepresentationParsers;w=w===void 0?{}:w;var x=b.videoAbrManagerFactory;x=x===void 0?null:x;var y=b.seekHandler;y=y===void 0?null:y;var z=b.initialPlaybackPositionForDynamicMpd;z=z===void 0?-20:z;var A=b.liveheadFallBehindBlockThreshold;A=A===void 0?30:A;var B=b.liveheadFallBehindBlockMargin;B=B===void 0?5.9:B;var C=b.startTimeStamp;C=C===void 0?0:C;var D=b.drmProviders;D=D===void 0?[]:D;b=b.getVideoDimensions;b=b===void 0?null:b;e.$Player46=r;r=k.perfLoggerProviders;var E=k.observedOperationLoggers;k=k.isOzDevConsoleEnabled;e.$Player16=k||!1;e.$Player15=new(d("moz-player/loggings/OzMultiDestinationPerfLogger").OzMultiDestinationPerfLoggerProvider)(e.$Player60().concat(r));e.$Player1=f;e.$Player3=(k=h)!=null?k:new(c("moz-player/configs/OzPlayerConfig"))();e.$Player61();e.$Player22=new(c("moz-player/loggings/OzOperationLoggerObserver"))();e.$Player22.observe(E,e.$Player15);e.$Player24=l;e.$Player50=m;r=l&&l.getCachedRepresentations(t);e.$Player25=r||q;e.$Player27=s;e.$Player59=g instanceof HTMLVideoElement?new(c("moz-player/strategies/OzBlockedRepresentationsManager"))(e.$Player3):g.getBlockedRepresentationsManager();e.$Player10.addSubscriptions(e.$Player59.onRepresentationBlocked(function(a){e.emit("representationBlocked",a)}));e.$Player30=[e.$Player59].concat(u);e.$Player28=w;e.$Player29=v;e.$Player34=x;e.$Player35=y;e.$Player36=C;e.$Player37=z;e.$Player38=A;e.$Player40=B;e.$Player44=D;g instanceof HTMLVideoElement?(e.$Player2=g,e.$Player6=new(c("moz-player/media_source/MediaSourceManager"))(e.$Player2,e.$Player3,e.$Player15)):(e.$Player2=g.getVideoNode(),e.$Player6=g.getMediaSourceManager(),e.$Player7=g);e.$Player41=n;e.$Player42=o;e.$Player43=p;e.$Player12=new(c("moz-player/networks/OzNetworkManager"))(e.$Player3,e.$Player24,e.$Player41,e.$Player50,e.$Player42,e.$Player43);e.$Player17=j;e.$Player8=i;e.$Player13=new(c("moz-player/states/OzObservedPlaybackState"))(e.$Player2,e.$Player15);e.$Player49=b;e.$Player14=new(c("moz-player/streams/OzEndOfStreamWatcher"))(e.$Player6,e.$Player3);e.$Player10.addSubscriptions(e.$Player14.addListener("streamEnd",function(){e.$Player48=!0,e.emit("streamEnd")}));e.$Player23=new(c("moz-player/media_source/OzMediaSeekableRangeManager"))(e.$Player6,e.$Player3);e.$Player26=e.$Player62();e.$Player7==null&&(e.$Player47=e.$Player63());e.$Player3.getNumber("pixels_below_viewport_to_observe")>0&&(e.$Player58=new(c("moz-player/states/OzPositionToViewport"))(e.$Player2,e.$Player3));return e}var f=e.prototype;f.$Player64=function(a){this.$Player65();this.$Player7&&this.$Player10.addSubscriptions(this.$Player7.onError(this.$Player11.emitError));try{a=d("moz-player/loggings/OzLoggingUtils").executeOperationAndLog(this.$Player15.cloneContext().setInitiator(this.$Player46),"parse_manifest",this.$Player66.bind(this,a));this.$Player67(a)}catch(a){if(a instanceof c("moz-player/utils/OzError"))this.$Player11.emitError(a);else throw a}};f.$Player67=function(a){var b=this;this.$Player9=h(a);if(this.$Player17!==null&&this.$Player17!==void 0){var d=new(c("moz-player/parsers/OzMpdUpdater"))(this.$Player3,a,this.$Player12,this.$Player13,this.$Player15,{mpdUrl:null,createXmlParser:this.$Player68,customParsers:this.$Player27,customRepresentationParsers:this.$Player28,customSegmentTimelineParser:this.$Player29},this.$Player45);this.$Player69(d);this.$Player10.addSubscriptions(d.onError(this.$Player11.emitError),d.addListener("manifestFetchError",function(a){return b.emit("manifestFetchError",a)}),d.addListener("streamTransitionToStatic",this.$Player70.bind(this)),d.addListener("streamGone",this.$Player71.bind(this)));d.setupUpdateLoop();this.$Player21=d}this.$Player36=a.isStaticMpd()?this.$Player36:this.$Player37;this.$Player18=new(c("moz-player/playback_controls/OzPlayheadManager"))({video:this.$Player2,mpd:a,playheadCatchup:this.$Player33,playbackState:this.$Player13,config:this.$Player3,perfLoggerProvider:this.$Player15,seekHandler:this.$Player35,initialPlaybackPosition:this.$Player36});this.$Player19=new(c("moz-player/playback_controls/OzPlayheadNudger"))(this.$Player3,this.$Player2);this.$Player20=new(c("moz-player/playback_controls/OzPlaybackTimeRangeManager"))(this.$Player3,this.$Player2,a,this.$Player38,this.$Player40);this.$Player72();this.emit("mpdReady",a)};f.load=function(a){var b=this;this.$Player17=a;try{var d=this.$Player8;d!=null?this.$Player64(d):a!=null?this.$Player73(a).then(function(a){if(b.$Player57){b.$Player57=!1;b.load(b.$Player17);return}b.$Player8=a;b.$Player51=0;b.$Player64(a)})["catch"](function(d){if(b.$Player57){b.$Player57=!1;b.load(b.$Player17);return}d=d instanceof c("moz-player/utils/OzError")?d:new(c("moz-player/utils/OzError"))({type:"OZ_INITIALIZATION",description:"Unknown mpd url load failure: "+a+("; errorMessage: "+d.message+"; errorDescription: "+((d=d.description)!=null?d:"")+";")});b.$Player74(d,a)}):this.$Player11.emitError(new(c("moz-player/utils/OzError"))({type:"OZ_INITIALIZATION",description:"Cannot start Oz without a raw mpd xml or mpd url"}))}catch(a){d=a instanceof c("moz-player/utils/OzError")?a:new(c("moz-player/utils/OzError"))({type:"OZ_INITIALIZATION",description:"Failed to call load"+("; errorMessage: "+a.message+"; errorDescription: "+((d=a.description)!=null?d:"")+";")});this.$Player11.emitError(d)}};f.$Player73=function(a){this.$Player51++;a=this.$Player12.requestRawUrl(a,{},null,this.$Player15);a=a.getStream().getReader();return d("moz-player/utils/OzReadableStreamUtils").pumpString(a)};f.$Player75=function(){this.$Player52!=null&&(c("moz-player/shims/ozClearTimeout")(this.$Player52),this.$Player52=null)};f.$Player74=function(a,b){var d=this,e=!0,f=this.$Player51-1,g=a.getExtra().code;this.$Player53!==g?(this.$Player53=g,this.$Player54=1):this.$Player54++;g={cancelMpdUpdates:function(){},consecutiveFailuresForErrorCode:this.$Player54,error:a,isInitialMpdRequest:!0,preventDefault:function(){e=!1},retry:function(a){d.$Player75(),d.$Player52=c("moz-player/shims/ozSetTimeoutAcrossTransitions")(function(){d.$Player75(),d.load(b)},a!=null?a:1e3)},retryAttemptCount:f};this.$Player3.getNumber("initial_manifest_request_retry_count")>0&&this.emit("manifestFetchError",g);e&&this.$Player11.emitError(a)};f.updatePlayerRunTimeConfig=function(a){var b=a.manifestUrl;a=a.videoStreamDataHandler;if(a!==void 0){var c=this.$Player4.get("video");c&&c.updateRunTimeConfigs({videoStreamDataHandler:a})}b!=null&&b!==""&&this.$Player76(b)};f.$Player77=function(a,b){var c=this,e=a.getMimeCodecs(),f,g=0,h=null,i=this.$Player7;i&&(f=i.getSourceBufferManagerPromise(e),g=i.getPrependedSegmentsCount(e),this.$Player3.getBool("fix_quick_starter_overhead")&&(h=i.getRepresentationId(e)));f||(f=this.$Player6.createSourceBufferManager(e,this.$Player3.getBool("set_source_buffer_append_window_end")));this.$Player78(f,b,h,a,g);i=f;this.$Player47&&this.$Player3.getString("stream_types_eligible_for_partial_playback")!==""&&(i=f.then(function(a){c.$Player47&&c.$Player47.setSourceBufferState(b,a.getSourceBufferState());return a}));return d("moz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(i,this.$Player15,"source_attach",function(a){a.setType(b)}).then(function(a){return c.$Player18.observeSourceBufferState(a.getSourceBufferState(),b)})};f.isDrm=function(){var a=this.$Player45;if(a!==null&&a!==void 0){a=a.hasContentProtections();return a!=null?a:!1}return!1};f.$Player65=function(){if(this.$Player44.length>0){var a=this.$Player45=new(d("moz-player/drm/OzDrmManager").OzDrmManager)(this.$Player15,this.$Player2,{maxStartEMEAttempts:this.$Player3.getNumber("max_start_eme_attempts")});a.onError(this.$Player11.emitError);this.$Player44&&this.$Player44.forEach(a.addProvider,a);this.$Player28.drmProtections&&this.$Player11.emitError(new(c("moz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:'"drmProtections" is a reserved parser name for "customRepresentationParsers". Please rename your parser.'}));this.$Player28.drmProtections=a.parseContentProtectionForRepresentation.bind(this.$Player45)}};f.$Player79=function(a){var b=h(this.$Player9);a=[this.$Player3,a,b.getVideoRepresentations(),this.$Player30,this.$Player13,window.devicePixelRatio||1,this.$Player80.bind(this)];return this.$Player34?this.$Player34.apply(this,a):babelHelpers.construct(c("moz-player/strategies/OzAbrManager"),a)};f.$Player78=function(a,b,e,f,g){var i=this,j=h(this.$Player9),k=this.$Player5.get(b),l=new(c("moz-player/streams/OzMediaStream"))(this.$Player3,a,g,this.$Player12,this.$Player13,this.$Player14,this.$Player26,this.$Player81(),this.$Player82(k),k,e,f,this.$Player15.cloneContext().setType(b),null,this.$Player59);this.$Player36===0?l.start():this.$Player10.addSubscriptions(this.$Player18.addListener("initialPlaybackPositionSet",function(){i.$Player13.forceUpdateCurrentTime(),l.start()}));this.$Player10.addSubscriptions(l.onError(this.$Player11.emitError),this.$Player23.listenToMediaStreamInitAppended(l));b==="video"&&(this.$Player32=new(c("moz-player/streams/OzHandleUserRepresentationSwitch"))(this.$Player3,this.$Player13,d("moz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$Player30,this.$Player80(),j.getVideoRepresentations()),l,a));this.$Player4.set(b,l);this.$Player10.addSubscriptions(l.addListener("switchRepresentation",function(){if(i.$Player3.getBool("update_live_video_config_on_representation_switch")){var a=l.getCurrentRepresentation();i.$Player3.getBool("fix_setup_video_duration_on_representation_switch")||i.$Player83(a);i.$Player23.setTimeRangeProvider(a);i.$Player18.setTimeRangeProvider(a);i.$Player20!=null&&i.$Player20.setTimeRangeProvider(a)}b==="video"&&i.emit("switchVideoRepresentation")}),l.addListener("SegmentAppended",function(a){i.$Player84("SegmentAppended",a)}),l.addListener("streamError",function(a){i.emit("streamError",a)}))};f.$Player62=function(){return new(c("moz-player/strategies/OzBufferTargetCalculator"))([new(c("moz-player/strategies/OzStartupBufferTargetStrategy"))(this.$Player13,this.$Player3),new(c("moz-player/strategies/OzBufferAheadTargetStrategy"))(this.$Player3)])};f.$Player69=function(a){var b=this;if(this.$Player3.getNumber("stream_interrupt_check_mpd_stale_count_threshold")>0){var d=new(c("moz-player/strategies/OzPlayheadAtInterruptionDetector"))(this.$Player2);this.$Player10.addSubscriptions(d.addListener("playheadAtInterruption",function(a){b.$Player15.getOperationLogger("stream_interrupted").log(),b.emit("streamInterruptAt",a)}),a.addListener("streamInterruptAt",function(a){return d.notifyStreamInterrupted(a)}),a.addListener("streamResumedAt",function(a){b.$Player15.getOperationLogger("stream_resumed").log(),d.notifyStreamResumed(),b.emit("streamResumedAt",a)}));this.$Player31=d}};f.$Player81=function(){var a=[new(c("moz-player/strategies/OzPlayingStatePriorityStrategy"))(this.$Player13),new(c("moz-player/strategies/OzBufferAheadPriorityStrategy"))(this.$Player3,this.$Player13)].concat(this.$Player3.getNumber("pixels_below_viewport_to_observe")>0&&this.$Player58!=null?new(c("moz-player/strategies/OzPositionToViewportPriorityStrategy"))(this.$Player58,this.$Player3):[]);return new(c("moz-player/strategies/OzPriorityCalculator"))(a)};f.$Player82=function(a){var b=[new(c("moz-player/strategies/OzStaticStreamSegmentsStrategy"))(this.$Player3),new(c("moz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy"))(this.$Player26,this.$Player3)];this.$Player3.getNumber("paused_stream_segments_count")!==0&&b.push(new(c("moz-player/strategies/OzPausedStreamSegmentsCountStrategy"))(this.$Player13,this.$Player3));if(a){a=a.getStreamSegmentsCountStrategy();a&&b.push(a)}return new(c("moz-player/strategies/OzStreamSegmentsCountCalculator"))(b)};f.onError=function(a){return this.$Player11.onError(a)};f.getSelectedVideoQuality=function(){var a=this.$Player9;if(!a)return"";var b=this.$Player4.get("video");b=b&&b.getCurrentRepresentation();if(b instanceof c("moz-player/manifests/OzVideoRepresentation"))return b.getQualityLabel();b=a.getVideoRepresentations();a=b[0];if(a)return a.getQualityLabel();a||c("moz-player/shims/ozvariant")(0,19857);return""};f.switchToVideoQuality=function(a){var b=h(this.$Player9);b=b.getVideoRepresentations().find(function(b){return b.getQualityLabel()===a});if(b){var c=this.$Player4.get("video");c&&(c.switchRepresentation(b),c.disableAdaptation())}};f.getIsVideoQualityAdaptationEnabled=function(){var a=this.$Player4.get("video");return a?a.getIsAdaptationEnabled():!1};f.enableVideoQualityAdaptation=function(){var a=this.$Player4.get("video");a&&a.enableAdaptation()};f.getVideoQualities=function(){var a=this.$Player9;return!a?[]:a.getVideoRepresentations().map(function(a){return a.getQualityLabel()})};f.setEnableLiveheadCatchup=function(a){this.$Player20&&(a?this.$Player15.getOperationLogger("live_catchup_enabled").log():this.$Player15.getOperationLogger("live_catchup_disabled").log(),this.$Player20.setTimelineBlockingEnabled(a))};f.$Player72=function(){var a=this,c=this.$Player1?[this.$Player85({liveConfigsFromAudioStream:!0})]:[this.$Player86(),this.$Player85({})],d=[];return b("Promise").all(c).then(function(){var b=a.$Player4.get("video"),c=a.$Player4.get("audio");b&&d.push(b.getCurrentRepresentation());c&&d.push(c.getCurrentRepresentation());d.forEach(function(b){a.$Player10.addSubscriptions(b.addUpdateListener(function(){a.$Player84("SegmentIndexesUpdated",d)}))});a.$Player84("InitialSegmentIndexes",d);a.$Player2&&a.$Player2.style&&(a.$Player2.style.display=a.$Player1?"none":"block")})};f.$Player83=function(a){if(a.getTimeRanges().length){a=a.getTimeRanges()[a.getTimeRanges().length-1].endTime;this.$Player6.updateDuration(a)}};f.$Player87=function(a){this.$Player83(a),this.$Player23.setTimeRangeProvider(a),this.$Player18.setTimeRangeProvider(a),this.$Player20!=null&&this.$Player20.setTimeRangeProvider(a)};f.$Player86=function(){var a=h(this.$Player9);a=d("moz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$Player30,this.$Player80(),a.getVideoRepresentations(),this.$Player3.getBool("respect_initial_representation_on_setup")?this.$Player25:null);if(!a.length)return c("moz-player/shims/OzMaybeNativePromise").reject(new Error("no representation available."));this.$Player87(a[0]);var b=this.$Player88(a);if(this.$Player3.getBool("enable_adaptation")){var e=this.$Player79(b||a[0]);this.$Player5.set("video",e);this.$Player3.getBool("use_abr_for_missing_default_representation")&&!b&&(b=e.getBestRepresentation())}return this.$Player77(b||a[0],"video")};f.$Player85=function(a){a=a.liveConfigsFromAudioStream;a=a===void 0?!1:a;var b=h(this.$Player9);b=b.getAudioRepresentations();a&&this.$Player87(b[0]);return b.length?this.$Player77(this.$Player89(b)||b[0],"audio"):c("moz-player/shims/OzMaybeNativePromise").resolve()};f.getMpd=function(){return this.$Player9};f.destroy=function(a){var c=this;a=this.$Player15.getOperationLogger("unload").setInitiator(a).start();this.$Player75();this.$Player4.forEach(function(a){a.cleanup()});this.$Player32&&this.$Player32.cleanup();this.$Player4=new Map();this.$Player10.release();this.$Player10.engage();this.$Player13.destroy();this.$Player18&&this.$Player18.destroy();this.$Player19&&(this.$Player19.destroy(),this.$Player19=null);this.$Player20&&(this.$Player20.destroy(),this.$Player20=null);this.$Player45&&this.$Player45.destroy();this.$Player58&&this.$Player58.destroy();this.$Player12&&this.$Player12.destroy();this.$Player49&&(this.$Player49=null);this.$Player3.getBool("detach_media_source_manager")&&this.$Player6&&this.$Player6.detach();var d=b("Promise").resolve();this.$Player3.getBool("cleanup_video_node_on_destroy")&&(this.$Player2.pause(),this.$Player3.getBool("remove_src_attr_on_unload")?this.$Player2.removeAttribute("src"):this.$Player2.src="",this.$Player2.setMediaKeys&&"function"===typeof this.$Player2.setMediaKeys&&(d=this.$Player2.setMediaKeys(null)));this.$Player21&&this.$Player21.destroy();this.$Player31&&this.$Player31.destroy();this.$Player22.destroy();this.$Player23.destroy();this.$Player47&&this.$Player47.destroy();a.log();this.emit("destroyed");a=[d];return b("Promise").all(a).then(function(){c.$Player3.getBool("load_video_node_on_unload")&&c.$Player2.load()})};f.$Player88=function(a){var b=this,d;d=a.find(function(a){return b.$Player25.indexOf(a.getID())!==-1});if(!d&&this.$Player7&&this.$Player3.getBool("fix_quick_starter_overhead")){var e=this.$Player7.getRepresentationId("video");e!==null&&e!==void 0&&(d=a.find(function(a){return a.getID()===e}))}d||(d=c("moz-player/utils/getRepresentationInCache")(a,this.$Player24));return d||null};f.$Player89=function(a){var b=this,d=h(this.$Player9),e;e=a.find(function(a){return b.$Player25.indexOf(a.getID())!==-1});if(!e&&this.$Player7&&this.$Player3.getBool("fix_quick_starter_overhead")){var f=this.$Player7.getRepresentationId("audio");f!==null&&f!==void 0&&(e=a.find(function(a){return a.getID()===f}))}e||(e=c("moz-player/utils/getRepresentationInCache")(a,this.$Player24));if(!e&&!d.isStaticMpd()&&a.length>1&&this.$Player3.getBool("live_audio_ibr")){d=new(c("moz-player/strategies/OzAudioIBRManager"))(this.$Player3,this.$Player15);e=d.getInitialAudioRepresentation(a)}return e||null};f.$Player60=function(){var a=[];this.$Player16&&a.push(new(d("moz-player/loggings/OzDevConsolePerfLogger").OzDevConsolePerfLoggerProvider)());return a};f.$Player90=function(a,b){b=this.$Player4.get(b);return b?b.getRepresentationIDAtTime(a):null};f.getAudioRepresentationIDAtTime=function(a){return this.$Player90(a,"audio")};f.getVideoRepresentationIDAtTime=function(a){return this.$Player90(a,"video")};f.getCurrentVideoRepresentation=function(){return this.$Player91("video")};f.getCurrentAudioRepresentation=function(){return this.$Player91("audio")};f.$Player91=function(a){var b=this.$Player90(this.$Player13.getCurrentTime(),a),c=this.$Player9;if(!c)return null;var d=[];a==="audio"?d=c.getAudioRepresentations():a==="video"&&(d=c.getVideoRepresentations());return(a=d.find(function(a){return a.getID()===b}))!=null?a:null};f.getSelectedVideoRepresentation=function(){var a=this.$Player4.get("video");return a!=null?a.getCurrentRepresentation():null};f.getSelectedAudioRepresentation=function(){var a=this.$Player4.get("audio");return a!=null?a.getCurrentRepresentation():null};f.getDebug=function(){var a=this,b=this.$Player4.get("video"),c=this.$Player4.get("audio"),d,e,f,g,i;b&&(d=b.getDebug().MediaStreamAbrManager,e=b.getDebug().SourceBufferManager,e&&(f=e.getDebug().SourceBuffer));c&&(g=c.getDebug().SourceBufferManager,g&&(i=g.getDebug().SourceBuffer));return{getManifest:function(){return h(a.$Player9)},indentifiersIntact:!0,VideoSourceStream:b,VideoAbrManager:d,VideoBufferManager:e,VideoSourceBuffer:f,AudioSourceStream:c,AudioBufferManager:g,AudioSourceBuffer:i}};f.$Player84=function(a,b){this.emit("debug/dashPlayerEvent",{detail:{type:a,event:b}})};f.$Player61=function(){this.$Player3.getBool("live_playhead_catch_up")&&(this.$Player33=new(c("moz-player/strategies/OzLiveheadDeltaCatchupStrategy"))(this.$Player3))};f.$Player63=function(){var a=this,b=new(c("moz-player/strategies/OzBufferingDetector"))(this.$Player2,this.$Player3.getLegacyConfig(),function(){return a.$Player48?a.$Player2.duration:Infinity});this.$Player10.addSubscriptions(b.addListener("enterBuffering",function(){a.emit("enterBuffering")}),b.addListener("leaveBuffering",function(){a.emit("leaveBuffering")}));return b};f.getMpdUrl=function(){return this.$Player17};f.$Player76=function(a){var b=this;this.$Player17=a;var c=this.$Player9;if(!c){this.$Player57=!0;return}else{c.updateLocation(a);this.$Player39&&(this.$Player10.releaseOne(this.$Player39),this.$Player39=null);a=function(){b.$Player39&&(b.$Player10.releaseOne(b.$Player39),b.$Player39=null),b.$Player4.forEach(function(a,d){var e=a.getCurrentRepresentation(),f=e.getQualityLabel();e=d==="video"?c.getVideoRepresentations().slice():c.getAudioRepresentations().slice();if(d==="video"){d=b.$Player5.get(d);d&&d.updateRepresentations(c.getVideoRepresentations())}d=e[0];e.forEach(function(a){var b=a.getQualityLabel();b===f&&(d=a)});a.switchRepresentation(d);a.restartLoopBody()})};this.$Player39=c.addListener("updated",a);this.$Player10.addSubscriptions(this.$Player39)}};f.getApproximateFBLSToPlayerDisplayLatency=function(){var a;a=Number((a=(a=this.$Player9)==null?void 0:a.getCustomField("lastVideoFrameTs"))!=null?a:void 0);if(!this.$Player13.getCurrentTime()||isNaN(a))return null;var b=0;this.$Player55===a?b=(performance.now()-Number(this.$Player56))/1e3:(this.$Player56=performance.now(),this.$Player55=a);return a/1e3+b-this.$Player13.getCurrentTime()};return e}(c("moz-player/shims/OzEventEmitter"));g["default"]=a}),98);
__d("moz-player",["moz-player/Player"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("moz-player/Player")}),98);
__d("shouldUseOzPlayer",["FBLogger","MOzExperiments","ODS"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b===void 0&&(b=!1);if(!c("MOzExperiments").mtouch_use_oz_player)return!1;d("ODS").bumpEntityKey(2966,"MOzVideoPlayerApi","setup");var e,f=function(a){var b=/mimeType=\"([^\"]*)\"\s*codecs=\"([^\"]*)\"/g,d;while(d=b.exec(a)){d=d[1]+'; codecs="'+d[2]+'"';if(!window.MediaSource.isTypeSupported(d)){c("FBLogger")("mtouch_video").debug("Unsupported DASH type: %s",d);return!0}}return!1};!a.dashManifest?e="noDashManifest":!window.MediaSource?e="noMediaSourceSupport":!window.fetch?e="noFetch":!window.ReadableStream?e="noReadableStream":f(a.dashManifest)&&(e="codecNotSupported");if(e){b&&d("ODS").bumpEntityKey(2966,"MOzVideoPlayerApi","fallback."+e);return!1}return!0}g["default"]=a}),98);
__d("MOzVideoPlayerApi",["EventListener","FBLogger","MMediaFactory","MOzConfig","MOzDashPrefetchCache","MOzExperiments","MVideoDashPrefetchCache","MVideoExperiments","MVideoPlayerApiBase","MVideoPlayerOzPerfLoggerProvider","MVideoUtils","ODS","OzMinimumSmallestDimensionRestriction","VideoPlayerLoggerErrorStates","guid","handleManifestFetchErrorEvent","handleStreamErrorEvent","moz-player","moz-player/configs/MockOzConfig","moz-player/configs/OzGlobalConfig","moz-player/networks/OzBandwidthEstimator","moz-player/utils/OzError","shouldUseOzPlayer"],(function(a,b,c,d,e,f,g){d("moz-player/configs/OzGlobalConfig").setGlobalConfig(new(c("moz-player/configs/MockOzConfig"))(c("MOzExperiments")));d("MMediaFactory").populate();var h=720;function i(a){switch(a){case 1:return"The fetching process for the media resource was aborted by the user agent at the users request.";case 2:return"A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.";case 3:return"An error of some description occurred while decoding the media resource, after the resource was established to be usable.";case 4:return"The media resource indicated by the src attribute was not suitable."}return null}function j(a){switch(a){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return"Error code "+a+" is unknown"}}function k(a,b,d){b=c("MVideoDashPrefetchCache").createQueryStringURL(b);b=c("MVideoDashPrefetchCache").getCacheValue(b);if(!b){a.push(d);return null}return b}function l(a,b){return a.find(function(a){return a.segment_type===b})}function m(a,b,c){var d=l(b,"init");b=l(b,"data");if(d){var e=k(a,d,c+" init");if(!e)return null;var f;b&&(f=k(a,b,c+" data"));return{initializationPromise:e,segmentPromise:f,mimeCodec:d.mime_codec,representationID:d.representation_id}}return null}a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var e;e=a.call(this,b)||this;e.$MOzVideoPlayerApi4=null;e.$MOzVideoPlayerApi5=new(c("MOzConfig"))();e.getVideoQuality=function(){return e.$MOzVideoPlayerApi1};e.toggleVideoQuality=function(){if(!e.$MOzVideoPlayerApi2)return;var a=e.$MOzVideoPlayerApi2.getVideoQualities();if(!a||a.length===1)return;var b=a.indexOf(e.$MOzVideoPlayerApi1);b===-1&&(b=a.length-1);b=b>=a.length-1?0:b+1;a=a[b];e.$MOzVideoPlayerApi2.switchToVideoQuality(a);e.$MOzVideoPlayerApi1=a};e.$MOzVideoPlayerApi13=function(){e.getLogger().startBuffering(e.getVideoElement().currentTime),e.$MOzVideoPlayerApi3=e.getPreInitLoggerProvider().getOperationLogger("buffering").setType(e.isPlayScheduled()&&!e.isCurrentlyPlaying()?"start/unpause":"in_play").setInitiator(e.getLastActionReason()).start(),e.eventEmitter.emit("buffering")};e.$MOzVideoPlayerApi14=function(){e.getLogger().endBuffering(),e.$MOzVideoPlayerApi3&&(e.$MOzVideoPlayerApi3.log(),e.$MOzVideoPlayerApi3=null),e.eventEmitter.emit("buffered")};e.$MOzVideoPlayerApi7=function(a){d("ODS").bumpEntityKey(2966,"MOzVideoPlayerApi","error.onMediaElementError");a=e.getVideoElement().error;a&&e.$MOzVideoPlayerApi11(a,"onError",d("VideoPlayerLoggerErrorStates").PLAYBACK_FAILURE)};return e}var e=b.prototype;e.postInit=function(){var a=this,b=this.$MOzVideoPlayerApi5;this.$MOzVideoPlayerApi6(b);try{var e=this.getVideoData().dashManifest;if(!e)throw new Error("No manifest available in VideoData. Aborting.");this.getSubscriptions().addSubscriptions(c("EventListener").listen(this.getVideoElement(),"error",this.$MOzVideoPlayerApi7.bind(this)));try{var f=[this.getPreInitLoggerProvider()];this.getVideoData().quickStarter&&(f=f.concat(this.getVideoData().quickStarter.getObservedOperationLoggers()));this.$MOzVideoPlayerApi2=new(c("moz-player"))({videoNodeOrQuickStarter:this.getVideoData().quickStarter||this.getVideoElement(),config:b,rawMpdXml:e,getVideoDimensions:function(){return a.getDimensions()},loggerConfig:{perfLoggerProviders:this.$MOzVideoPlayerApi8(),observedOperationLoggers:f},prefetchCache:new(c("MOzDashPrefetchCache"))(),entityKey:this.getVideoID(),videoPlaybackRestrictions:this.$MOzVideoPlayerApi9(),customRepresentationParsers:this.$MOzVideoPlayerApi10()})}catch(a){d("ODS").bumpEntityKey(2966,"MOzVideoPlayerApi","error.createDashPlayer");throw a}this.$MOzVideoPlayerApi2.onError(function(b){return a.$MOzVideoPlayerApi11(b,"DashPlayer.onError")});this.$MOzVideoPlayerApi2.addListener("manifestFetchError",function(a){return c("handleManifestFetchErrorEvent")(b.getLegacyConfig(),a)});this.$MOzVideoPlayerApi2.addListener("streamError",function(a){return c("handleStreamErrorEvent")(b.getLegacyConfig(),a)});this.$MOzVideoPlayerApi2.addListener("mpdReady",function(b){a.$MOzVideoPlayerApi12()});this.$MOzVideoPlayerApi2.addListener("representationBlocked",function(b){a.logEvent("video_playback_fallback",{representation_id:b})});this.$MOzVideoPlayerApi2.load()}catch(a){d("ODS").bumpEntityKey(2966,"MOzVideoPlayerApi","failed.exception");this.$MOzVideoPlayerApi11(a,"caught");throw a}};e.$MOzVideoPlayerApi12=function(){var a=this.$MOzVideoPlayerApi2.getVideoQualities();a.length>1&&(this.$MOzVideoPlayerApi1=this.$MOzVideoPlayerApi2.getSelectedVideoQuality())};e.$MOzVideoPlayerApi9=function(){var a=[];this.getVideoData().defaultQuality==="HD"&&a.push(new(c("OzMinimumSmallestDimensionRestriction"))(h));return a};e.$MOzVideoPlayerApi10=function(){return{qualityLabel:function(a){try{return a.$.FBQualityLabel}catch(a){return null}}}};e.$MOzVideoPlayerApi6=function(a){if(!c("MOzExperiments").use_buffering_detector)return;this.$MOzVideoPlayerApi2.addListener("enterBuffering",this.$MOzVideoPlayerApi13.bind(this));this.$MOzVideoPlayerApi2.addListener("leaveBuffering",this.$MOzVideoPlayerApi14.bind(this))};e.onTimeUpdateBase=function(b){a.prototype.onTimeUpdateBase.call(this,b),c("MVideoExperiments").send_representation_ended&&this.$MOzVideoPlayerApi15(b.target.currentTime)};e.$MOzVideoPlayerApi15=function(a){a=this.$MOzVideoPlayerApi2.getVideoRepresentationIDAtTime(a);if(a!=null&&a!==this.$MOzVideoPlayerApi4){var b=this.$MOzVideoPlayerApi4;this.$MOzVideoPlayerApi4=a;b!=null&&this.logEvent("representation_ended",{representation_id:b,next_representation_id:a})}};e.$MOzVideoPlayerApi11=function(a,b,e){e===void 0&&(e=d("VideoPlayerLoggerErrorStates").PLAYER_FAILURE);var f="(empty)",g="(empty)",h=null,k=null,l=null;if(a){l=a.stack;if(a instanceof c("moz-player/utils/OzError")){var m=a.getExtra();g=a.getType();f=a.getDescription();h=m.code;k=m.url}else a.message?f=a.message:a.code?f=i(a.code):f=a.toString(),a.code?g=j(a.code):a.name?g=a.name:g=a.toString(),f=g+" "+(f?f:"(unknown)"),g="OZ_JAVASCRIPT_NATIVE"}m=(b?b+": ":"")+f;this.logEvent("error",{error:g,error_description:m,state:e,httpStatus:h,url:k,stack:l})};e.getPlayerVersion=function(){return"mtouch_oz"};e.getStreamingFormat=function(){return"dash"};e.$MOzVideoPlayerApi8=function(){var a,b=this,d=[];a=(a=this.getVideoData().disableLogging)!=null?a:!1;!a&&c("MVideoPlayerOzPerfLoggerProvider")&&c("MVideoPlayerOzPerfLoggerProvider").isEnabled&&typeof c("MVideoPlayerOzPerfLoggerProvider").isEnabled==="function"&&c("MVideoPlayerOzPerfLoggerProvider").isEnabled()&&(d.push(new(c("MVideoPlayerOzPerfLoggerProvider"))({videoID:this.getVideoID(),isLive:!1,video:this.getVideoElement(),uniqueID:c("guid")(),playerOrigin:this.getPlayerOrigin(),playerSuborigin:this.getPlayerSuborigin(),accessToken:null,representationId:null,preloadTime:this.getVideoData().preloadTime,getBandwidthEstimate:function(){return c("moz-player/networks/OzBandwidthEstimator").getAdjustedBandwidth(b.$MOzVideoPlayerApi5.getLegacyConfig())}})),this.getVideoData().preloadTime=null);return d};e.shouldDisablePlayDelay=function(){return c("MOzExperiments").immediate_play};e.shouldIgnoreInitialMuteOperation=function(){return c("MOzExperiments").ignore_initial_mute_operation};e.unload=function(){c("MOzExperiments").fix_call_destroy&&this.$MOzVideoPlayerApi2.destroy();var b=this.getVideoData();b.quickStarter&&(b.quickStarter=null);a.prototype.unload.call(this)};b.prepare=function(a,b,e){a=c("MVideoUtils").getVideoDataFromMVideo(a);var f=c("shouldUseOzPlayer")(a);a.preloadTime=Date.now();if(c("MOzExperiments").precreate_video_node&&f){f=d("MMediaFactory").get();a.videoElement=f.node;d("ODS").bumpEntityKey(2966,"MOzVideoPlayerApi","precreate_video_node");if(f.quickStarter){a.quickStarter=f.quickStarter;if(b&&c("MOzExperiments").feed_quick_starter&&(!c("MOzExperiments").no_quickstarter_for_ctp||!e||e.isAutoplayable())){f=[];e=m(f,b.prefetch_data.video,"video");if(e){a.quickStarter.addPrefetchTrack(e);e=m(f,b.prefetch_data.audio,"audio");e&&a.quickStarter.addPrefetchTrack(e)}f.length!==0&&!c("MOzExperiments").no_prefetch_for_ctp&&c("FBLogger")("mtouch_oz").mustfix("Unable to feed OzQuickStarter because some of the prefetches are missing: %s",f.join(", "))}}}};e.getAdditionalLogData=function(b){var d=a.prototype.getAdditionalLogData.call(this,b);c("MVideoExperiments").send_representation_ended&&b!=="representation_ended"&&b!=="video_playback_fallback"&&(d.representation_id=this.$MOzVideoPlayerApi4);this.$MOzVideoPlayerApi5&&(d.video_bandwidth=c("moz-player/networks/OzBandwidthEstimator").getBandwidth(this.$MOzVideoPlayerApi5.getLegacyConfig()));return d};return b}(c("MVideoPlayerApiBase"));g["default"]=a}),98);
__d("MEmbeddedVideoAudioOnlyControl.react",["cx","fbt","ix","Image.react","MAbstractButton.react","react"],(function(a,b,c,d,e,f,g,h,i,j){var k=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.onButtonClick=function(){c.props.onAudioOnlyClick&&c.props.onAudioOnlyClick()},b)||babelHelpers.assertThisInitialized(c)}var d=b.prototype;d.render=function(){var a=this.props.useSmallIcon===!0;a=this.props.isAudioOnly?a?k.jsx(c("Image.react"),{className:"_90dl",src:j("532618")}):k.jsx(c("Image.react"),{className:"_4aea",src:j("532620")}):a?k.jsx(c("Image.react"),{className:"_90dl",src:j("503312")}):k.jsx(c("Image.react"),{className:"_4aea",src:j("511443")});var b=this.props.isAudioOnly?i._("Turn On Video"):i._("Turn Off Video"),d=k.jsx("span",{className:"_8_7w",children:b});return k.jsx(c("MAbstractButton.react"),{"aria-label":b,className:"_9032 _4aec _8_7x",image:a,imageRight:d,onClick:this.onButtonClick.bind(this),ref:"button",tabIndex:"0",type:"button"})};return b}(k.Component);g["default"]=a}),98);
__d("MProgressiveVideoPlayerApi",["cx","CSS","DOM","MEmbeddedVideoAudioOnlyControl.react","MVideoPlayerApiBase","ODS","ReactDOMLegacy_DEPRECATED","nullthrows","promiseDone","react"],(function(a,b,c,d,e,f,g,h){var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){b=a.call(this,b)||this;b.$MProgressiveVideoPlayerApi1=!1;b.$MProgressiveVideoPlayerApi2=null;return b}var e=b.prototype;e.postInit=function(){a.prototype.postInit.call(this);var b=this.getVideoElement();this.$MProgressiveVideoPlayerApi4();var d=this.getShouldUseCustomControls();d?(this.getVideoElement().controls=!1,c("promiseDone")(this.setupControls())):this.$MProgressiveVideoPlayerApi5();b.load()};e.getShouldUseCustomControls=function(){if(this.getIsInMWERedesign())return!0;var a=this.getVideoData().playbackIsLiveStreaming;return a?!0:!1};e.getEmbeddedVideoControlsConfig=function(){var a=this.getVideoData().playbackIsLiveStreaming,b=this.getIsInMWERedesign();return{playbackControlHidden:!1,scrubberHidden:a,playbackTimerHidden:a,fullScreenControlHidden:!1,allowAudioOnly:this.shouldAllowAudioOnlyToggle(),hideControlsOnEnd:b,displayPermalinkButton:b&&a}};e.$MProgressiveVideoPlayerApi6=function(){d("ReactDOMLegacy_DEPRECATED").render(i.jsx(c("MEmbeddedVideoAudioOnlyControl.react"),{isAudioOnly:this.$MProgressiveVideoPlayerApi1,onAudioOnlyClick:c("nullthrows")(this.$MProgressiveVideoPlayerApi3),useSmallIcon:!0}),this.$MProgressiveVideoPlayerApi2)};e.$MProgressiveVideoPlayerApi5=function(){var a=this,b=this.getVideoData(),e=this.getVideoElement(),f=b.audioOnlyVideoSrc;this.shouldAllowAudioOnlyToggle()&&f&&(this.$MProgressiveVideoPlayerApi2=d("DOM").create("div"),d("DOM").insertBefore(e,this.$MProgressiveVideoPlayerApi2),c("CSS").addClass(c("nullthrows")(this.$MProgressiveVideoPlayerApi2),"_903b"),this.$MProgressiveVideoPlayerApi3=function(){e.pause(),a.$MProgressiveVideoPlayerApi1?a.$MProgressiveVideoPlayerApi7(e,b.effectiveSrc):e.setAttribute("src",f),e.load(),e.play(),d("ODS").bumpEntityKey(2966,"MOzLivePlayer",b.audioOnly?"iOSAudioOnlyToggle.off":"iOSAudioOnlyToggle.on"),a.$MProgressiveVideoPlayerApi1=!a.$MProgressiveVideoPlayerApi1,a.$MProgressiveVideoPlayerApi6()},this.$MProgressiveVideoPlayerApi6())};e.$MProgressiveVideoPlayerApi7=function(a,b){Array.isArray(b)&&b.length===1&&(b=b[0]),Array.isArray(b)?b.forEach(function(b){a.appendChild(d("DOM").create("source",b))}):b&&a.setAttribute("src",b)};e.$MProgressiveVideoPlayerApi4=function(){var a=this.getVideoData(),b=this.getVideoElement();this.$MProgressiveVideoPlayerApi7(b,a.effectiveSrc)};e.getAdditionalLogData=function(b){b=a.prototype.getAdditionalLogData.call(this,b);var c={},d=this.getVideoData().playbackIsLiveStreaming;d&&(c.playback_is_live_streaming=this.getVideoData().playbackIsLiveStreaming);(this.$MProgressiveVideoPlayerApi1||this.getVideoData().audioOnly===!0)&&(c.audio_only=!0);return babelHelpers["extends"]({},b,c)};e.getPlayerVersion=function(){return"html5"};return b}(c("MVideoPlayerApiBase"));g["default"]=a}),98);
__d("MSphericalVideoPlayerApi",["Bootloader","MProgressiveVideoPlayerApi","MVideoCache","MVideoUtils","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c.getVideoQuality=function(){return c.$MSphericalVideoPlayerApi1};c.toggleVideoQuality=function(){if(c.getVideoElement().tagName!=="VIDEO"||d("MVideoCache").isSupported()&&d("MVideoCache").getCachedVideoByID(c.getVideoID()))return;var a=c.getVideoData().availableQualities;if(!a)return;var b;for(var e in a)if(Object.prototype.hasOwnProperty.call(a,e)&&e!==c.$MSphericalVideoPlayerApi1){b=e;break}if(!b)return;c.$MSphericalVideoPlayerApi1=b;e=a[c.$MSphericalVideoPlayerApi1];if(!e)return;c.getVideoElement().pause();a=c.getVideoElement().currentTime;c.getVideoElement().setAttribute("src",e);c.getVideoElement().currentTime=a;c.getVideoElement().load();c.getVideoElement().play()};return c}var e=b.prototype;e.postInit=function(){var b=this;a.prototype.postInit.call(this);this.getVideoElement().load();this.$MSphericalVideoPlayerApi1=this.getVideoData().defaultQuality;c("promiseDone")(this.setupControls().then(function(){return b.play(b.getVideoPlayReason())}));this.$MSphericalVideoPlayerApi3()};e.prepareDOMNode=function(){a.prototype.prepareDOMNode.call(this),this.getVideoElement().setAttribute("crossorigin","anonymous")};e.$MSphericalVideoPlayerApi3=function(){var a=this;if(this.$MSphericalVideoPlayerApi2)return;var b=this.getVideoData();b=b&&b.sphericalParams||{};var d={projectionType:b.projection,initialHeading:b.initialYaw,initialPitch:b.initialPitch,fieldOfView:b.initialFieldOfView,expansionCoef:1.01};b={disableTouchControls:b.disableSphericalTouchControls};var e={videoID:this.getVideoID(),logEvent:this.logEvent.bind(this),viewportConfig:b};c("Bootloader").loadModules(["MVideoPlayerHTML5Spherical"],function(b){a.$MSphericalVideoPlayerApi2=new b(a,a.getVideoElement(),d,e),a.play()},"MSphericalVideoPlayerApi")};e.show=function(){a.prototype.show.call(this),this.toggleClassOnMVideoElement(c("MVideoUtils").SPHERICAL_CLASS,!0)};e.play=function(b){if(!this.getEmbeddedVideoControls()||!this.$MSphericalVideoPlayerApi2)return;a.prototype.play.call(this,b)};e.getEmbeddedVideoControlsConfig=function(){return{fullScreenControlHidden:!0}};e.unload=function(){a.prototype.unload.call(this),this.$MSphericalVideoPlayerApi2&&(this.$MSphericalVideoPlayerApi2.unload(),this.$MSphericalVideoPlayerApi2=null)};e.getPlayerVersion=function(){return"mtouch_360"};return b}(c("MProgressiveVideoPlayerApi"));g["default"]=a}),98);
__d("CvcV3HttpEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1856513");c=b("FalcoLoggerInternal").create("cvc_v3_http_event",a);e.exports=c}),null);
__d("CVCv3SubscriptionHelper",["CvcV3HttpEventFalcoEvent","DateConsts","guid"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,b,d){this.$1=a;this.$2=c("guid")();this.$3=((a=b)!=null?a:"null")+"::"+((b=d)!=null?b:"null");this.$4=null;this.$5=null}var b=a.prototype;b.isValidSubscription=function(){return!!this.$1};b.makeCVCv3StateUpdate=function(a,b,c,e){var f=null;a!=null&&!Number.isNaN(a)&&b!=null&&!Number.isNaN(b)&&(f={m:e,pf:Math.floor((b-a)*d("DateConsts").MS_PER_SEC),s:c,sa:Math.floor(a*d("DateConsts").MS_PER_SEC)});e={pps:this.$4,ps:f,si:this.$2,so:this.$3,vi:this.$1};this.$4=f;return e};b.makeUnifiedVideoCVCUpdate=function(a,b,c,d,e){a=this.makeCVCv3StateUpdate(a,b,c,d);this.$5!=null&&(a.tk=this.$5);return babelHelpers["extends"]({},a,e)};b.processUnifiedResponse=function(a){a=a;this.$5=a.tk;return a};b.clearAnyPreviousContext=function(){this.$4=null};b.logHttpRequestSuccess=function(a){var b=this;c("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_success",duration_ms:a!=null?a.toString():null,countable_id:b.$1}})};b.logHttpRequestFailure=function(a,b){var d=this;c("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_failed",error_msg:a,duration_ms:b!=null?b.toString():null,countable_id:d.$1}})};b.logHttpRequestTimeout=function(a){var b=this;c("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_timeout",duration_ms:a!=null?a.toString():null,countable_id:b.$1}})};b.logHttpResponseBad=function(a,b){var d=this;c("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_response_bad",error_msg:a,duration_ms:b!=null?b.toString():null,countable_id:d.$1}})};b.logDebugInfo=function(a){var b=this;c("CvcV3HttpEventFalcoEvent").log(function(){return{name:a,countable_id:b.$1}})};return a}();g["default"]=a}),98);
__d("XVideoUnifiedCVCController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/unified_cvc/",{})}),null);
__d("shouldDisableVideoLogging",[],(function(a,b,c,d,e,f){"use strict";function a(){return!1}f["default"]=a}),66);
__d("MVideoCVCv3Helper",["CVCv3SubscriptionHelper","DateConsts","MRequest","SubscriptionsHandler","XVideoUnifiedCVCController","clearInterval","clearTimeout","setTimeout","shouldDisableVideoLogging"],(function(a,b,c,d,e,f,g){"use strict";var h=10;a=function(){function a(a,b){var d=this;this.$2=a;this.$10=b;this.$11=!1;this.$1=new(c("CVCv3SubscriptionHelper"))(a.getVideoID(),a.getPlayerOrigin(),a.getPlayerSuborigin());this.$4=null;this.$5=!1;this.$6=new(c("SubscriptionsHandler"))();this.$6.addSubscriptions(this.$2.eventEmitter.addListener("playing",function(){d.$4=null,d.$5=!1,d.startUpdates()}),this.$2.eventEmitter.addListener("paused",function(){d.stopUpdates(),d.$5=!1}),this.$2.eventEmitter.addListener("finished",function(){d.stopUpdates(),d.$5=!1}),this.$2.eventEmitter.addListener("updateStatus",function(a){d.$4==null&&(d.$4=a.position),!d.$5&&d.$4+3<=a.position&&(d.$2.logEvent("played_for_three_seconds"),d.$5=!0)}));this.$2.isPlayingState()&&this.startUpdates()}var b=a.prototype;b.startUpdates=function(){this.$12(0)};b.stopUpdates=function(){this.$4=null,this.$3&&(c("clearInterval")(this.$3),this.$3=null),c("clearTimeout")(this.$7),c("clearTimeout")(this.$8),this.$7=null,this.$8=null,this.$1.clearAnyPreviousContext(),this.$9=null};b.destroy=function(){this.stopUpdates(),this.$6.release()};b.$12=function(a){var b=this;if(this.$7!=null||this.$9!=null||this.$11||c("shouldDisableVideoLogging")())return;this.$7=c("setTimeout")(function(){b.$7=null;var a=b.$13(),e=Date.now(),f=!1;a.listen("done",function(c){if(a!=b.$9)return;b.$9=null;c=b.$1.processUnifiedResponse(c.payload);b.$14(c,e)});a.listen("error",function(a){f=!0,b.$1.logHttpRequestFailure(a!=null?a.toString():null,Date.now()-e)});b.$9=a;a.send();b.$8=c("setTimeout")(function(){f||b.$1.logHttpRequestTimeout(Date.now()-e),b.$15()},h*d("DateConsts").MS_PER_SEC)},a)};b.$15=function(){this.$9=null,this.$16(),this.$12(0)};b.$16=function(){c("clearTimeout")(this.$8),this.$8=null};b.$13=function(){var a={};this.$10&&(a.ls=!0);var b=0,d=0;this.$4!=null&&(b=this.$4,d=this.$2.getCurrentTimePosition());b=this.$1.makeUnifiedVideoCVCUpdate(b,d,this.$2.isPlayingState()?"playing":"stopped",this.$2.getVideoElement().muted,a);d={d:JSON.stringify(b)};a=new(c("MRequest"))(c("XVideoUnifiedCVCController").getURIBuilder().getURI()).setMethod("POST").setIgnoreErrors(!0).setData(d);return a};b.$14=function(a,b){b=Date.now()-b;if(a!=null){a.d!=null?this.$1.logHttpRequestSuccess(b):this.$1.logHttpResponseBad("no data field",b);this.$16();if(a.a!=null){var c=a.a.t;switch(c){case"p":c=a.a.pi;c==null&&(c=h);this.$12(c*d("DateConsts").MS_PER_SEC);break;case"s":this.$11=!0;break;default:break}}}else this.$1.logHttpResponseBad("null response",b)};return a}();g["default"]=a}),98);
__d("XVideoCacheCleanUpController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video_cache_cleanup/",{video_ids:{type:"StringVector",required:!0}})}),null);
__d("MVideoCacheCleanUp",["MRequest","MVideoCache","MVideoCacheConfig","MVideoDownloadConfig","MVideoDownloadStateHandler","XVideoCacheCleanUpController","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){var g=1e4,h=null,i={clean:function(){i.deleteExpiredVideos();h=null;var a=b("MVideoCache").getCachedVideoIDs(!0);if(a.length==0){i.setLastCleanUpDate();return}a=b("XVideoCacheCleanUpController").getURIBuilder().setStringVector("video_ids",a).getURI();a=new(b("MRequest"))(a);a.setMethod("POST");a.listen("done",function(a){a=a.payload||{};if(!a.error){i.setLastCleanUpDate();a=[].concat(a.offlineDisabled,a.unaccessible,a.unsaved);a.length>0&&i.deleteVideosByID(a)}});a.send()},deleteExpiredVideos:function(){var a;a=(a=b("MVideoCache")).getCachedVideosMetadata([a.DOWNLOAD_STARTED_TIME,a.DOWNLOAD_REASON,a.OFFLINE_LIFESPAN]);var c=[],d=Date.now(),e=d-b("MVideoDownloadConfig").cache_auto_downloaded_videos_caching_interval_ms;for(var f in a){var g=a[f];(g.downloadReason==="auto_initiated"&&g.downloadStartedTime<e||g.downloadStartedTime<d-g.offlineLifespan)&&c.push(f)}c.length>0&&i.deleteVideosByID(c)},deleteVideosByID:function(a){b("MVideoCache").deleteVideosByID(a,function(a){b("MVideoDownloadStateHandler").deleted([a])},"cache_sync")},requestCleanUp:function(){if(b("MVideoCacheConfig").isSupported()&&b("MVideoCache").isSupported()){var a=i.getLastCleanUpDate(),c=Date.now()-b("MVideoDownloadConfig").cache_sync_interval_ms;a=a<c;a&&!h&&(h=b("setTimeoutAcrossTransitions")(function(){b("MVideoCache").makeLocalAsyncStorageConsistent(i.clean,function(a){b("MVideoDownloadStateHandler").deleted([a])})},g))}},getLastCleanUpDate:function(){if(b("MVideoCacheConfig").isSupported())return b("MVideoCacheConfig").getItemFromConfig(b("MVideoCacheConfig").KEYS.lastCleanUp);else return 0},setLastCleanUpDate:function(){if(b("MVideoCacheConfig").isSupported()){var a=Date.now();b("MVideoCacheConfig").setItemFromConfig(b("MVideoCacheConfig").KEYS.lastCleanUp,a)}},checkAccess:function(a){a=a.downloadStartedTime;var c=i.getLastCleanUpDate();a=Math.max(a,c);c=Date.now();i.requestCleanUp();a=a+b("MVideoDownloadConfig").allowed_offline_access_interval_ms;a=a>c;return a}};e.exports=i}),null);
__d("MVideoMediaSourceState",[],(function(a,b,c,d,e,f){a=function(){function a(a){this.$2=!1,this.$1=!1,this.$3=a}var b=a.prototype;b.getMediaSource=function(){return this.$3};b.videoStreamEnded=function(){this.$2=!0,this.$4()};b.audioStreamEnded=function(){this.$1=!0,this.$4()};b.$4=function(){this.$1&&this.$2&&this.$3.endOfStream()};return a}();f["default"]=a}),66);
__d("VideoPlayerReason",[],(function(a,b,c,d,e,f){a=Object.freeze({AUTOPLAY:"autoplay_initiated",COMMERCIAL_BREAK:"commercial_break",CONNECTION:"host-connection-error",EMBED_SHARESHEET_VISIBILITY_CHANGE:"embed_sharesheet_visibility_change",EMBEDDED_VIDEO_API:"embedded_video_api_initiated",FALLBACK_MODE:"fallback_mode",HOVER:"hover",LIVING_ROOM_COMMENTATING:"living_room_commentating",LOOP:"loop_initiated",NETWORK_INTERRUPTED:"network_interrupted",NETWORK_RESUMED:"network_resumed",PAGE_VISIBILITY:"page_visibility_initiated",RAID:"raid_initiated",SEEK:"seek_initiated",SPHERICAL_FALLBACK:"spherical_fallback",SPHERICAL_SWITCH_CANVAS:"spherical_switch_canvas",SPHERICAL_FAILED:"spherical_failed",UNLOADED:"unloaded",USER:"user_initiated",VIDEO_DATA_REPLACED:"video_data_replaced",VIDEO_DATA_SWITCH:"video_data_switch",VIDEO_VISIBILITY:"video_visibility_initiated",VOD_NOT_READY:"vod_not_ready",WARNING_SCREEN_COVER:"warning_screen_cover",UNKNOWN:"unknown",HIVE_RELOAD:"hive_reload",COMMENT_MODAL:"comments_modal",SOUND_TOGGLE_ON_MANUAL:"FBVideoSoundToggleComponent-SoundToggleSettingOnByToggleManual"});f["default"]=a}),66);
__d("XVideoHomeFeedController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/watch/",{extid:{type:"String"},comment_id:{type:"FBID"},cursor:{type:"String"},ref:{type:"String"},t:{type:"Int"},v:{type:"String"},external_log_id:{type:"String"},q:{type:"String"},__ft__:{type:"String"},page_id:{type:"FBID"},is_arltw:{type:"Bool",defaultValue:!1},comments_modal:{type:"Bool",defaultValue:!1}})}),null);
__d("showVideoUnavailableDialog",["fbt","MCustomDialog"],(function(a,b,c,d,e,f,g,h){function a(){var a=h._("Videos no longer available"),b=h._("Please connect to the Internet and try again."),c=h._("OK");d("MCustomDialog").show({titleString:a,descriptionString:b,dismissButtonString:c})}g["default"]=a}),98);
__d("MInlineVideo",["EventListener","FBLogger","MFullScreen","MLegacyDataStore","MOzLiveVideoPlayerApi","MOzVideoPlayerApi","MProgressiveVideoPlayerApi","MSphericalVideoPlayerApi","MVideoCVCv3Helper","MVideoCache","MVideoCacheCleanUp","MVideoDownloadConfig","MVideoExperiments","MVideoMediaSourceState","MVideoUtils","Stratcom","SubscriptionsHandler","VideoHomeTypedLogger","VideoPlayerReason","XVideoHomeFeedController","emptyFunction","getElementPosition","shouldUseOzPlayer","showVideoUnavailableDialog","throttle"],(function(a,b,c,d,e,f,g){var h,i,j=!1,k=null,l=null,m;function a(a,b){b&&(h=b);if(j)return;a&&a.setup();c("Stratcom").listen("click",c("MVideoUtils").VIDEO_WITH_WATCH_PATHING,w);c("Stratcom").listen("click",c("MVideoUtils").COMMENT_WITH_WATCH_PATHING,x);c("Stratcom").listen("click",c("MVideoUtils").PLAY_SIGIL,z);c("Stratcom").listen("click",c("MVideoUtils").VIDEO_END_SCREEN_WATCH_AGAIN_SIGIL,y);c("Stratcom").listen("m:video:comment:click",null,function(){r(c("VideoPlayerReason").COMMENTS_MODAL)});c("Stratcom").listen("m:video:comment:done:click",null,function(){s(c("VideoPlayerReason").COMMENTS_MODAL)});c("Stratcom").listen("m:page:unload",null,o);b=["m:jewel:flyout:open","m:popup:show","m:side-area:show","m:feed-ufi:show","m:chrome:tab:show"];c("Stratcom").listen(b,null,p);c("MVideoExperiments").remove_hidden_video_on_blur&&c("EventListener").listen(window,"blur",H);j=!0}function n(){k&&k.isVisible()&&k.getVideoData().playInFullScreen&&!c("MFullScreen").isFullScreen()&&(o(),c("MFullScreen").removeFullScreenEventListeners(window,n))}function o(){if(!k)return;c("MVideoExperiments").reuse_api_instance?k.unload():k.destroy();l!=null&&(l.destroy(),l=null);k=null;i=null;m&&(m.release(),m=null)}function p(){if(!k||!k.hasActivePlayer())return;d("MLegacyDataStore").get(i).type!=="video"?o():k&&(k.pause("page_visibility_initiated"),k.hide())}function q(){return k?k.getLastActionReason():"user_initiated"}function b(){return i}function r(a){k&&k.pause(a)}function s(a){k&&k.play(a)}function e(){k&&k.unmute()}function f(){k&&k.mute()}function t(a){k&&k.setLastActionReason(a)}function u(a,b){var d=null,e=null;b.videoCodec?(d=a.getMediaSource().addSourceBuffer('video/mp4; codecs="'+b.videoCodec+'"'),d.addEventListener("updateend",function(){a.videoStreamEnded()},!1)):a.videoStreamEnded();b.audioCodec?(e=a.getMediaSource().addSourceBuffer('audio/mp4; codecs="'+b.audioCodec+'"'),e.addEventListener("updateend",function(){a.audioStreamEnded()},!1)):a.audioStreamEnded();b.videoCodec&&c("MVideoCache").getCachedVideoStream(b,function(a){var b=new FileReader();b.addEventListener("loadend",function(){d.appendBuffer(b.result)});b.readAsArrayBuffer(a)},c("emptyFunction"));b.audioCodec&&c("MVideoCache").getCachedAudioStream(b,function(a){var b=new FileReader();b.addEventListener("loadend",function(){e.appendBuffer(b.result)});b.readAsArrayBuffer(a)},c("emptyFunction"))}function v(a,b){var d=null,e=null,f=null,g=null,h=function(a,b,c){b.getNextBuffer(function(b){if(b){var d=new FileReader();d.addEventListener("loadend",function(){a.appendBuffer(d.result)});d.readAsArrayBuffer(b)}else c()})};b.videoCodec?(f=c("MVideoCache").getCachedVideoStreamObject(b),d=a.getMediaSource().addSourceBuffer('video/mp4; codecs="'+b.videoCodec+'"'),d.addEventListener("updateend",function(){h(d,f,function(){a.videoStreamEnded()})},!1)):a.videoStreamEnded();b.audioCodec?(g=c("MVideoCache").getCachedAudioStreamObject(b),e=a.getMediaSource().addSourceBuffer('audio/mp4; codecs="'+b.audioCodec+'"'),e.addEventListener("updateend",function(){h(e,g,function(){a.audioStreamEnded()})},!1)):a.audioStreamEnded();b.videoCodec&&h(d,f,function(){a.videoStreamEnded()});b.audioCodec&&h(e,g,function(){a.audioStreamEnded()})}function w(a,b){b||(b=a.getNode(c("MVideoUtils").INSERTION_POINT_SIGIL));if(!b){c("FBLogger")("mtouch_video").warn("newVideoElement is not defined");return}a=c("MVideoUtils").getVideoDataFromMVideo(b);a=a.videoID;var d=document.querySelector("video"),e=c("getElementPosition")(b).y,f=c("getElementPosition")(d).y,g=0;new(c("VideoHomeTypedLogger"))().setEvent("click").setEventTarget("video").setClickPoint("msite_inline_video").log();if(d!=null&&e===f)g=Math.floor(d.currentTime);else return;e=c("XVideoHomeFeedController").getURIBuilder().setString("v",a).setBool("is_arltw",!0).setInt("t",g).getURI().toString();f=b.children;if(f.length>1){d=f[1];d&&d.id===c("MVideoUtils").VIDEO_WITH_WATCH_PATHING&&d.setAttribute("href",e)}}function x(a){a=a.getNode(c("MVideoUtils").COMMENT_WITH_WATCH_PATHING);var b=document.querySelector("video"),d=c("getElementPosition")(b).y,e=c("getElementPosition")(a).y;d=d+b.offsetHeight;var f=0;new(c("VideoHomeTypedLogger"))().setEvent("click").setEventTarget("msite_comments_pathing").setClickPoint("msite_comments_button").log();if(d<e&&d+100>e)f=Math.floor(b.currentTime);else return;d=a.getAttribute("href");e=d.indexOf("?v=")+3;b=d.indexOf("&is_arltw");if(e<b){d=d.substring(e,b);e=c("XVideoHomeFeedController").getURIBuilder().setString("v",d).setBool("is_arltw",!0).setBool("comments_modal",!0).setInt("t",f).getURI().toString();a.setAttribute("href",e)}}function y(a,b,d,e){b||(b=a.getNode(c("MVideoUtils").INSERTION_POINT_SIGIL));if(!b){c("FBLogger")("mtouch_video").warn("newVideoElement is not defined");return}if(k&&k.getMVideoElement()===b){s(e);return}a=c("MVideoUtils").getVideoDataFromMVideo(b);a.muted=a.playMuted!=null?a.playMuted:!!d;(!k||k.getMVideoElement()!==b)&&(c("Stratcom").invoke("m:video:player:prepare",null,{videoElement:b}),o(),i=b,(i===null||i===void 0)&&c("FBLogger")("mtouch_video").warn("mVideoContainer is not available"),k=B(a),k.init(e));k.show();k.play(e)}function z(a,b,c,d){A(a,b,c,d)}function A(a,b,d,e){b||(b=a.getNode(c("MVideoUtils").INSERTION_POINT_SIGIL));if(!b){c("FBLogger")("mtouch_video").warn("newVideoElement is not defined");return!1}e=e||"user_initiated";var f=c("MVideoUtils").getVideoDataFromMVideo(b),g=c("MVideoCache").isVideoDownloading(f.videoID);if(g)return!1;if(k&&k.getMVideoElement()===b&&k.isVisible())return!1;a&&a.prevent();f.effectiveSrc=f.src;var h=c("MVideoCache").isSupported()&&f.canUseOffline&&c("MVideoCache").getCachedVideoByID(f.videoID);if(h){g=h&&c("MVideoCacheCleanUp").checkAccess(h);c("MVideoCache").logPlaybackRequest(f.videoID,g,e);if(!g){c("showVideoUnavailableDialog")();return!1}else{var i=new(c("MVideoMediaSourceState"))(new MediaSource());i.getMediaSource().addEventListener("sourceopen",function(){c("MVideoDownloadConfig").cache_chunked_playback_enabled?v(i,h):u(i,h)},!1);f.effectiveSrc=window.URL.createObjectURL(i.getMediaSource())}}f.muted=f.playMuted!=null?f.playMuted:!!d;return C(a,b,f,e)}function B(a){a=D(a);return new a(i)}function C(a,b,d,e){if(!k||k.getMVideoElement()!==b){c("Stratcom").invoke("m:video:player:prepare",null,{videoElement:b});o();i=b;(i===null||i===void 0)&&c("FBLogger")("mtouch_video").warn("mVideoContainer is not available");c("MVideoExperiments").create_api_on_serverside?(k=d[c("MVideoUtils").API_INSTANCE_KEY],k||(c("MVideoExperiments").reuse_api_instance&&c("FBLogger")("mtouch_video").mustfix("_videoUnit is expected but not found"),k=B(d))):k=B(d);k.init(e);h&&h.setVideoUnit(k);b=(b=d==null?void 0:d.disableLogging)!=null?b:!1;d.playbackIsLiveStreaming&&!b&&(l=new(c("MVideoCVCv3Helper"))(k,d.playbackIsLiveStreaming))}k.show();b=d.playOnClick&&d.type==="video";b&&(k.play(e),l!=null&&l.startUpdates(),d.playInFullScreen&&c("MFullScreen").isSupported()&&(c("MFullScreen").listenForFullScreenEvent(window,n),d.useOzLive?(c("MFullScreen").enableFullScreen(i),screen&&screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape")):c("MFullScreen").enableFullScreen(k.getVideoElement())));k.showLoadingSpinner();E(i,d,k.getVideoElement());a&&c("MVideoUtils").handleLoggingOnPlay(a,k,d);return b}function D(a){if(a.useOzLive)return c("MOzLiveVideoPlayerApi");else if(c("MVideoExperiments").enableSphericalVideo&&a.spherical)return c("MSphericalVideoPlayerApi");else if(c("shouldUseOzPlayer")(a,!0))return c("MOzVideoPlayerApi");return c("MProgressiveVideoPlayerApi")}function E(a,b,d){var e=500;b.videoScrollUseLowThrottleRate&&(e=200);m||(m=new(c("SubscriptionsHandler"))());m.addSubscriptions(c("Stratcom").listen("scroll",null,c("throttle")(function(){return F(a,b,d)},e)))}function F(a,b,d){if(!k)return;b=c("MFullScreen").isFullScreen()||c("MVideoUtils").isVisible(c("getElementPosition")(a));d=k.isPlayingState();!b&&d&&q()!=="autoplay_initiated"?r("video_visibility_initiated"):b&&!d&&q()==="video_visibility_initiated"&&s("video_visibility_initiated")}function G(){return k?k.isPlayScheduled()?c("MVideoUtils").PLAYER_STATE.playing:c("MVideoUtils").PLAYER_STATE.paused:c("MVideoUtils").PLAYER_STATE.paused}function H(){k&&!k.isVisible()&&o()}g.getLastActionReason=q;g.getPlayerState=G;g.getPlayerDOMVideoElement=b;g.pause=r;g.play=s;g.removePlayer=o;g.setLastActionReason=t;g.setupListeners=a;g.showPlayer=A;g.unmute=e;g.mute=f}),34);
__d("MVideoAutoplayPlayerBase",["EventEmitter"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.wasVisible=!1,b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.isVisible=function(){throw new Error("Should be overridden")};c.getDistanceToViewport=function(){throw new Error("Should be overridden")};c.playWithoutUnmute=function(a){throw new Error("Should be overridden")};c.prepareForPlay=function(){throw new Error("Should be overridden")};c.pause=function(a){throw new Error("Should be overridden")};c.isAutoplayable=function(){throw new Error("Should be overridden")};c.getDOMPosition=function(){throw new Error("Should be overridden")};c.isLooping=function(){throw new Error("Should be overridden")};c.isState=function(a){throw new Error("Should be overridden")};c.setLastActionReason=function(a){throw new Error("Should be overridden")};return b}(c("EventEmitter"));g["default"]=a}),98);
__d("MVideoPlayerApiEvents",[],(function(a,b,c,d,e,f){a=["volumeChange","stateChange","fullscreenChange","destroyed","prepare"];e.exports=a}),null);
__d("MVideoPrefetcher",["MVideoAutoplayConfig","Promise","Run"],(function(a,b,c,d,e,f,g){var h=null,i=500;a=function(){function a(){this.$1=new Map(),this.$2=new Map(),this.$3=[],this.$4=[],this.$5=0,this.$6=1}var e=a.prototype;e.$7=function(a,b,d){d.lastProgressValue*1e3>c("MVideoAutoplayConfig").autoplay_prefetch_duration_threshold_ms||d.video.duration&&d.lastProgressValue>.9*d.video.duration?(clearInterval(d.watchdog),this.$8(d),this.$2.set(d.url,!0),a()):(clearInterval(d.watchdog),this.$8(d),b(new Error("Insufficient data received for a video preload")))};e.$9=function(a){var d=this,e=document.createElement("video");e.setAttribute("src",a);e.setAttribute("preload","auto");var f={video:e,lastProgressTime:Date.now(),lastProgressValue:0,url:a},g=new(b("Promise"))(function(a,b){f.watchdog=setInterval(function(){var e=Date.now();e>f.lastProgressTime+c("MVideoAutoplayConfig").autoplay_prefetch_waiting_time_ms&&d.$7(a,b,f)},i),e.addEventListener("progress",function(){var a=e.buffered&&e.buffered.end&&e.buffered.length>0?e.buffered.end(0):0;a>f.lastProgressValue&&(f.lastProgressValue=a,f.lastProgressTimestamp=Date.now())})});this.$10(a,g);this.$3.push(f);e.load();return g};e.$11=function(b){var c=[];for(var d=0;d<b.length;d++){var e=a.createQueryStringURL(b[d]);this.$1.has(e)||c.push(this.$9(e))}return c};e.$12=function(a){var c=this;this.$5++;a=this.$11(a.video);b("Promise").all(a).then(function(){c.$13()})["catch"](function(){return c.$13()})};e.$10=function(a,b){var c=this,e=!!this.$1.values().next().done;e&&d("Run").onLeave(function(){for(var a=0;a<c.$3.length;a++)c.$14(c.$3[a]);c.$3=[];c.$4=[];c.$5=0;c.$1.clear()});this.$1.set(a,b)};e.$14=function(a){a=a.video;a.setAttribute("src","");a.load&&a.load()};e.$8=function(a){this.$14(a);a=this.$3.indexOf(a);a>-1&&this.$3.splice(a,1)};e.$13=function(){this.$5--;var a=this.$4.shift();a&&this.$12(a)};e.getAndDelete=function(a){var b=this.$1.get(a);this.$1["delete"](a);return b};e.getPreloadCache=function(a){return this.$2.get(a)};e.queueRequestBatch=function(a){this.$6===0||this.$5<this.$6?this.$12(a):this.$4.push(a)};a.getInstance=function(){h===null&&(h=new a());return h};a.createQueryStringURL=function(a){return a.url};a.loadVideo=function(b){var c=a.getInstance();c.queueRequestBatch({video:[{url:b}]})};a.isVideoPreloaded=function(b){return!!a.getInstance().getPreloadCache(b)};return a}();g["default"]=a}),98);
__d("MVideoPlayerController",["EventEmitter","MInlineVideo","MLegacyDataStore","MOzExperiments","MOzVideoPlayerApi","MVideoDashPrefetchCache","MVideoExperiments","MVideoPrefetcher","Stratcom","destroyOnUnload","getElementPosition","shouldUseOzPlayer"],(function(a,b,c,d,e,f,g){var h="MVideoPlayerController_instance",i=null,j=null;a=function(a){babelHelpers.inheritsLoose(b,a);function b(e,f,g,h){var i;i=a.call(this)||this;i.preload=function(){if(c("MVideoExperiments").do_not_prefetch_autoplay)return;var a=d("MLegacyDataStore").get(i.$MVideoPlayerController3),b=a&&a.src;b&&!c("shouldUseOzPlayer")(a)&&c("MVideoPrefetcher").loadVideo(b)};i.$MVideoPlayerController2=f.video_ids;i.$MVideoPlayerController3=e.video_element;i.$MVideoPlayerController1=e.root_element;i.$MVideoPlayerController6=g;i.$MVideoPlayerController7=h;!c("MOzExperiments").no_prefetch_for_ctp&&!c("MOzExperiments").no_quickstarter_for_ctp&&(i.prefetch(),i.prepareMVideoPlayerApi());i.$MVideoPlayerController4="ready";i.$MVideoPlayerController8(i.$MVideoPlayerController3);i.$MVideoPlayerController5=null;b.$MVideoPlayerController9();return i}var e=b.prototype;e.prepareMVideoPlayerApi=function(a){c("MOzVideoPlayerApi").prepare(this.$MVideoPlayerController3,this.$MVideoPlayerController6,a)};e.prefetch=function(){if(c("MVideoExperiments").do_not_prefetch_autoplay)return;if(!this.$MVideoPlayerController6)return;this.$MVideoPlayerController6.connection_quality_level?c("MVideoDashPrefetchCache").loadVideo(this.$MVideoPlayerController6.prefetch_data,this.$MVideoPlayerController6.use_credentials,this.$MVideoPlayerController6.connection_quality_level):c("MVideoDashPrefetchCache").loadVideo(this.$MVideoPlayerController6.prefetch_data,this.$MVideoPlayerController6.use_credentials)};e.isFullscreen=function(){return!1};e.getVideoID=function(){return this.$MVideoPlayerController2[0]};e.play=function(a){this.emit("playRequested",a),this.sendPlayRequest(a)};e.prepareForPlay=function(){};e.sendPlayRequest=function(a){var b=!0;b=d("MInlineVideo").showPlayer(null,this.$MVideoPlayerController3,b,a);(!b||!c("MVideoExperiments").mtouch_no_double_play)&&d("MInlineVideo").play(a)};e.pause=function(a){this.emit("pauseRequested",a),d("MInlineVideo").pause(a)};e.isAutoplayable=function(){return!1};e.getDOMPosition=function(){return c("getElementPosition")(this.getRootNode())};e.setState=function(a){this.$MVideoPlayerController4=a,this.emit("stateChange")};e.isState=function(a){return this.$MVideoPlayerController4===a};e.getVideoNode=function(){return this.$MVideoPlayerController3};e.getRootNode=function(){return this.$MVideoPlayerController1};e.setLastActionReason=function(a){this.$MVideoPlayerController5=a,a&&d("MInlineVideo").setLastActionReason(a)};e.getLastActionReason=function(){return this.$MVideoPlayerController5};e.isPreloaded=function(){var a=d("MLegacyDataStore").get(this.$MVideoPlayerController3);a=a&&a.src;return a&&c("MVideoPrefetcher").isVideoPreloaded(a)};b.$MVideoPlayerController9=function(){if(i)return;i=[c("Stratcom").listen("m:video:player:play",null,function(a){a=b.$MVideoPlayerController10(a);b.handleApiBeginPlayback(a);!j&&c("MVideoExperiments").refresh_browser_autoplay_settings&&(j=null)}),c("Stratcom").listen("m:video:player:pause",null,function(a){var c=b.$MVideoPlayerController10(a);a=!!(a.getData()&&a.getData().destroyed);b.handleApiPausePlayback(c,a)}),c("Stratcom").listen("m:video:player:ended",null,function(a){a=b.$MVideoPlayerController10(a);b.handleApiFinishPlayback(a)}),c("Stratcom").listen("m:video:player:volumechange",null,function(a){a=b.$MVideoPlayerController10(a);b.handleApiVolumeChange(a)}),c("Stratcom").listen("m:video:player:fullscreenchange",null,function(a){a=b.$MVideoPlayerController10(a);b.handleApiFullScreenChange(a)}),c("Stratcom").listen("m:video:player:prepare",null,function(a){a=b.$MVideoPlayerController10(a);b.handleApiPrepare(a)}),c("Stratcom").listen("m:video:player:destroy",null,function(a){a=b.$MVideoPlayerController10(a);b.handleApiDestroyed(a)})];c("destroyOnUnload")(function(){i&&(i.forEach(function(a){return a.remove()}),i=null)})};b.handleApiBeginPlayback=function(a){a=d("MLegacyDataStore").get(a)[h];a&&a.$MVideoPlayerController11()};b.handleApiPausePlayback=function(a,b){a=d("MLegacyDataStore").get(a)[h];a&&a.$MVideoPlayerController12(b)};b.handleApiFinishPlayback=function(a){a=d("MLegacyDataStore").get(a)[h];a&&a.$MVideoPlayerController13()};b.handleApiVolumeChange=function(a){a=d("MLegacyDataStore").get(a)[h];a&&a.$MVideoPlayerController14()};b.handleApiFullScreenChange=function(a){a=d("MLegacyDataStore").get(a)[h];a&&a.$MVideoPlayerController15()};b.handleApiDestroyed=function(a){a=d("MLegacyDataStore").get(a)[h];a&&a.$MVideoPlayerController16()};b.handleApiPrepare=function(a){a=d("MLegacyDataStore").get(a)[h];a&&a.$MVideoPlayerController17()};e.$MVideoPlayerController11=function(){this.setState("playing")};e.$MVideoPlayerController12=function(a){!this.isState("finished")&&!this.isState("ready")&&(!a?this.setState("paused"):this.setState("ready"))};e.$MVideoPlayerController13=function(){this.setState("finished")};e.$MVideoPlayerController14=function(){this.emit("volumeChange")};e.$MVideoPlayerController15=function(){this.emit("fullscreenChange")};e.$MVideoPlayerController16=function(){this.setState("ready"),this.emit("destroyed")};e.$MVideoPlayerController17=function(){this.emit("prepare")};e.$MVideoPlayerController8=function(a){var b;b=(b={},b[h]=this,b);d("MLegacyDataStore").set(a,b)};b.$MVideoPlayerController10=function(a){a=a.getData();return a&&a.videoElement};b.isBrowserAutoplayEnabled=function(){if(j===null){var a=document.createElement("video");a.muted=!0;a.setAttribute("playsinline","playsinline");var b=a.play();j=!a.paused;b!=null&&b.then(function(){a.pause()})["catch"](function(){})}return j};return b}(c("EventEmitter"));g["default"]=a}),98);
__d("MFeedVideoPlayerController",["MFullScreen","MOzExperiments","MVideoAutoplayConfig","MVideoAutoplayPlayerBase","MVideoCache","MVideoDownloadState","MVideoDownloadStateHandler","MVideoExperiments","MVideoNetworkUtils","MVideoPlayerApiEvents","MVideoPlayerController","MVideoUtils","Visibility","destroyOnUnload","getViewportDimensions","qex"],(function(a,b,c,d,e,f,g){var h=.5;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this)||this;e.$MFeedVideoPlayerController1=d;e.$MFeedVideoPlayerController2=b;e.$MFeedVideoPlayerController3=d.controller;e.$MFeedVideoPlayerController5=!1;e.$MFeedVideoPlayerController4=[];c("destroyOnUnload")(function(){e.$MFeedVideoPlayerController4.forEach(function(a){return a.remove()}),e.$MFeedVideoPlayerController4=[]});e.$MFeedVideoPlayerController6();if(c("MOzExperiments").no_prefetch_for_ctp||c("MOzExperiments").no_quickstarter_for_ctp){b=e.isAutoplayable();!e.$MFeedVideoPlayerController1.disable_preload&&(!c("MOzExperiments").no_prefetch_for_ctp||c("MOzExperiments").no_prefetch_for_ctp&&b)&&e.$MFeedVideoPlayerController3.prefetch();e.$MFeedVideoPlayerController3.prepareMVideoPlayerApi(babelHelpers.assertThisInitialized(e))}e.$MFeedVideoPlayerController1.should_autoplay&&!e.$MFeedVideoPlayerController1.disable_preload&&e.$MFeedVideoPlayerController7();return e}var e=b.prototype;e.$MFeedVideoPlayerController7=function(){c("MVideoPlayerController").isBrowserAutoplayEnabled()&&!d("MVideoCache").isVideoDownloaded(this.getVideoID())&&this.$MFeedVideoPlayerController8()&&c("MVideoAutoplayConfig").autoplay_prefetch_enabled&&(this.$MFeedVideoPlayerController3.preload&&this.$MFeedVideoPlayerController3.preload())};e.$MFeedVideoPlayerController8=function(){var a=this.$MFeedVideoPlayerController1.autoplay_setting;if(a==="off")return!1;else if(d("MVideoCache").isVideoDownloaded(this.getVideoID()))return!1;else if(a==="wifi_only"&&this.$MFeedVideoPlayerController9("WIFI"))return!0;else if(a==="on"&&this.$MFeedVideoPlayerController9())return!0;return!1};e.$MFeedVideoPlayerController9=function(a){var b=c("MVideoNetworkUtils").getNetworkBandwidth();if(!b)if(c("MVideoExperiments").desktop_no_bandwidthmax)return!0;else b=0;var d=c("MVideoNetworkUtils").getConnectivityType(),e=this.$MFeedVideoPlayerController1.autoplay_bandwidth_threshold_mbps!=null?this.$MFeedVideoPlayerController1.autoplay_bandwidth_threshold_mbps:c("MVideoAutoplayConfig").autoplay_bandwidth_threshold_mbps;d=(!a||d===a)&&b>=e;return d};e.isVisible=function(){if(this.$MFeedVideoPlayerController3.isFullscreen()||d("MFullScreen").isFullScreen())return!0;return c("Visibility").isSupported()&&c("qex")._("409")&&c("Visibility").isHidden()?!1:c("MVideoUtils").isVisible(this.getDOMPosition())};e.getDistanceToViewport=function(){if(this.$MFeedVideoPlayerController3.isFullscreen())return 0;var a=c("getViewportDimensions")().height,b=this.getDOMPosition();if(b.height===0)return-Infinity;b=b.y+(1-h)*b.height;return b-a/2};e.playWithoutUnmute=function(a){this.$MFeedVideoPlayerController3.play(a)};e.prepareForPlay=function(){!d("MVideoCache").isVideoDownloaded(this.getVideoID())&&c("MVideoAutoplayConfig").autoplay_prefetch_enabled&&c("MVideoAutoplayConfig").autoplay_prepare_next_video_enabled&&this.$MFeedVideoPlayerController3.prepareForPlay()};e.pause=function(a){this.$MFeedVideoPlayerController3.pause(a)};e.isAutoplayable=function(){var a=!1,b=this.getVideoID();c("MVideoPlayerController").isBrowserAutoplayEnabled()&&!this.$MFeedVideoPlayerController5&&(this.$MFeedVideoPlayerController1.should_autoplay&&(d("MVideoCache").isVideoDownloaded(b)?a=!1:this.$MFeedVideoPlayerController8()&&(c("MVideoAutoplayConfig").autoplay_prefetch_required_for_playback?a=this.$MFeedVideoPlayerController3.isPreloaded():a=!0)));return a};e.getDOMPosition=function(){return this.$MFeedVideoPlayerController3.getDOMPosition()};e.isLooping=function(){return!1};e.getVideoID=function(){return this.$MFeedVideoPlayerController3.getVideoID()};e.$MFeedVideoPlayerController6=function(){var a=this,b=[["stateChange",function(b){return a.$MFeedVideoPlayerController10(b)}]],d=function(b){return a.emit.bind(a,b)};this.$MFeedVideoPlayerController4=b.map(function(b){return a.$MFeedVideoPlayerController3.addListener(b[0],b[1])}).concat(c("MVideoPlayerApiEvents").map(function(b){return a.$MFeedVideoPlayerController3.addListener(b,d(b))}));c("MVideoDownloadStateHandler").listen(this.getVideoID(),function(b){return a.$MFeedVideoPlayerController11(b)})};e.$MFeedVideoPlayerController10=function(){this.$MFeedVideoPlayerController12()};e.$MFeedVideoPlayerController12=function(){(!this.isState("playing")&&this.getLastActionReason()==="user_initiated"||this.isState("finished"))&&(this.$MFeedVideoPlayerController5=!0,this.emit("autoplayableChange"))};e.$MFeedVideoPlayerController11=function(a){a.state===d("MVideoDownloadState").DOWNLOADED&&(this.$MFeedVideoPlayerController5=!1,this.setLastActionReason(null),this.emit("autoplayableChange"))};e.isState=function(a){return this.$MFeedVideoPlayerController3.isState(a)};e.getLastActionReason=function(){return this.$MFeedVideoPlayerController3.getLastActionReason()};e.setLastActionReason=function(a){this.$MFeedVideoPlayerController3.setLastActionReason(a),this.$MFeedVideoPlayerController12()};return b}(c("MVideoAutoplayPlayerBase"));g["default"]=a}),98);
__d("MVideoAutoplayControllerBase",["Stratcom","SubscriptionsHandler","Visibility","destroyOnUnload","qex","throttle"],(function(a,b,c,d,e,f,g){a=function(){function a(a){var b=this;this.$8=function(){b.autoplayActive()&&!b.$2&&(b.$2=b.getPlayingVideoUnit(),b.pausePlayingVideo("page_visibility_initiated")),c("qex")._("451")&&b.updateAutoplay()};this.$9=function(){b.autoplayActive()&&b.$2&&(b.playVideo(b.$2,"page_visibility_initiated"),b.$2=null),c("qex")._("455")&&b.updateAutoplay()};this.$12=function(){b.$7()};this.updateAutoplay=function(){throw new Error("Should be overridden")};this.$3=null;this.$2=null;this.$6=[];this.$1=a;this.$4=null;this.$5=new(c("SubscriptionsHandler"))();c("destroyOnUnload")(function(){b.$6=[],b.$3=null,b.$4&&(b.$4.remove(),b.$4=null),b.$5.release()})}var b=a.prototype;b.getVideoUnits=function(){return this.$6};b.addVideoUnit=function(a){this.$6.push(a)};b.getPlayingVideoUnit=function(){return this.$3};b.setPlayingVideoUnit=function(a){this.$3=a};b.playVideo=function(a,b){this.setPlayingVideoUnit(a),this.$3&&this.$3.playWithoutUnmute(b)};b.addSubscriberVideoUnit=function(){this.getVideoUnits().length||(this.$5.addSubscriptions(c("Stratcom").listen("resize",null,this.updateAutoplay.bind(this)),c("Stratcom").listen("blur",null,this.$8.bind(this)),c("Stratcom").listen("focus",null,this.$9.bind(this)),c("Visibility").addListener(c("Visibility").HIDDEN,this.$8.bind(this)),c("Visibility").addListener(c("Visibility").VISIBLE,this.$9.bind(this)),c("Stratcom").listen("MScrollArea:scrollend",null,c("throttle")(this.updateAutoplay.bind(this),this.$1)),c("Stratcom").listen("MScrollArea:scroll",null,c("throttle")(this.updateAutoplay.bind(this),this.$1)),c("Stratcom").listen("MScrollArea:create",null,c("throttle")(this.updateAutoplay.bind(this),this.$1)),c("Stratcom").listen("MScrollArea:reflow",null,c("throttle")(this.updateAutoplay.bind(this),this.$1))),this.$10()||this.$11())};b.$11=function(){this.$4&&(this.$4.remove(),this.$4=null),this.$7=c("throttle")(this.updateAutoplay.bind(this),this.$1),this.$4=c("Stratcom").listen("scroll",null,this.$12.bind(this))};b.$10=function(){return!!this.$4};b.getClosestVideoUnits=function(a,b){return this.$6.filter(function(a){return a.getDistanceToViewport()>=0&&(!b||b&&a.isAutoplayable())}).sort(function(a,b){return a.getDistanceToViewport()-b.getDistanceToViewport()}).slice(0,a)};b.getVisibleUnits=function(){var a=[];this.$6.forEach(function(b){b.isVisible()?(a.push(b),b.wasVisible||(b.wasVisible=!0)):b.wasVisible=!1});return a};b.pausePlayingVideo=function(a){var b=this.$3;b&&(b.pause(a),this.$3=null)};b.autoplayActive=function(){throw new Error("Should be overridden")};return a}();g["default"]=a}),98);
__d("MVideoAutoplayControllerX",["MVideoAutoplayControllerBase","SubscriptionsHandler","destroyOnUnload","getViewportDimensions","setImmediate"],(function(a,b,c,d,e,f,g){var h=null,i=500;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b;b=a.call(this,i)||this;b.updateAutoplay=function(){if(!b.autoplayActive())return;if(!b.$MVideoAutoplayControllerX1){b.pausePlayingVideo("autoplay_initiated");return}var a=b.getVisibleUnits(),d=a.length,e=null;if(d==1)e=a[0],e=e.isAutoplayable()?e:null;else if(d>1){var f=c("getViewportDimensions")().height/2;a.forEach(function(a){if(!a.isAutoplayable())return;var b=a.getDOMPosition();b=b.y+b.height/2;b=Math.abs(b-f);a.playPriority=b;(!e||typeof e.playPriority==="number"&&a.playPriority<e.playPriority)&&(e=a)})}b.getPlayingVideoUnit()?e!=b.getPlayingVideoUnit()&&(b.pausePlayingVideo("autoplay_initiated"),b.playVideo(e,"autoplay_initiated")):e&&b.playVideo(e,"autoplay_initiated");d=b.getClosestVideoUnits(2,!0);a=d.length;var g=null;for(var h=0;h<a;h++)if(d[h]!==e){g=d[h];break}g&&g.prepareForPlay()};b.$MVideoAutoplayControllerX1=!0;b.$MVideoAutoplayControllerX2=new(c("SubscriptionsHandler"))();b.$MVideoAutoplayControllerX3=null;c("destroyOnUnload")(function(){b.$MVideoAutoplayControllerX4(),babelHelpers.assertThisInitialized(b)===h&&(h=null)});return b}b.registerVideoUnit=function(a){h==null&&(h=new b()),h.addSubscriberVideoUnit(),h.addVideoUnit(a),h.$MVideoAutoplayControllerX5(a),a.isVisible()&&h.updateAutoplay()};b.setShouldAutoplay=function(a){h==null&&(h=new b()),h.$MVideoAutoplayControllerX1=a,h.updateAutoplay()};var d=b.prototype;d.$MVideoAutoplayControllerX4=function(){this.$MVideoAutoplayControllerX2.release()};d.$MVideoAutoplayControllerX6=function(a){a&&(a.setLastActionReason("user_initiated"),this.getPlayingVideoUnit()&&this.setPlayingVideoUnit(null)),this.$MVideoAutoplayControllerX3=a,this.updateAutoplay()};d.$MVideoAutoplayControllerX5=function(a){var b=this;if(!a.addListener)return;var c=function(){b.getPlayingVideoUnit()==a&&a.isState("paused")||b.getPlayingVideoUnit()!=a&&a.isState("playing")?b.$MVideoAutoplayControllerX6(a):a==b.$MVideoAutoplayControllerX3&&a.isState("finished")&&b.$MVideoAutoplayControllerX6(null)},d=function(){(a.isState("playing")||a.isState("paused"))&&b.$MVideoAutoplayControllerX6(a)},e=function(){b.getPlayingVideoUnit()!=a&&b.$MVideoAutoplayControllerX6(a)},f=function(){b.updateAutoplay()},g=function(){b.$MVideoAutoplayControllerX3&&b.$MVideoAutoplayControllerX3==a&&b.$MVideoAutoplayControllerX6(null)};this.$MVideoAutoplayControllerX2.addSubscriptions(this.$MVideoAutoplayControllerX7(a,"stateChange",c),this.$MVideoAutoplayControllerX7(a,"prepare",e),this.$MVideoAutoplayControllerX7(a,"volumeChange",d),this.$MVideoAutoplayControllerX7(a,"fullscreenChange",d),this.$MVideoAutoplayControllerX7(a,"autoplayableChange",f),this.$MVideoAutoplayControllerX7(a,"destroyed",g))};d.$MVideoAutoplayControllerX7=function(a,b,d){a=a.addListener(b,function(){c("setImmediate")(function(){d()})});return a};d.autoplayActive=function(){this.$MVideoAutoplayControllerX3&&!this.$MVideoAutoplayControllerX3.isVisible()&&!this.$MVideoAutoplayControllerX3.isState("playing")&&(this.$MVideoAutoplayControllerX3=null);return this.$MVideoAutoplayControllerX3==null};return b}(c("MVideoAutoplayControllerBase"));g["default"]=a}),98);
__d("MVideoFeedRegister",["MFeedVideoPlayerController","MVideoAutoplayControllerX"],(function(a,b,c,d,e,f,g){function a(a,b){a=new(c("MFeedVideoPlayerController"))(a,b);c("MVideoAutoplayControllerX").registerVideoUnit(a)}g.registerVideoUnit=a}),98);